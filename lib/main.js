"use strict";var h_=Object.create;var Ui=Object.defineProperty;var m_=Object.getOwnPropertyDescriptor;var p_=Object.getOwnPropertyNames;var y_=Object.getPrototypeOf,g_=Object.prototype.hasOwnProperty;var pe=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),is=(t,e)=>{for(var r in e)Ui(t,r,{get:e[r],enumerable:!0})},Gh=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of p_(e))!g_.call(t,s)&&s!==r&&Ui(t,s,{get:()=>e[s],enumerable:!(n=m_(e,s))||n.enumerable});return t};var St=(t,e,r)=>(r=t!=null?h_(y_(t)):{},Gh(e||!t||!t.__esModule?Ui(r,"default",{value:t,enumerable:!0}):r,t)),as=t=>Gh(Ui({},"__esModule",{value:!0}),t);var $i=O(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.toCommandProperties=cs.toCommandValue=void 0;function E_(t){return t==null?"":typeof t=="string"||t instanceof String?t:JSON.stringify(t)}cs.toCommandValue=E_;function x_(t){return Object.keys(t).length?{title:t.title,file:t.file,line:t.startLine,endLine:t.endLine,col:t.startColumn,endColumn:t.endColumn}:{}}cs.toCommandProperties=x_});var Yh=O(st=>{"use strict";var C_=st&&st.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),w_=st&&st.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S_=st&&st.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&C_(e,t,r);return w_(e,t),e};Object.defineProperty(st,"__esModule",{value:!0});st.issue=st.issueCommand=void 0;var b_=S_(require("os")),Vh=$i();function Wh(t,e,r){let n=new Ad(t,e,r);process.stdout.write(n.toString()+b_.EOL)}st.issueCommand=Wh;function __(t,e=""){Wh(t,{},e)}st.issue=__;var Hh="::",Ad=class{constructor(e,r,n){e||(e="missing.command"),this.command=e,this.properties=r,this.message=n}toString(){let e=Hh+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let s=this.properties[n];s&&(r?r=!1:e+=",",e+=`${n}=${A_(s)}`)}}return e+=`${Hh}${R_(this.message)}`,e}};function R_(t){return Vh.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function A_(t){return Vh.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Oo(){return qi>ji.length-16&&(Xh.default.randomFillSync(ji),qi=0),ji.slice(qi,qi+=16)}var Xh,ji,qi,kd=pe(()=>{Xh=St(require("crypto")),ji=new Uint8Array(256),qi=ji.length});var Qh,Zh=pe(()=>{Qh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function k_(t){return typeof t=="string"&&Qh.test(t)}var Tr,Io=pe(()=>{Zh();Tr=k_});function T_(t,e=0){let r=(Ae[t[e+0]]+Ae[t[e+1]]+Ae[t[e+2]]+Ae[t[e+3]]+"-"+Ae[t[e+4]]+Ae[t[e+5]]+"-"+Ae[t[e+6]]+Ae[t[e+7]]+"-"+Ae[t[e+8]]+Ae[t[e+9]]+"-"+Ae[t[e+10]]+Ae[t[e+11]]+Ae[t[e+12]]+Ae[t[e+13]]+Ae[t[e+14]]+Ae[t[e+15]]).toLowerCase();if(!Tr(r))throw TypeError("Stringified UUID is invalid");return r}var Ae,Nr,vo=pe(()=>{Io();Ae=[];for(let t=0;t<256;++t)Ae.push((t+256).toString(16).substr(1));Nr=T_});function N_(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let o=t.node||Jh,i=t.clockseq!==void 0?t.clockseq:Td;if(o==null||i==null){let h=t.random||(t.rng||Oo)();o==null&&(o=Jh=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),i==null&&(i=Td=(h[6]<<8|h[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),d=t.nsecs!==void 0?t.nsecs:Od+1,c=a-Nd+(d-Od)/1e4;if(c<0&&t.clockseq===void 0&&(i=i+1&16383),(c<0||a>Nd)&&t.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Nd=a,Od=d,Td=i,a+=122192928e5;let l=((a&268435455)*1e4+d)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let u=a/4294967296*1e4&268435455;s[n++]=u>>>8&255,s[n++]=u&255,s[n++]=u>>>24&15|16,s[n++]=u>>>16&255,s[n++]=i>>>8|128,s[n++]=i&255;for(let h=0;h<6;++h)s[n+h]=o[h];return e||Nr(s)}var Jh,Td,Nd,Od,em,tm=pe(()=>{kd();vo();Nd=0,Od=0;em=N_});function O_(t){if(!Tr(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Ki,Id=pe(()=>{Io();Ki=O_});function I_(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Gi(t,e,r){function n(s,o,i,a){if(typeof s=="string"&&(s=I_(s)),typeof o=="string"&&(o=Ki(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+s.length);if(d.set(o),d.set(s,o.length),d=r(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,i){a=a||0;for(let c=0;c<16;++c)i[a+c]=d[c];return i}return Nr(d)}try{n.name=t}catch{}return n.DNS=v_,n.URL=P_,n}var v_,P_,vd=pe(()=>{vo();Id();v_="6ba7b810-9dad-11d1-80b4-00c04fd430c8",P_="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function D_(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),rm.default.createHash("md5").update(t).digest()}var rm,nm,sm=pe(()=>{rm=St(require("crypto"));nm=D_});var B_,om,im=pe(()=>{vd();sm();B_=Gi("v3",48,nm),om=B_});function M_(t,e,r){t=t||{};let n=t.random||(t.rng||Oo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return Nr(n)}var Hi,am=pe(()=>{kd();vo();Hi=M_});function F_(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),cm.default.createHash("sha1").update(t).digest()}var cm,dm,lm=pe(()=>{cm=St(require("crypto"));dm=F_});var L_,fm,um=pe(()=>{vd();lm();L_=Gi("v5",80,dm),fm=L_});var hm,mm=pe(()=>{hm="00000000-0000-0000-0000-000000000000"});function z_(t){if(!Tr(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var pm,ym=pe(()=>{Io();pm=z_});var gm={};is(gm,{NIL:()=>hm,parse:()=>Ki,stringify:()=>Nr,v1:()=>em,v3:()=>om,v4:()=>Hi,v5:()=>fm,validate:()=>Tr,version:()=>pm});var Pd=pe(()=>{tm();im();am();um();mm();ym();Io();vo();Id()});var wm=O(ot=>{"use strict";var U_=ot&&ot.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$_=ot&&ot.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xm=ot&&ot.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&U_(e,t,r);return $_(e,t),e};Object.defineProperty(ot,"__esModule",{value:!0});ot.prepareKeyValueMessage=ot.issueFileCommand=void 0;var Em=xm(require("fs")),Dd=xm(require("os")),q_=(Pd(),as(gm)),Cm=$i();function j_(t,e){let r=process.env[`GITHUB_${t}`];if(!r)throw new Error(`Unable to find environment variable for file command ${t}`);if(!Em.existsSync(r))throw new Error(`Missing file at path: ${r}`);Em.appendFileSync(r,`${Cm.toCommandValue(e)}${Dd.EOL}`,{encoding:"utf8"})}ot.issueFileCommand=j_;function K_(t,e){let r=`ghadelimiter_${q_.v4()}`,n=Cm.toCommandValue(e);if(t.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${t}<<${r}${Dd.EOL}${n}${Dd.EOL}${r}`}ot.prepareKeyValueMessage=K_});var bm=O(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.checkBypass=ds.getProxyUrl=void 0;function G_(t){let e=t.protocol==="https:";if(Sm(t))return;let r=(()=>e?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}ds.getProxyUrl=G_;function Sm(t){if(!t.hostname)return!1;let e=t.hostname;if(H_(e))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;t.port?n=Number(t.port):t.protocol==="http:"?n=80:t.protocol==="https:"&&(n=443);let s=[t.hostname.toUpperCase()];typeof n=="number"&&s.push(`${s[0]}:${n}`);for(let o of r.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(o==="*"||s.some(i=>i===o||i.endsWith(`.${o}`)||o.startsWith(".")&&i.endsWith(`${o}`)))return!0;return!1}ds.checkBypass=Sm;function H_(t){let e=t.toLowerCase();return e==="localhost"||e.startsWith("127.")||e.startsWith("[::1]")||e.startsWith("[0:0:0:0:0:0:0:1]")}});var km=O(ls=>{"use strict";var UB=require("net"),V_=require("tls"),Bd=require("http"),_m=require("https"),W_=require("events"),$B=require("assert"),Y_=require("util");ls.httpOverHttp=X_;ls.httpsOverHttp=Q_;ls.httpOverHttps=Z_;ls.httpsOverHttps=J_;function X_(t){var e=new rr(t);return e.request=Bd.request,e}function Q_(t){var e=new rr(t);return e.request=Bd.request,e.createSocket=Rm,e.defaultPort=443,e}function Z_(t){var e=new rr(t);return e.request=_m.request,e}function J_(t){var e=new rr(t);return e.request=_m.request,e.createSocket=Rm,e.defaultPort=443,e}function rr(t){var e=this;e.options=t||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||Bd.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,s,o,i){for(var a=Am(s,o,i),d=0,c=e.requests.length;d<c;++d){var l=e.requests[d];if(l.host===a.host&&l.port===a.port){e.requests.splice(d,1),l.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}Y_.inherits(rr,W_.EventEmitter);rr.prototype.addRequest=function(e,r,n,s){var o=this,i=Md({request:e},o.options,Am(r,n,s));if(o.sockets.length>=this.maxSockets){o.requests.push(i);return}o.createSocket(i,function(a){a.on("free",d),a.on("close",c),a.on("agentRemove",c),e.onSocket(a);function d(){o.emit("free",a,i)}function c(l){o.removeSocket(a),a.removeListener("free",d),a.removeListener("close",c),a.removeListener("agentRemove",c)}})};rr.prototype.createSocket=function(e,r){var n=this,s={};n.sockets.push(s);var o=Md({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),Or("making CONNECT request");var i=n.request(o);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",d),i.once("connect",c),i.once("error",l),i.end();function a(u){u.upgrade=!0}function d(u,h,x){process.nextTick(function(){c(u,h,x)})}function c(u,h,x){if(i.removeAllListeners(),h.removeAllListeners(),u.statusCode!==200){Or("tunneling socket could not be established, statusCode=%d",u.statusCode),h.destroy();var S=new Error("tunneling socket could not be established, statusCode="+u.statusCode);S.code="ECONNRESET",e.request.emit("error",S),n.removeSocket(s);return}if(x.length>0){Or("got illegal response body from proxy"),h.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",e.request.emit("error",S),n.removeSocket(s);return}return Or("tunneling connection has established"),n.sockets[n.sockets.indexOf(s)]=h,r(h)}function l(u){i.removeAllListeners(),Or(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var h=new Error("tunneling socket could not be established, cause="+u.message);h.code="ECONNRESET",e.request.emit("error",h),n.removeSocket(s)}};rr.prototype.removeSocket=function(e){var r=this.sockets.indexOf(e);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(s){n.request.onSocket(s)})}};function Rm(t,e){var r=this;rr.prototype.createSocket.call(r,t,function(n){var s=t.request.getHeader("host"),o=Md({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):t.host}),i=V_.connect(0,o);r.sockets[r.sockets.indexOf(n)]=i,e(i)})}function Am(t,e,r){return typeof t=="string"?{host:t,port:e,localAddress:r}:t}function Md(t){for(var e=1,r=arguments.length;e<r;++e){var n=arguments[e];if(typeof n=="object")for(var s=Object.keys(n),o=0,i=s.length;o<i;++o){var a=s[o];n[a]!==void 0&&(t[a]=n[a])}}return t}var Or;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Or=function(){var t=Array.prototype.slice.call(arguments);typeof t[0]=="string"?t[0]="TUNNEL: "+t[0]:t.unshift("TUNNEL:"),console.error.apply(console,t)}:Or=function(){};ls.debug=Or});var Nm=O((jB,Tm)=>{Tm.exports=km()});var Im=O(te=>{"use strict";var eR=te&&te.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tR=te&&te.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qi=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&eR(e,t,r);return tR(e,t),e},Ee=te&&te.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(te,"__esModule",{value:!0});te.HttpClient=te.isHttps=te.HttpClientResponse=te.HttpClientError=te.getProxyUrl=te.MediaTypes=te.Headers=te.HttpCodes=void 0;var Vi=Qi(require("http")),Fd=Qi(require("https")),Om=Qi(bm()),Wi=Qi(Nm()),bt;(function(t){t[t.OK=200]="OK",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.ResourceMoved=302]="ResourceMoved",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.SwitchProxy=306]="SwitchProxy",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.TooManyRequests=429]="TooManyRequests",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout"})(bt=te.HttpCodes||(te.HttpCodes={}));var ze;(function(t){t.Accept="accept",t.ContentType="content-type"})(ze=te.Headers||(te.Headers={}));var Ir;(function(t){t.ApplicationJson="application/json"})(Ir=te.MediaTypes||(te.MediaTypes={}));function rR(t){let e=Om.getProxyUrl(new URL(t));return e?e.href:""}te.getProxyUrl=rR;var nR=[bt.MovedPermanently,bt.ResourceMoved,bt.SeeOther,bt.TemporaryRedirect,bt.PermanentRedirect],sR=[bt.BadGateway,bt.ServiceUnavailable,bt.GatewayTimeout],oR=["OPTIONS","GET","DELETE","HEAD"],iR=10,aR=5,fs=class extends Error{constructor(e,r){super(e),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,fs.prototype)}};te.HttpClientError=fs;var Xi=class{constructor(e){this.message=e}readBody(){return Ee(this,void 0,void 0,function*(){return new Promise(e=>Ee(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{e(r.toString())})}))})}};te.HttpClientResponse=Xi;function cR(t){return new URL(t).protocol==="https:"}te.isHttps=cR;var Ld=class{constructor(e,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,r){return Ee(this,void 0,void 0,function*(){return this.request("OPTIONS",e,null,r||{})})}get(e,r){return Ee(this,void 0,void 0,function*(){return this.request("GET",e,null,r||{})})}del(e,r){return Ee(this,void 0,void 0,function*(){return this.request("DELETE",e,null,r||{})})}post(e,r,n){return Ee(this,void 0,void 0,function*(){return this.request("POST",e,r,n||{})})}patch(e,r,n){return Ee(this,void 0,void 0,function*(){return this.request("PATCH",e,r,n||{})})}put(e,r,n){return Ee(this,void 0,void 0,function*(){return this.request("PUT",e,r,n||{})})}head(e,r){return Ee(this,void 0,void 0,function*(){return this.request("HEAD",e,null,r||{})})}sendStream(e,r,n,s){return Ee(this,void 0,void 0,function*(){return this.request(e,r,n,s)})}getJson(e,r={}){return Ee(this,void 0,void 0,function*(){r[ze.Accept]=this._getExistingOrDefaultHeader(r,ze.Accept,Ir.ApplicationJson);let n=yield this.get(e,r);return this._processResponse(n,this.requestOptions)})}postJson(e,r,n={}){return Ee(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[ze.Accept]=this._getExistingOrDefaultHeader(n,ze.Accept,Ir.ApplicationJson),n[ze.ContentType]=this._getExistingOrDefaultHeader(n,ze.ContentType,Ir.ApplicationJson);let o=yield this.post(e,s,n);return this._processResponse(o,this.requestOptions)})}putJson(e,r,n={}){return Ee(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[ze.Accept]=this._getExistingOrDefaultHeader(n,ze.Accept,Ir.ApplicationJson),n[ze.ContentType]=this._getExistingOrDefaultHeader(n,ze.ContentType,Ir.ApplicationJson);let o=yield this.put(e,s,n);return this._processResponse(o,this.requestOptions)})}patchJson(e,r,n={}){return Ee(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[ze.Accept]=this._getExistingOrDefaultHeader(n,ze.Accept,Ir.ApplicationJson),n[ze.ContentType]=this._getExistingOrDefaultHeader(n,ze.ContentType,Ir.ApplicationJson);let o=yield this.patch(e,s,n);return this._processResponse(o,this.requestOptions)})}request(e,r,n,s){return Ee(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(r),i=this._prepareRequest(e,o,s),a=this._allowRetries&&oR.includes(e)?this._maxRetries+1:1,d=0,c;do{if(c=yield this.requestRaw(i,n),c&&c.message&&c.message.statusCode===bt.Unauthorized){let u;for(let h of this.handlers)if(h.canHandleAuthentication(c)){u=h;break}return u?u.handleAuthentication(this,i,n):c}let l=this._maxRedirects;for(;c.message.statusCode&&nR.includes(c.message.statusCode)&&this._allowRedirects&&l>0;){let u=c.message.headers.location;if(!u)break;let h=new URL(u);if(o.protocol==="https:"&&o.protocol!==h.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield c.readBody(),h.hostname!==o.hostname)for(let x in s)x.toLowerCase()==="authorization"&&delete s[x];i=this._prepareRequest(e,h,s),c=yield this.requestRaw(i,n),l--}if(!c.message.statusCode||!sR.includes(c.message.statusCode))return c;d+=1,d<a&&(yield c.readBody(),yield this._performExponentialBackoff(d))}while(d<a);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,r){return Ee(this,void 0,void 0,function*(){return new Promise((n,s)=>{function o(i,a){i?s(i):a?n(a):s(new Error("Unknown error"))}this.requestRawWithCallback(e,r,o)})})}requestRawWithCallback(e,r,n){typeof r=="string"&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1;function o(d,c){s||(s=!0,n(d,c))}let i=e.httpModule.request(e.options,d=>{let c=new Xi(d);o(void 0,c)}),a;i.on("socket",d=>{a=d}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),o(new Error(`Request timeout: ${e.options.path}`))}),i.on("error",function(d){o(d)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(e){let r=new URL(e);return this._getAgent(r)}_prepareRequest(e,r,n){let s={};s.parsedUrl=r;let o=s.parsedUrl.protocol==="https:";s.httpModule=o?Fd:Vi;let i=o?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):i,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=e,s.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(s.options);return s}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Yi(this.requestOptions.headers),Yi(e||{})):Yi(e||{})}_getExistingOrDefaultHeader(e,r,n){let s;return this.requestOptions&&this.requestOptions.headers&&(s=Yi(this.requestOptions.headers)[r]),e[r]||s||n}_getAgent(e){let r,n=Om.getProxyUrl(e),s=n&&n.hostname;if(this._keepAlive&&s&&(r=this._proxyAgent),this._keepAlive&&!s&&(r=this._agent),r)return r;let o=e.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||Vi.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},d,c=n.protocol==="https:";o?d=c?Wi.httpsOverHttps:Wi.httpsOverHttp:d=c?Wi.httpOverHttps:Wi.httpOverHttp,r=d(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=o?new Fd.Agent(a):new Vi.Agent(a),this._agent=r}return r||(r=o?Fd.globalAgent:Vi.globalAgent),o&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(e){return Ee(this,void 0,void 0,function*(){e=Math.min(iR,e);let r=aR*Math.pow(2,e);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(e,r){return Ee(this,void 0,void 0,function*(){return new Promise((n,s)=>Ee(this,void 0,void 0,function*(){let o=e.message.statusCode||0,i={statusCode:o,result:null,headers:{}};o===bt.NotFound&&n(i);function a(l,u){if(typeof u=="string"){let h=new Date(u);if(!isNaN(h.valueOf()))return h}return u}let d,c;try{c=yield e.readBody(),c&&c.length>0&&(r&&r.deserializeDates?d=JSON.parse(c,a):d=JSON.parse(c),i.result=d),i.headers=e.message.headers}catch{}if(o>299){let l;d&&d.message?l=d.message:c&&c.length>0?l=c:l=`Failed request: (${o})`;let u=new fs(l,o);u.result=i.result,s(u)}else n(i)}))})}};te.HttpClient=Ld;var Yi=t=>Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{})});var vm=O(Ot=>{"use strict";var qd=Ot&&Ot.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PersonalAccessTokenCredentialHandler=Ot.BearerCredentialHandler=Ot.BasicCredentialHandler=void 0;var zd=class{constructor(e,r){this.username=e,this.password=r}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return qd(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.BasicCredentialHandler=zd;var Ud=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return qd(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.BearerCredentialHandler=Ud;var $d=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return qd(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ot.PersonalAccessTokenCredentialHandler=$d});var Bm=O(us=>{"use strict";var Pm=us&&us.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(us,"__esModule",{value:!0});us.OidcClient=void 0;var dR=Im(),lR=vm(),Dm=jd(),vr=class{static createHttpClient(e=!0,r=10){let n={allowRetries:e,maxRetries:r};return new dR.HttpClient("actions/oidc-client",[new lR.BearerCredentialHandler(vr.getRequestToken())],n)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var r;return Pm(this,void 0,void 0,function*(){let o=(r=(yield vr.createHttpClient().getJson(e).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(e){return Pm(this,void 0,void 0,function*(){try{let r=vr.getIDTokenUrl();if(e){let s=encodeURIComponent(e);r=`${r}&audience=${s}`}Dm.debug(`ID token url is ${r}`);let n=yield vr.getCall(r);return Dm.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};us.OidcClient=vr});var Vd=O($e=>{"use strict";var Kd=$e&&$e.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty($e,"__esModule",{value:!0});$e.summary=$e.markdownSummary=$e.SUMMARY_DOCS_URL=$e.SUMMARY_ENV_VAR=void 0;var fR=require("os"),Gd=require("fs"),{access:uR,appendFile:hR,writeFile:mR}=Gd.promises;$e.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";$e.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Hd=class{constructor(){this._buffer=""}filePath(){return Kd(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let e=process.env[$e.SUMMARY_ENV_VAR];if(!e)throw new Error(`Unable to find environment variable for $${$e.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield uR(e,Gd.constants.R_OK|Gd.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath})}wrap(e,r,n={}){let s=Object.entries(n).map(([o,i])=>` ${o}="${i}"`).join("");return r?`<${e}${s}>${r}</${e}>`:`<${e}${s}>`}write(e){return Kd(this,void 0,void 0,function*(){let r=!!(e!=null&&e.overwrite),n=yield this.filePath();return yield(r?mR:hR)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Kd(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(e,r=!1){return this._buffer+=e,r?this.addEOL():this}addEOL(){return this.addRaw(fR.EOL)}addCodeBlock(e,r){let n=Object.assign({},r&&{lang:r}),s=this.wrap("pre",this.wrap("code",e),n);return this.addRaw(s).addEOL()}addList(e,r=!1){let n=r?"ol":"ul",s=e.map(i=>this.wrap("li",i)).join(""),o=this.wrap(n,s);return this.addRaw(o).addEOL()}addTable(e){let r=e.map(s=>{let o=s.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:d,colspan:c,rowspan:l}=i,u=a?"th":"td",h=Object.assign(Object.assign({},c&&{colspan:c}),l&&{rowspan:l});return this.wrap(u,d,h)}).join("");return this.wrap("tr",o)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(e,r){let n=this.wrap("details",this.wrap("summary",e)+r);return this.addRaw(n).addEOL()}addImage(e,r,n){let{width:s,height:o}=n||{},i=Object.assign(Object.assign({},s&&{width:s}),o&&{height:o}),a=this.wrap("img",null,Object.assign({src:e,alt:r},i));return this.addRaw(a).addEOL()}addHeading(e,r){let n=`h${r}`,s=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",o=this.wrap(s,e);return this.addRaw(o).addEOL()}addSeparator(){let e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,r){let n=Object.assign({},r&&{cite:r}),s=this.wrap("blockquote",e,n);return this.addRaw(s).addEOL()}addLink(e,r){let n=this.wrap("a",e,{href:r});return this.addRaw(n).addEOL()}},Mm=new Hd;$e.markdownSummary=Mm;$e.summary=Mm});var Fm=O(qe=>{"use strict";var pR=qe&&qe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yR=qe&&qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gR=qe&&qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&pR(e,t,r);return yR(e,t),e};Object.defineProperty(qe,"__esModule",{value:!0});qe.toPlatformPath=qe.toWin32Path=qe.toPosixPath=void 0;var ER=gR(require("path"));function xR(t){return t.replace(/[\\]/g,"/")}qe.toPosixPath=xR;function CR(t){return t.replace(/[/]/g,"\\")}qe.toWin32Path=CR;function wR(t){return t.replace(/[/\\]/g,ER.sep)}qe.toPlatformPath=wR});var jd=O(v=>{"use strict";var SR=v&&v.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bR=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Lm=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&SR(e,t,r);return bR(e,t),e},zm=v&&v.__awaiter||function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var it=Yh(),On=wm(),hs=$i(),Um=Lm(require("os")),_R=Lm(require("path")),RR=Bm(),$m;(function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"})($m=v.ExitCode||(v.ExitCode={}));function AR(t,e){let r=hs.toCommandValue(e);if(process.env[t]=r,process.env.GITHUB_ENV||"")return On.issueFileCommand("ENV",On.prepareKeyValueMessage(t,e));it.issueCommand("set-env",{name:t},r)}v.exportVariable=AR;function kR(t){it.issueCommand("add-mask",{},t)}v.setSecret=kR;function TR(t){process.env.GITHUB_PATH||""?On.issueFileCommand("PATH",t):it.issueCommand("add-path",{},t),process.env.PATH=`${t}${_R.delimiter}${process.env.PATH}`}v.addPath=TR;function Wd(t,e){let r=process.env[`INPUT_${t.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!r)throw new Error(`Input required and not supplied: ${t}`);return e&&e.trimWhitespace===!1?r:r.trim()}v.getInput=Wd;function NR(t,e){let r=Wd(t,e).split(`
`).filter(n=>n!=="");return e&&e.trimWhitespace===!1?r:r.map(n=>n.trim())}v.getMultilineInput=NR;function OR(t,e){let r=["true","True","TRUE"],n=["false","False","FALSE"],s=Wd(t,e);if(r.includes(s))return!0;if(n.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${t}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=OR;function IR(t,e){if(process.env.GITHUB_OUTPUT||"")return On.issueFileCommand("OUTPUT",On.prepareKeyValueMessage(t,e));process.stdout.write(Um.EOL),it.issueCommand("set-output",{name:t},hs.toCommandValue(e))}v.setOutput=IR;function vR(t){it.issue("echo",t?"on":"off")}v.setCommandEcho=vR;function PR(t){process.exitCode=$m.Failure,qm(t)}v.setFailed=PR;function DR(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=DR;function BR(t){it.issueCommand("debug",{},t)}v.debug=BR;function qm(t,e={}){it.issueCommand("error",hs.toCommandProperties(e),t instanceof Error?t.toString():t)}v.error=qm;function MR(t,e={}){it.issueCommand("warning",hs.toCommandProperties(e),t instanceof Error?t.toString():t)}v.warning=MR;function FR(t,e={}){it.issueCommand("notice",hs.toCommandProperties(e),t instanceof Error?t.toString():t)}v.notice=FR;function LR(t){process.stdout.write(t+Um.EOL)}v.info=LR;function jm(t){it.issue("group",t)}v.startGroup=jm;function Km(){it.issue("endgroup")}v.endGroup=Km;function zR(t,e){return zm(this,void 0,void 0,function*(){jm(t);let r;try{r=yield e()}finally{Km()}return r})}v.group=zR;function UR(t,e){if(process.env.GITHUB_STATE||"")return On.issueFileCommand("STATE",On.prepareKeyValueMessage(t,e));it.issueCommand("save-state",{name:t},hs.toCommandValue(e))}v.saveState=UR;function $R(t){return process.env[`STATE_${t}`]||""}v.getState=$R;function qR(t){return zm(this,void 0,void 0,function*(){return yield RR.OidcClient.getIDToken(t)})}v.getIDToken=qR;var jR=Vd();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return jR.summary}});var KR=Vd();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return KR.markdownSummary}});var Yd=Fm();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return Yd.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return Yd.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return Yd.toPlatformPath}})});var ol=O(sr=>{"use strict";var lp=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",bA=lp+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",fp="["+lp+"]["+bA+"]*",_A=new RegExp("^"+fp+"$"),RA=function(t,e){let r=[],n=e.exec(t);for(;n;){let s=[];s.startIndex=e.lastIndex-n[0].length;let o=n.length;for(let i=0;i<o;i++)s.push(n[i]);r.push(s),n=e.exec(t)}return r},AA=function(t){let e=_A.exec(t);return!(e===null||typeof e>"u")};sr.isExist=function(t){return typeof t<"u"};sr.isEmptyObject=function(t){return Object.keys(t).length===0};sr.merge=function(t,e,r){if(e){let n=Object.keys(e),s=n.length;for(let o=0;o<s;o++)r==="strict"?t[n[o]]=[e[n[o]]]:t[n[o]]=e[n[o]]}};sr.getValue=function(t){return sr.isExist(t)?t:""};sr.isName=AA;sr.getAllMatches=RA;sr.nameRegexp=fp});var al=O(yp=>{"use strict";var il=ol(),kA={allowBooleanAttributes:!1,unpairedTags:[]};yp.validate=function(t,e){e=Object.assign({},kA,e);let r=[],n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=hp(t,o),o.err)return o}else if(t[o]==="<"){let i=o;if(o++,t[o]==="!"){o=mp(t,o);continue}else{let a=!1;t[o]==="/"&&(a=!0,o++);let d="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)d+=t[o];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),o--),!BA(d)){let u;return d.trim().length===0?u="Invalid space after '<'.":u="Tag '"+d+"' is an invalid name.",ye("InvalidTag",u,Ke(t,o))}let c=OA(t,o);if(c===!1)return ye("InvalidAttr","Attributes for '"+d+"' have open quote.",Ke(t,o));let l=c.value;if(o=c.index,l[l.length-1]==="/"){let u=o-l.length;l=l.substring(0,l.length-1);let h=pp(l,e);if(h===!0)n=!0;else return ye(h.err.code,h.err.msg,Ke(t,u+h.err.line))}else if(a)if(c.tagClosed){if(l.trim().length>0)return ye("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",Ke(t,i));{let u=r.pop();if(d!==u.tagName){let h=Ke(t,u.tagStartPos);return ye("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+d+"'.",Ke(t,i))}r.length==0&&(s=!0)}}else return ye("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",Ke(t,o));else{let u=pp(l,e);if(u!==!0)return ye(u.err.code,u.err.msg,Ke(t,o-l.length+u.err.line));if(s===!0)return ye("InvalidXml","Multiple possible root nodes found.",Ke(t,o));e.unpairedTags.indexOf(d)!==-1||r.push({tagName:d,tagStartPos:i}),n=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=mp(t,o);continue}else if(t[o+1]==="?"){if(o=hp(t,++o),o.err)return o}else break;else if(t[o]==="&"){let u=PA(t,o);if(u==-1)return ye("InvalidChar","char '&' is not expected.",Ke(t,o));o=u}else if(s===!0&&!up(t[o]))return ye("InvalidXml","Extra text at the end",Ke(t,o));t[o]==="<"&&o--}}else{if(up(t[o]))continue;return ye("InvalidChar","char '"+t[o]+"' is not expected.",Ke(t,o))}if(n){if(r.length==1)return ye("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Ke(t,r[0].tagStartPos));if(r.length>0)return ye("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return ye("InvalidXml","Start tag expected.",1);return!0};function up(t){return t===" "||t==="	"||t===`
`||t==="\r"}function hp(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let n=t.substr(r,e-r);if(e>5&&n==="xml")return ye("InvalidXml","XML declaration allowed only at the start of the document.",Ke(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function mp(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var TA='"',NA="'";function OA(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===TA||t[e]===NA)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}var IA=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function pp(t,e){let r=il.getAllMatches(t,IA),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return ye("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Lo(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return ye("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Lo(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return ye("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Lo(r[s]));let o=r[s][2];if(!DA(o))return ye("InvalidAttr","Attribute '"+o+"' is an invalid name.",Lo(r[s]));if(!n.hasOwnProperty(o))n[o]=1;else return ye("InvalidAttr","Attribute '"+o+"' is repeated.",Lo(r[s]))}return!0}function vA(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function PA(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,vA(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function ye(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function DA(t){return il.isName(t)}function BA(t){return il.isName(t)}function Ke(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Lo(t){return t.startIndex+t[1].length}});var Ep=O(cl=>{var gp={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},MA=function(t){return Object.assign({},gp,t)};cl.buildOptions=MA;cl.defaultOptions=gp});var Cp=O((i3,xp)=>{"use strict";var dl=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}};xp.exports=dl});var Sp=O((a3,wp)=>{function FA(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,s=!1,o=!1,i=!1,a="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,o=!0;else if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N")e+=9;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")i=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,n--):(o&&(zA(a,r),o=!1),n--),n===0)break}else t[e]==="["?s=!0:a+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}var LA=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function zA(t,e){let r=LA.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}wp.exports=FA});var _p=O((c3,bp)=>{var UA=/^[-+]?0x[a-fA-F0-9]+$/,$A=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var qA={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function jA(t,e={}){if(e=Object.assign({},qA,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&UA.test(r))return Number.parseInt(r,16);{let n=$A.exec(r);if(n){let s=n[1],o=n[2],i=KA(n[3]),a=n[4]||n[6];if(!e.leadingZeros&&o.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!s&&r[1]!==".")return t;{let d=Number(r),c=""+d;return c.search(/[eE]/)!==-1||a?e.eNotation?d:t:r.indexOf(".")!==-1?c==="0"&&i===""||c===i||s&&c==="-"+i?d:t:o?i===c||s+i===c?d:t:r===c||r===s+c?d:t}}else return t}}function KA(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}bp.exports=jA});var Ap=O((l3,Rp)=>{"use strict";var hl=ol(),zo=Cp(),GA=Sp(),HA=_p(),d3="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,hl.nameRegexp),ll=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=VA,this.parseXml=ZA,this.parseTextData=WA,this.resolveNameSpace=YA,this.buildAttributesMap=QA,this.isItStopNode=tk,this.replaceEntitiesValue=JA,this.readStopNodeData=nk,this.saveTextToParentTag=ek}};function VA(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function WA(t,e,r,n,s,o,i){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){i||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,r,s,o);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?ul(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?ul(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function YA(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var XA=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function QA(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=hl.getAllMatches(t,XA),n=r.length,s={};for(let o=0;o<n;o++){let i=this.resolveNameSpace(r[o][1]),a=r[o][4],d=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);let c=this.options.attributeValueProcessor(i,a,e);c==null?s[d]=a:typeof c!=typeof a||c!==a?s[d]=c:s[d]=ul(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=s,o}return s}}var ZA=function(t){t=t.replace(/\r\n?/g,`
`);let e=new zo("!xml"),r=e,n="",s="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let a=Dn(t,">",o,"Closing Tag is not closed."),d=t.substring(o+2,a).trim();if(this.options.removeNSPrefix){let c=d.indexOf(":");c!==-1&&(d=d.substr(c+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&(n=this.saveTextToParentTag(n,r,s)),s=s.substr(0,s.lastIndexOf(".")),r=this.tagsNodeStack.pop(),n="",o=a}else if(t[o+1]==="?"){let a=fl(t,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let d=new zo(a.tagName);d.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(d[":@"]=this.buildAttributesMap(a.tagExp,s)),r.addChild(d)}o=a.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let a=Dn(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let d=t.substring(o+4,a-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}o=a}else if(t.substr(o+1,2)==="!D"){let a=GA(t,o);this.docTypeEntities=a.entities,o=a.i}else if(t.substr(o+1,2)==="!["){let a=Dn(t,"]]>",o,"CDATA is not closed.")-2,d=t.substring(o+9,a);if(n=this.saveTextToParentTag(n,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]);else{let c=this.parseTextData(d,r.tagname,s,!0,!1,!0);c==null&&(c=""),r.add(this.options.textNodeName,c)}o=a+2}else{let a=fl(t,o,this.options.removeNSPrefix),d=a.tagName,c=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1)),d!==e.tagname&&(s+=s?"."+d:d);let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,s,d)){let x="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)o=a.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)o=a.closeIndex;else{let b=this.readStopNodeData(t,d,u+1);if(!b)throw new Error(`Unexpected end of ${d}`);o=b.i,x=b.tagContent}let S=new zo(d);d!==c&&l&&(S[":@"]=this.buildAttributesMap(c,s)),x&&(x=this.parseTextData(x,d,s,!0,l,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),S.add(this.options.textNodeName,x),r.addChild(S)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),c=d):c=c.substr(0,c.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));let x=new zo(d);d!==c&&l&&(x[":@"]=this.buildAttributesMap(c,s)),s=s.substr(0,s.lastIndexOf(".")),r.addChild(x)}else{let x=new zo(d);this.tagsNodeStack.push(r),d!==c&&l&&(x[":@"]=this.buildAttributesMap(c,s)),r.addChild(x),r=x}n="",o=u}}else n+=t[o];return e.child},JA=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function ek(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function tk(t,e,r){let n="*."+r;for(let s in t){let o=t[s];if(n===o||e===o)return!0}return!1}function rk(t,e,r=">"){let n,s="";for(let o=e;o<t.length;o++){let i=t[o];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(t[o+1]===r[1])return{data:s,index:o}}else return{data:s,index:o};else i==="	"&&(i=" ");s+=i}}function Dn(t,e,r,n){let s=t.indexOf(e,r);if(s===-1)throw new Error(n);return s+e.length-1}function fl(t,e,r,n=">"){let s=rk(t,e+1,n);if(!s)return;let o=s.data,i=s.index,a=o.search(/\s/),d=o,c=!0;if(a!==-1&&(d=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),r){let l=d.indexOf(":");l!==-1&&(d=d.substr(l+1),c=d!==s.data.substr(l+1))}return{tagName:d,tagExp:o,closeIndex:i,attrExpPresent:c}}function nk(t,e,r){let n=r,s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=Dn(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(s--,s===0))return{tagContent:t.substring(n,r),i:o};r=o}else if(t[r+1]==="?")r=Dn(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=Dn(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=Dn(t,"]]>",r,"StopNode is not closed.")-2;else{let o=fl(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,r=o.closeIndex)}}function ul(t,e,r){if(e&&typeof t=="string"){let n=t.trim();return n==="true"?!0:n==="false"?!1:HA(t,r)}else return hl.isExist(t)?t:""}Rp.exports=ll});var Np=O(Tp=>{"use strict";function sk(t,e){return kp(t,e)}function kp(t,e,r){let n,s={};for(let o=0;o<t.length;o++){let i=t[o],a=ok(i),d="";if(r===void 0?d=a:d=r+"."+a,a===e.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let c=kp(i[a],e,d),l=ak(c,e);i[":@"]?ik(c,i[":@"],d,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(c)):e.isArray(a,d,l)?s[a]=[c]:s[a]=c}}}return typeof n=="string"?n.length>0&&(s[e.textNodeName]=n):n!==void 0&&(s[e.textNodeName]=n),s}function ok(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function ik(t,e,r,n){if(e){let s=Object.keys(e),o=s.length;for(let i=0;i<o;i++){let a=s[i];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function ak(t,e){let r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}Tp.prettify=sk});var Ip=O((u3,Op)=>{var{buildOptions:ck}=Ep(),dk=Ap(),{prettify:lk}=Np(),fk=al(),ml=class{constructor(e){this.externalEntities={},this.options=ck(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=fk.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new dk(this.options);n.addExternalEntities(this.externalEntities);let s=n.parseXml(e);return this.options.preserveOrder||s===void 0?s:lk(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};Op.exports=ml});var Mp=O((h3,Bp)=>{var uk=`
`;function hk(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=uk),Pp(t,e,"",r)}function Pp(t,e,r,n){let s="",o=!1;for(let i=0;i<t.length;i++){let a=t[i],d=mk(a),c="";if(r.length===0?c=d:c=`${r}.${d}`,d===e.textNodeName){let S=a[d];pk(c,e)||(S=e.tagValueProcessor(d,S),S=Dp(S,e)),o&&(s+=n),s+=S,o=!1;continue}else if(d===e.cdataPropName){o&&(s+=n),s+=`<![CDATA[${a[d][0][e.textNodeName]}]]>`,o=!1;continue}else if(d===e.commentPropName){s+=n+`<!--${a[d][0][e.textNodeName]}-->`,o=!0;continue}else if(d[0]==="?"){let S=vp(a[":@"],e),b=d==="?xml"?"":n,R=a[d][0][e.textNodeName];R=R.length!==0?" "+R:"",s+=b+`<${d}${R}${S}?>`,o=!0;continue}let l=n;l!==""&&(l+=e.indentBy);let u=vp(a[":@"],e),h=n+`<${d}${u}`,x=Pp(a[d],e,c,l);e.unpairedTags.indexOf(d)!==-1?e.suppressUnpairedNode?s+=h+">":s+=h+"/>":(!x||x.length===0)&&e.suppressEmptyNode?s+=h+"/>":x&&x.endsWith(">")?s+=h+`>${x}${n}</${d}>`:(s+=h+">",x&&n!==""&&(x.includes("/>")||x.includes("</"))?s+=n+e.indentBy+x+n:s+=x,s+=`</${d}>`),o=!0}return s}function mk(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function vp(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){let s=e.attributeValueProcessor(n,t[n]);s=Dp(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function pk(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Dp(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let n=e.entities[r];t=t.replace(n.regex,n.val)}return t}Bp.exports=hk});var Lp=O((m3,Fp)=>{"use strict";var yk=Mp(),gk={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Fr(t){this.options=Object.assign({},gk,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ck),this.processTextOrObjNode=Ek,this.options.format?(this.indentate=xk,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Fr.prototype.build=function(t){return this.options.preserveOrder?yk(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Fr.prototype.j2x=function(t,e){let r="",n="";for(let s in t)if(!(typeof t[s]>"u"))if(t[s]===null)s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)n+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){let o=this.isAttribute(s);if(o)r+=this.buildAttrPairStr(o,""+t[s]);else if(s===this.options.textNodeName){let i=this.options.tagValueProcessor(s,""+t[s]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){let o=t[s].length;for(let i=0;i<o;i++){let a=t[s][i];typeof a>"u"||(a===null?s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof a=="object"?n+=this.processTextOrObjNode(a,s,e):n+=this.buildTextValNode(a,s,"",e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){let o=Object.keys(t[s]),i=o.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(o[a],""+t[s][o[a]])}else n+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:n}};Fr.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Ek(t,e,r){let n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Fr.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),r&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+o+this.tagEndChar+t+this.indentate(n)+s}};Fr.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Fr.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}};Fr.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function xk(t){return this.options.indentBy.repeat(t)}function Ck(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}Fp.exports=Fr});var pl=O((p3,zp)=>{"use strict";var wk=al(),Sk=Ip(),bk=Lp();zp.exports={XMLParser:Sk,XMLValidator:wk,XMLBuilder:bk}});var Al={};is(Al,{__assign:()=>_l,__asyncDelegator:()=>Wk,__asyncGenerator:()=>Vk,__asyncValues:()=>Yk,__await:()=>qo,__awaiter:()=>$k,__classPrivateFieldGet:()=>Jk,__classPrivateFieldSet:()=>eT,__createBinding:()=>jk,__decorate:()=>Lk,__exportStar:()=>Kk,__extends:()=>Mk,__generator:()=>qk,__importDefault:()=>Zk,__importStar:()=>Qk,__makeTemplateObject:()=>Xk,__metadata:()=>Uk,__param:()=>zk,__read:()=>Zp,__rest:()=>Fk,__spread:()=>Gk,__spreadArrays:()=>Hk,__values:()=>Rl});function Mk(t,e){bl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Fk(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Lk(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function zk(t,e){return function(r,n){e(r,n,t)}}function Uk(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function $k(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})}function qk(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],s=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function jk(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Kk(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Rl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zp(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function Gk(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zp(arguments[e]));return t}function Hk(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function qo(t){return this instanceof qo?(this.v=t,this):new qo(t)}function Vk(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(h){n[h]&&(s[h]=function(x){return new Promise(function(S,b){o.push([h,x,S,b])>1||a(h,x)})})}function a(h,x){try{d(n[h](x))}catch(S){u(o[0][3],S)}}function d(h){h.value instanceof qo?Promise.resolve(h.value.v).then(c,l):u(o[0][2],h)}function c(h){a("next",h)}function l(h){a("throw",h)}function u(h,x){h(x),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Wk(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:qo(t[s](i)),done:s==="return"}:o?o(i):i}:o}}function Yk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Rl=="function"?Rl(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,d){i=t[o](i),s(a,d,i.done,i.value)})}}function s(o,i,a,d){Promise.resolve(d).then(function(c){o({value:c,done:a})},i)}}function Xk(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Qk(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Zk(t){return t&&t.__esModule?t:{default:t}}function Jk(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function eT(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var bl,_l,kl=pe(()=>{bl=function(t,e){return bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},bl(t,e)};_l=function(){return _l=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_l.apply(this,arguments)}});var Jp,ey,ty=pe(()=>{Jp=t=>{let e=[];for(let r=0,n=t.length;r<n;r++){let s=t.charCodeAt(r);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192,s&63|128);else if(r+1<t.length&&(s&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320){let o=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023);e.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else e.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(e)},ey=t=>{let e="";for(let r=0,n=t.length;r<n;r++){let s=t[r];if(s<128)e+=String.fromCharCode(s);else if(192<=s&&s<224){let o=t[++r];e+=String.fromCharCode((s&31)<<6|o&63)}else if(240<=s&&s<365){let i="%"+[s,t[++r],t[++r],t[++r]].map(a=>a.toString(16)).join("%");e+=decodeURIComponent(i)}else e+=String.fromCharCode((s&15)<<12|(t[++r]&63)<<6|t[++r]&63)}return e}});function ry(t){return new TextEncoder().encode(t)}function ny(t){return new TextDecoder("utf-8").decode(t)}var sy=pe(()=>{});var oy={};is(oy,{fromUtf8:()=>tT,toUtf8:()=>rT});var tT,rT,iy=pe(()=>{ty();sy();tT=t=>typeof TextEncoder=="function"?ry(t):Jp(t),rT=t=>typeof TextDecoder=="function"?ny(t):ey(t)});var ay=O(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.convertToBuffer=void 0;var nT=(iy(),as(oy)),sT=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:nT.fromUtf8;function oT(t){return t instanceof Uint8Array?t:typeof t=="string"?sT(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}sa.convertToBuffer=oT});var cy=O(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.isEmptyData=void 0;function iT(t){return typeof t=="string"?t.length===0:t.byteLength===0}oa.isEmptyData=iT});var dy=O(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.numToUint8=void 0;function aT(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}ia.numToUint8=aT});var ly=O(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.uint32ArrayFrom=void 0;function cT(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}aa.uint32ArrayFrom=cT});var jo=O(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.uint32ArrayFrom=Bt.numToUint8=Bt.isEmptyData=Bt.convertToBuffer=void 0;var dT=ay();Object.defineProperty(Bt,"convertToBuffer",{enumerable:!0,get:function(){return dT.convertToBuffer}});var lT=cy();Object.defineProperty(Bt,"isEmptyData",{enumerable:!0,get:function(){return lT.isEmptyData}});var fT=dy();Object.defineProperty(Bt,"numToUint8",{enumerable:!0,get:function(){return fT.numToUint8}});var uT=ly();Object.defineProperty(Bt,"uint32ArrayFrom",{enumerable:!0,get:function(){return uT.uint32ArrayFrom}})});var hy=O(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.AwsCrc32=void 0;var fy=(kl(),as(Al)),Tl=jo(),uy=Ko(),hT=function(){function t(){this.crc32=new uy.Crc32}return t.prototype.update=function(e){(0,Tl.isEmptyData)(e)||this.crc32.update((0,Tl.convertToBuffer)(e))},t.prototype.digest=function(){return fy.__awaiter(this,void 0,void 0,function(){return fy.__generator(this,function(e){return[2,(0,Tl.numToUint8)(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new uy.Crc32},t}();ca.AwsCrc32=hT});var Ko=O(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.AwsCrc32=Lr.Crc32=Lr.crc32=void 0;var mT=(kl(),as(Al)),pT=jo();function yT(t){return new my().update(t).digest()}Lr.crc32=yT;var my=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=mT.__values(e),o=s.next();!o.done;o=s.next()){var i=o.value;this.checksum=this.checksum>>>8^ET[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();Lr.Crc32=my;var gT=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],ET=(0,pT.uint32ArrayFrom)(gT),xT=hy();Object.defineProperty(Lr,"AwsCrc32",{enumerable:!0,get:function(){return xT.AwsCrc32}})});var vl={};is(vl,{__assign:()=>Ol,__asyncDelegator:()=>vT,__asyncGenerator:()=>IT,__asyncValues:()=>PT,__await:()=>Go,__awaiter:()=>RT,__classPrivateFieldGet:()=>FT,__classPrivateFieldSet:()=>LT,__createBinding:()=>kT,__decorate:()=>ST,__exportStar:()=>TT,__extends:()=>CT,__generator:()=>AT,__importDefault:()=>MT,__importStar:()=>BT,__makeTemplateObject:()=>DT,__metadata:()=>_T,__param:()=>bT,__read:()=>py,__rest:()=>wT,__spread:()=>NT,__spreadArrays:()=>OT,__values:()=>Il});function CT(t,e){Nl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function wT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function ST(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function bT(t,e){return function(r,n){e(r,n,t)}}function _T(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function RT(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{c(n.next(l))}catch(u){i(u)}}function d(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?o(l.value):s(l.value).then(a,d)}c((n=n.apply(t,e||[])).next())})}function AT(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],s=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function kT(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function TT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Il(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function py(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function NT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(py(arguments[e]));return t}function OT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function Go(t){return this instanceof Go?(this.v=t,this):new Go(t)}function IT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(h){n[h]&&(s[h]=function(x){return new Promise(function(S,b){o.push([h,x,S,b])>1||a(h,x)})})}function a(h,x){try{d(n[h](x))}catch(S){u(o[0][3],S)}}function d(h){h.value instanceof Go?Promise.resolve(h.value.v).then(c,l):u(o[0][2],h)}function c(h){a("next",h)}function l(h){a("throw",h)}function u(h,x){h(x),o.shift(),o.length&&a(o[0][0],o[0][1])}}function vT(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:Go(t[s](i)),done:s==="return"}:o?o(i):i}:o}}function PT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Il=="function"?Il(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,d){i=t[o](i),s(a,d,i.done,i.value)})}}function s(o,i,a,d){Promise.resolve(d).then(function(c){o({value:c,done:a})},i)}}function DT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function BT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function MT(t){return t&&t.__esModule?t:{default:t}}function FT(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function LT(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Nl,Ol,Pl=pe(()=>{Nl=function(t,e){return Nl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Nl(t,e)};Ol=function(){return Ol=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ol.apply(this,arguments)}});var Ey=O(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.AwsCrc32c=void 0;var yy=(Pl(),as(vl)),Dl=jo(),gy=Bl(),zT=function(){function t(){this.crc32c=new gy.Crc32c}return t.prototype.update=function(e){(0,Dl.isEmptyData)(e)||this.crc32c.update((0,Dl.convertToBuffer)(e))},t.prototype.digest=function(){return yy.__awaiter(this,void 0,void 0,function(){return yy.__generator(this,function(e){return[2,(0,Dl.numToUint8)(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new gy.Crc32c},t}();da.AwsCrc32c=zT});var Bl=O(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.AwsCrc32c=zr.Crc32c=zr.crc32c=void 0;var UT=(Pl(),as(vl)),$T=jo();function qT(t){return new xy().update(t).digest()}zr.crc32c=qT;var xy=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=UT.__values(e),o=s.next();!o.done;o=s.next()){var i=o.value;this.checksum=this.checksum>>>8^KT[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}();zr.Crc32c=xy;var jT=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],KT=(0,$T.uint32ArrayFrom)(jT),GT=Ey();Object.defineProperty(zr,"AwsCrc32c",{enumerable:!0,get:function(){return GT.AwsCrc32c}})});var so=O((L9,uS)=>{"use strict";var fS=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);uS.exports=t=>t?Object.keys(t).map(e=>[fS.has(e)?fS.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var Ac=O((z9,SS)=>{"use strict";var hS=typeof process=="object"&&process?process:{stdout:null,stderr:null},pv=require("events"),mS=require("stream"),yv=require("string_decoder"),pS=yv.StringDecoder,pr=Symbol("EOF"),yr=Symbol("maybeEmitEnd"),yn=Symbol("emittedEnd"),Cc=Symbol("emittingEnd"),xi=Symbol("emittedError"),wc=Symbol("closed"),yS=Symbol("read"),Sc=Symbol("flush"),gS=Symbol("flushChunk"),Ye=Symbol("encoding"),gr=Symbol("decoder"),bc=Symbol("flowing"),Ci=Symbol("paused"),oo=Symbol("resume"),he=Symbol("buffer"),Yt=Symbol("pipes"),be=Symbol("bufferLength"),nu=Symbol("bufferPush"),su=Symbol("bufferShift"),Ie=Symbol("objectMode"),me=Symbol("destroyed"),ou=Symbol("error"),iu=Symbol("emitData"),ES=Symbol("emitEnd"),au=Symbol("emitEnd2"),Er=Symbol("async"),cu=Symbol("abort"),_c=Symbol("aborted"),Vn=Symbol("signal"),wi=t=>Promise.resolve().then(t),wS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",xS=wS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),CS=wS&&Symbol.iterator||Symbol("iterator not implemented"),gv=t=>t==="end"||t==="finish"||t==="prefinish",Ev=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,xv=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Rc=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[oo](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},du=class extends Rc{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}},Si=class extends mS{constructor(e){super(),this[bc]=!1,this[Ci]=!1,this[Yt]=[],this[he]=[],this[Ie]=e&&e.objectMode||!1,this[Ie]?this[Ye]=null:this[Ye]=e&&e.encoding||null,this[Ye]==="buffer"&&(this[Ye]=null),this[Er]=e&&!!e.async||!1,this[gr]=this[Ye]?new pS(this[Ye]):null,this[pr]=!1,this[yn]=!1,this[Cc]=!1,this[wc]=!1,this[xi]=null,this.writable=!0,this.readable=!0,this[be]=0,this[me]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[he]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Yt]}),this[Vn]=e&&e.signal,this[_c]=!1,this[Vn]&&(this[Vn].addEventListener("abort",()=>this[cu]()),this[Vn].aborted&&this[cu]())}get bufferLength(){return this[be]}get encoding(){return this[Ye]}set encoding(e){if(this[Ie])throw new Error("cannot set encoding in objectMode");if(this[Ye]&&e!==this[Ye]&&(this[gr]&&this[gr].lastNeed||this[be]))throw new Error("cannot change encoding");this[Ye]!==e&&(this[gr]=e?new pS(e):null,this[he].length&&(this[he]=this[he].map(r=>this[gr].write(r)))),this[Ye]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ie]}set objectMode(e){this[Ie]=this[Ie]||!!e}get async(){return this[Er]}set async(e){this[Er]=this[Er]||!!e}[cu](){this[_c]=!0,this.emit("abort",this[Vn].reason),this.destroy(this[Vn].reason)}get aborted(){return this[_c]}set aborted(e){}write(e,r,n){if(this[_c])return!1;if(this[pr])throw new Error("write after end");if(this[me])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[Er]?wi:o=>o();return!this[Ie]&&!Buffer.isBuffer(e)&&(xv(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Ev(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ie]?(this.flowing&&this[be]!==0&&this[Sc](!0),this.flowing?this.emit("data",e):this[nu](e),this[be]!==0&&this.emit("readable"),n&&s(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[Ye]&&!this[gr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Ye]&&(e=this[gr].write(e)),this.flowing&&this[be]!==0&&this[Sc](!0),this.flowing?this.emit("data",e):this[nu](e),this[be]!==0&&this.emit("readable"),n&&s(n),this.flowing):(this[be]!==0&&this.emit("readable"),n&&s(n),this.flowing)}read(e){if(this[me])return null;if(this[be]===0||e===0||e>this[be])return this[yr](),null;this[Ie]&&(e=null),this[he].length>1&&!this[Ie]&&(this.encoding?this[he]=[this[he].join("")]:this[he]=[Buffer.concat(this[he],this[be])]);let r=this[yS](e||null,this[he][0]);return this[yr](),r}[yS](e,r){return e===r.length||e===null?this[su]():(this[he][0]=r.slice(e),r=r.slice(0,e),this[be]-=e),this.emit("data",r),!this[he].length&&!this[pr]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[pr]=!0,this.writable=!1,(this.flowing||!this[Ci])&&this[yr](),this}[oo](){this[me]||(this[Ci]=!1,this[bc]=!0,this.emit("resume"),this[he].length?this[Sc]():this[pr]?this[yr]():this.emit("drain"))}resume(){return this[oo]()}pause(){this[bc]=!1,this[Ci]=!0}get destroyed(){return this[me]}get flowing(){return this[bc]}get paused(){return this[Ci]}[nu](e){this[Ie]?this[be]+=1:this[be]+=e.length,this[he].push(e)}[su](){return this[Ie]?this[be]-=1:this[be]-=this[he][0].length,this[he].shift()}[Sc](e){do;while(this[gS](this[su]())&&this[he].length);!e&&!this[he].length&&!this[pr]&&this.emit("drain")}[gS](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[me])return;let n=this[yn];return r=r||{},e===hS.stdout||e===hS.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Yt].push(r.proxyErrors?new du(this,e,r):new Rc(this,e,r)),this[Er]?wi(()=>this[oo]()):this[oo]()),e}unpipe(e){let r=this[Yt].find(n=>n.dest===e);r&&(this[Yt].splice(this[Yt].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this[Yt].length&&!this.flowing?this[oo]():e==="readable"&&this[be]!==0?super.emit("readable"):gv(e)&&this[yn]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[xi]&&(this[Er]?wi(()=>r.call(this,this[xi])):r.call(this,this[xi])),n}get emittedEnd(){return this[yn]}[yr](){!this[Cc]&&!this[yn]&&!this[me]&&this[he].length===0&&this[pr]&&(this[Cc]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[wc]&&this.emit("close"),this[Cc]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==me&&this[me])return;if(e==="data")return!this[Ie]&&!r?!1:this[Er]?wi(()=>this[iu](r)):this[iu](r);if(e==="end")return this[ES]();if(e==="close"){if(this[wc]=!0,!this[yn]&&!this[me])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[xi]=r,super.emit(ou,r);let o=!this[Vn]||this.listeners("error").length?super.emit("error",r):!1;return this[yr](),o}else if(e==="resume"){let o=super.emit("resume");return this[yr](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let s=super.emit(e,r,...n);return this[yr](),s}[iu](e){for(let n of this[Yt])n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[yr](),r}[ES](){this[yn]||(this[yn]=!0,this.readable=!1,this[Er]?wi(()=>this[au]()):this[au]())}[au](){if(this[gr]){let r=this[gr].end();if(r){for(let n of this[Yt])n.dest.write(r);super.emit("data",r)}}for(let r of this[Yt])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ie]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Ie]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Ie]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ie]?Promise.reject(new Error("cannot concat in objectMode")):this[Ye]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(me,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[xS](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let s=this.read();if(s!==null)return Promise.resolve({done:!1,value:s});if(this[pr])return r();let o=null,i=null,a=u=>{this.removeListener("data",d),this.removeListener("end",c),this.removeListener(me,l),r(),i(u)},d=u=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(me,l),this.pause(),o({value:u,done:!!this[pr]})},c=()=>{this.removeListener("error",a),this.removeListener("data",d),this.removeListener(me,l),r(),o({done:!0})},l=()=>a(new Error("stream destroyed"));return new Promise((u,h)=>{i=h,o=u,this.once(me,l),this.once("error",a),this.once("end",c),this.once("data",d)})},throw:r,return:r,[xS](){return this}}}[CS](){let e=!1,r=()=>(this.pause(),this.removeListener(ou,r),this.removeListener(me,r),this.removeListener("end",r),e=!0,{done:!0}),n=()=>{if(e)return r();let s=this.read();return s===null?r():{value:s}};return this.once("end",r),this.once(ou,r),this.once(me,r),{next:n,throw:r,return:r,[CS](){return this}}}destroy(e){return this[me]?(e?this.emit("error",e):this.emit(me),this):(this[me]=!0,this[he].length=0,this[be]=0,typeof this.close=="function"&&!this[wc]&&this.close(),e?this.emit("error",e):this.emit(me),this)}static isStream(e){return!!e&&(e instanceof Si||e instanceof mS||e instanceof pv&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};SS.exports=Si});var _S=O((U9,bS)=>{var Cv=require("zlib").constants||{ZLIB_VERNUM:4736};bS.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Cv))});var pu=O(($9,PS)=>{"use strict";var RS=typeof process=="object"&&process?process:{stdout:null,stderr:null},wv=require("events"),AS=require("stream"),kS=require("string_decoder").StringDecoder,xr=Symbol("EOF"),Cr=Symbol("maybeEmitEnd"),gn=Symbol("emittedEnd"),kc=Symbol("emittingEnd"),bi=Symbol("emittedError"),Tc=Symbol("closed"),TS=Symbol("read"),Nc=Symbol("flush"),NS=Symbol("flushChunk"),Xe=Symbol("encoding"),wr=Symbol("decoder"),Oc=Symbol("flowing"),_i=Symbol("paused"),io=Symbol("resume"),_e=Symbol("bufferLength"),lu=Symbol("bufferPush"),fu=Symbol("bufferShift"),Me=Symbol("objectMode"),Fe=Symbol("destroyed"),uu=Symbol("emitData"),OS=Symbol("emitEnd"),hu=Symbol("emitEnd2"),Sr=Symbol("async"),Ri=t=>Promise.resolve().then(t),IS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Sv=IS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),bv=IS&&Symbol.iterator||Symbol("iterator not implemented"),_v=t=>t==="end"||t==="finish"||t==="prefinish",Rv=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Av=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Ic=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[io](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},mu=class extends Ic{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}};PS.exports=class vS extends AS{constructor(e){super(),this[Oc]=!1,this[_i]=!1,this.pipes=[],this.buffer=[],this[Me]=e&&e.objectMode||!1,this[Me]?this[Xe]=null:this[Xe]=e&&e.encoding||null,this[Xe]==="buffer"&&(this[Xe]=null),this[Sr]=e&&!!e.async||!1,this[wr]=this[Xe]?new kS(this[Xe]):null,this[xr]=!1,this[gn]=!1,this[kc]=!1,this[Tc]=!1,this[bi]=null,this.writable=!0,this.readable=!0,this[_e]=0,this[Fe]=!1}get bufferLength(){return this[_e]}get encoding(){return this[Xe]}set encoding(e){if(this[Me])throw new Error("cannot set encoding in objectMode");if(this[Xe]&&e!==this[Xe]&&(this[wr]&&this[wr].lastNeed||this[_e]))throw new Error("cannot change encoding");this[Xe]!==e&&(this[wr]=e?new kS(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[wr].write(r)))),this[Xe]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Me]}set objectMode(e){this[Me]=this[Me]||!!e}get async(){return this[Sr]}set async(e){this[Sr]=this[Sr]||!!e}write(e,r,n){if(this[xr])throw new Error("write after end");if(this[Fe])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let s=this[Sr]?Ri:o=>o();return!this[Me]&&!Buffer.isBuffer(e)&&(Av(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Rv(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Me]?(this.flowing&&this[_e]!==0&&this[Nc](!0),this.flowing?this.emit("data",e):this[lu](e),this[_e]!==0&&this.emit("readable"),n&&s(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[Xe]&&!this[wr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Xe]&&(e=this[wr].write(e)),this.flowing&&this[_e]!==0&&this[Nc](!0),this.flowing?this.emit("data",e):this[lu](e),this[_e]!==0&&this.emit("readable"),n&&s(n),this.flowing):(this[_e]!==0&&this.emit("readable"),n&&s(n),this.flowing)}read(e){if(this[Fe])return null;if(this[_e]===0||e===0||e>this[_e])return this[Cr](),null;this[Me]&&(e=null),this.buffer.length>1&&!this[Me]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[_e])]);let r=this[TS](e||null,this.buffer[0]);return this[Cr](),r}[TS](e,r){return e===r.length||e===null?this[fu]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[_e]-=e),this.emit("data",r),!this.buffer.length&&!this[xr]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[xr]=!0,this.writable=!1,(this.flowing||!this[_i])&&this[Cr](),this}[io](){this[Fe]||(this[_i]=!1,this[Oc]=!0,this.emit("resume"),this.buffer.length?this[Nc]():this[xr]?this[Cr]():this.emit("drain"))}resume(){return this[io]()}pause(){this[Oc]=!1,this[_i]=!0}get destroyed(){return this[Fe]}get flowing(){return this[Oc]}get paused(){return this[_i]}[lu](e){this[Me]?this[_e]+=1:this[_e]+=e.length,this.buffer.push(e)}[fu](){return this.buffer.length&&(this[Me]?this[_e]-=1:this[_e]-=this.buffer[0].length),this.buffer.shift()}[Nc](e){do;while(this[NS](this[fu]()));!e&&!this.buffer.length&&!this[xr]&&this.emit("drain")}[NS](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Fe])return;let n=this[gn];return r=r||{},e===RS.stdout||e===RS.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this.pipes.push(r.proxyErrors?new mu(this,e,r):new Ic(this,e,r)),this[Sr]?Ri(()=>this[io]()):this[io]()),e}unpipe(e){let r=this.pipes.find(n=>n.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[io]():e==="readable"&&this[_e]!==0?super.emit("readable"):_v(e)&&this[gn]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[bi]&&(this[Sr]?Ri(()=>r.call(this,this[bi])):r.call(this,this[bi])),n}get emittedEnd(){return this[gn]}[Cr](){!this[kc]&&!this[gn]&&!this[Fe]&&this.buffer.length===0&&this[xr]&&(this[kc]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Tc]&&this.emit("close"),this[kc]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==Fe&&this[Fe])return;if(e==="data")return r?this[Sr]?Ri(()=>this[uu](r)):this[uu](r):!1;if(e==="end")return this[OS]();if(e==="close"){if(this[Tc]=!0,!this[gn]&&!this[Fe])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[bi]=r;let o=super.emit("error",r);return this[Cr](),o}else if(e==="resume"){let o=super.emit("resume");return this[Cr](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let s=super.emit(e,r,...n);return this[Cr](),s}[uu](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Cr](),r}[OS](){this[gn]||(this[gn]=!0,this.readable=!1,this[Sr]?Ri(()=>this[hu]()):this[hu]())}[hu](){if(this[wr]){let r=this[wr].end();if(r){for(let n of this.pipes)n.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Me]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Me]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Me]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Me]?Promise.reject(new Error("cannot concat in objectMode")):this[Xe]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Fe,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Sv](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[xr])return Promise.resolve({done:!0});let n=null,s=null,o=c=>{this.removeListener("data",i),this.removeListener("end",a),s(c)},i=c=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:c,done:!!this[xr]})},a=()=>{this.removeListener("error",o),this.removeListener("data",i),n({done:!0})},d=()=>o(new Error("stream destroyed"));return new Promise((c,l)=>{s=l,n=c,this.once(Fe,d),this.once("error",o),this.once("end",a),this.once("data",i)})}}}[bv](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Fe]?(e?this.emit("error",e):this.emit(Fe),this):(this[Fe]=!0,this.buffer.length=0,this[_e]=0,typeof this.close=="function"&&!this[Tc]&&this.close(),e?this.emit("error",e):this.emit(Fe),this)}static isStream(e){return!!e&&(e instanceof vS||e instanceof AS||e instanceof wv&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Iu=O(et=>{"use strict";var Cu=require("assert"),En=require("buffer").Buffer,MS=require("zlib"),Wn=et.constants=_S(),kv=pu(),DS=En.concat,Yn=Symbol("_superWrite"),co=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Tv=Symbol("opts"),Ai=Symbol("flushFlag"),BS=Symbol("finishFlushFlag"),Ou=Symbol("fullFlushFlag"),oe=Symbol("handle"),vc=Symbol("onError"),ao=Symbol("sawError"),yu=Symbol("level"),gu=Symbol("strategy"),Eu=Symbol("ended"),q9=Symbol("_defaultFullFlush"),Pc=class extends kv{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[ao]=!1,this[Eu]=!1,this[Tv]=e,this[Ai]=e.flush,this[BS]=e.finishFlush;try{this[oe]=new MS[r](e)}catch(n){throw new co(n)}this[vc]=n=>{this[ao]||(this[ao]=!0,this.close(),this.emit("error",n))},this[oe].on("error",n=>this[vc](new co(n))),this.once("end",()=>this.close)}close(){this[oe]&&(this[oe].close(),this[oe]=null,this.emit("close"))}reset(){if(!this[ao])return Cu(this[oe],"zlib binding closed"),this[oe].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Ou]),this.write(Object.assign(En.alloc(0),{[Ai]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[BS]),this[Eu]=!0,super.end(null,null,n)}get ended(){return this[Eu]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=En.from(e,r)),this[ao])return;Cu(this[oe],"zlib binding closed");let s=this[oe]._handle,o=s.close;s.close=()=>{};let i=this[oe].close;this[oe].close=()=>{},En.concat=c=>c;let a;try{let c=typeof e[Ai]=="number"?e[Ai]:this[Ai];a=this[oe]._processChunk(e,c),En.concat=DS}catch(c){En.concat=DS,this[vc](new co(c))}finally{this[oe]&&(this[oe]._handle=s,s.close=o,this[oe].close=i,this[oe].removeAllListeners("error"))}this[oe]&&this[oe].on("error",c=>this[vc](new co(c)));let d;if(a)if(Array.isArray(a)&&a.length>0){d=this[Yn](En.from(a[0]));for(let c=1;c<a.length;c++)d=this[Yn](a[c])}else d=this[Yn](En.from(a));return n&&n(),d}[Yn](e){return super.write(e)}},br=class extends Pc{constructor(e,r){e=e||{},e.flush=e.flush||Wn.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Wn.Z_FINISH,super(e,r),this[Ou]=Wn.Z_FULL_FLUSH,this[yu]=e.level,this[gu]=e.strategy}params(e,r){if(!this[ao]){if(!this[oe])throw new Error("cannot switch params when binding is closed");if(!this[oe].params)throw new Error("not supported in this implementation");if(this[yu]!==e||this[gu]!==r){this.flush(Wn.Z_SYNC_FLUSH),Cu(this[oe],"zlib binding closed");let n=this[oe].flush;this[oe].flush=(s,o)=>{this.flush(s),o()};try{this[oe].params(e,r)}finally{this[oe].flush=n}this[oe]&&(this[yu]=e,this[gu]=r)}}}},wu=class extends br{constructor(e){super(e,"Deflate")}},Su=class extends br{constructor(e){super(e,"Inflate")}},xu=Symbol("_portable"),bu=class extends br{constructor(e){super(e,"Gzip"),this[xu]=e&&!!e.portable}[Yn](e){return this[xu]?(this[xu]=!1,e[9]=255,super[Yn](e)):super[Yn](e)}},_u=class extends br{constructor(e){super(e,"Gunzip")}},Ru=class extends br{constructor(e){super(e,"DeflateRaw")}},Au=class extends br{constructor(e){super(e,"InflateRaw")}},ku=class extends br{constructor(e){super(e,"Unzip")}},Dc=class extends Pc{constructor(e,r){e=e||{},e.flush=e.flush||Wn.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Wn.BROTLI_OPERATION_FINISH,super(e,r),this[Ou]=Wn.BROTLI_OPERATION_FLUSH}},Tu=class extends Dc{constructor(e){super(e,"BrotliCompress")}},Nu=class extends Dc{constructor(e){super(e,"BrotliDecompress")}};et.Deflate=wu;et.Inflate=Su;et.Gzip=bu;et.Gunzip=_u;et.DeflateRaw=Ru;et.InflateRaw=Au;et.Unzip=ku;typeof MS.BrotliCompress=="function"?(et.BrotliCompress=Tu,et.BrotliDecompress=Nu):et.BrotliCompress=et.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var lo=O((G9,FS)=>{var Nv=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;FS.exports=Nv!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var Bc=O((V9,LS)=>{"use strict";var Ov=Ac(),vu=lo(),Pu=Symbol("slurp");LS.exports=class extends Ov{constructor(e,r,n){switch(super(),this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=vu(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=vu(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Pu](r),n&&this[Pu](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,s=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,s-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Pu](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?vu(e[n]):e[n])}}});var Du=O(Mc=>{"use strict";Mc.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Mc.code=new Map(Array.from(Mc.name).map(t=>[t[1],t[0]]))});var qS=O((Y9,$S)=>{"use strict";var Iv=(t,e)=>{if(Number.isSafeInteger(t))t<0?Pv(t,e):vv(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},vv=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},Pv=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var s=t&255;t=Math.floor(t/256),r?e[n-1]=zS(s):s===0?e[n-1]=0:(r=!0,e[n-1]=US(s))}},Dv=t=>{let e=t[0],r=e===128?Mv(t.slice(1,t.length)):e===255?Bv(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},Bv=t=>{for(var e=t.length,r=0,n=!1,s=e-1;s>-1;s--){var o=t[s],i;n?i=zS(o):o===0?i=o:(n=!0,i=US(o)),i!==0&&(r-=i*Math.pow(256,e-s-1))}return r},Mv=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var s=t[n];s!==0&&(r+=s*Math.pow(256,e-n-1))}return r},zS=t=>(255^t)&255,US=t=>(255^t)+1&255;$S.exports={encode:Iv,parse:Dv}});var uo=O((X9,KS)=>{"use strict";var Bu=Du(),fo=require("path").posix,jS=qS(),Mu=Symbol("slurp"),tt=Symbol("type"),zu=class{constructor(e,r,n,s){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[tt]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,s):e&&this.set(e)}decode(e,r,n,s){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=Xn(e,r,100),this.mode=xn(e,r+100,8),this.uid=xn(e,r+108,8),this.gid=xn(e,r+116,8),this.size=xn(e,r+124,12),this.mtime=Fu(e,r+136,12),this.cksum=xn(e,r+148,12),this[Mu](n),this[Mu](s,!0),this[tt]=Xn(e,r+156,1),this[tt]===""&&(this[tt]="0"),this[tt]==="0"&&this.path.slice(-1)==="/"&&(this[tt]="5"),this[tt]==="5"&&(this.size=0),this.linkpath=Xn(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=Xn(e,r+265,32),this.gname=Xn(e,r+297,32),this.devmaj=xn(e,r+329,8),this.devmin=xn(e,r+337,8),e[r+475]!==0){let i=Xn(e,r+345,155);this.path=i+"/"+this.path}else{let i=Xn(e,r+345,130);i&&(this.path=i+"/"+this.path),this.atime=Fu(e,r+476,12),this.ctime=Fu(e,r+488,12)}let o=8*32;for(let i=r;i<r+148;i++)o+=e[i];for(let i=r+156;i<r+512;i++)o+=e[i];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[Mu](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,s=Fv(this.path||"",n),o=s[0],i=s[1];this.needPax=s[2],this.needPax=Qn(e,r,100,o)||this.needPax,this.needPax=Cn(e,r+100,8,this.mode)||this.needPax,this.needPax=Cn(e,r+108,8,this.uid)||this.needPax,this.needPax=Cn(e,r+116,8,this.gid)||this.needPax,this.needPax=Cn(e,r+124,12,this.size)||this.needPax,this.needPax=Lu(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[tt].charCodeAt(0),this.needPax=Qn(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=Qn(e,r+265,32,this.uname)||this.needPax,this.needPax=Qn(e,r+297,32,this.gname)||this.needPax,this.needPax=Cn(e,r+329,8,this.devmaj)||this.needPax,this.needPax=Cn(e,r+337,8,this.devmin)||this.needPax,this.needPax=Qn(e,r+345,n,i)||this.needPax,e[r+475]!==0?this.needPax=Qn(e,r+345,155,i)||this.needPax:(this.needPax=Qn(e,r+345,130,i)||this.needPax,this.needPax=Lu(e,r+476,12,this.atime)||this.needPax,this.needPax=Lu(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let d=r;d<r+148;d++)a+=e[d];for(let d=r+156;d<r+512;d++)a+=e[d];return this.cksum=a,Cn(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Bu.name.get(this[tt])||this[tt]}get typeKey(){return this[tt]}set type(e){Bu.code.has(e)?this[tt]=Bu.code.get(e):this[tt]=e}},Fv=(t,e)=>{let n=t,s="",o,i=fo.parse(t).root||".";if(Buffer.byteLength(n)<100)o=[n,s,!1];else{s=fo.dirname(n),n=fo.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(s)<=e?o=[n,s,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(s)<=e?o=[n.slice(0,100-1),s,!0]:(n=fo.join(fo.basename(s),n),s=fo.dirname(s));while(s!==i&&!o);o||(o=[t.slice(0,100-1),"",!0])}return o},Xn=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Fu=(t,e,r)=>Lv(xn(t,e,r)),Lv=t=>t===null?null:new Date(t*1e3),xn=(t,e,r)=>t[e]&128?jS.parse(t.slice(e,e+r)):Uv(t,e,r),zv=t=>isNaN(t)?null:t,Uv=(t,e,r)=>zv(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),$v={12:8589934591,8:2097151},Cn=(t,e,r,n)=>n===null?!1:n>$v[r]||n<0?(jS.encode(n,t.slice(e,e+r)),!0):(qv(t,e,r,n),!1),qv=(t,e,r,n)=>t.write(jv(n,r),e,r,"ascii"),jv=(t,e)=>Kv(Math.floor(t).toString(8),e),Kv=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Lu=(t,e,r,n)=>n===null?!1:Cn(t,e,r,n.getTime()/1e3),Gv=new Array(156).join("\0"),Qn=(t,e,r,n)=>n===null?!1:(t.write(n+Gv,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);KS.exports=zu});var Fc=O((Q9,GS)=>{"use strict";var Hv=uo(),Vv=require("path"),ki=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),s=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)s[o]=0;new Hv({path:("PaxHeader/"+Vv.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(s),s.write(e,512,r,"utf8");for(let o=r+512;o<s.length;o++)s[o]=0;return s}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,s=Buffer.byteLength(n),o=Math.floor(Math.log(s)/Math.log(10))+1;return s+o>=Math.pow(10,o)&&(o+=1),o+s+n}};ki.parse=(t,e,r)=>new ki(Wv(Yv(t),e),r);var Wv=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,Yv=t=>t.replace(/\n$/,"").split(`
`).reduce(Xv,Object.create(null)),Xv=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let n=e.split("="),s=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!s)return t;let o=n.join("=");return t[s]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(s)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};GS.exports=ki});var ho=O((Z9,HS)=>{HS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var Lc=O((J9,VS)=>{"use strict";VS.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var $u=O((tY,WS)=>{"use strict";var zc=["|","<",">","?",":"],Uu=zc.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Qv=new Map(zc.map((t,e)=>[t,Uu[e]])),Zv=new Map(Uu.map((t,e)=>[t,zc[e]]));WS.exports={encode:t=>zc.reduce((e,r)=>e.split(r).join(Qv.get(r)),t),decode:t=>Uu.reduce((e,r)=>e.split(r).join(Zv.get(r)),t)}});var qu=O((rY,XS)=>{var{isAbsolute:Jv,parse:YS}=require("path").win32;XS.exports=t=>{let e="",r=YS(t);for(;Jv(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(n.length),e+=n,r=YS(t)}return[e,t]}});var ZS=O((nY,QS)=>{"use strict";QS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Zu=O((iY,ub)=>{"use strict";var ob=Ac(),ib=Fc(),ab=uo(),Qt=require("fs"),JS=require("path"),Xt=lo(),eP=ho(),cb=(t,e)=>e?(t=Xt(t).replace(/^\.(\/|$)/,""),eP(e)+"/"+t):Xt(t),tP=16*1024*1024,eb=Symbol("process"),tb=Symbol("file"),rb=Symbol("directory"),Ku=Symbol("symlink"),nb=Symbol("hardlink"),Ti=Symbol("header"),Uc=Symbol("read"),Gu=Symbol("lstat"),$c=Symbol("onlstat"),Hu=Symbol("onread"),Vu=Symbol("onreadlink"),Wu=Symbol("openfile"),Yu=Symbol("onopenfile"),wn=Symbol("close"),qc=Symbol("mode"),Xu=Symbol("awaitDrain"),ju=Symbol("ondrain"),Zt=Symbol("prefix"),sb=Symbol("hadError"),db=Lc(),rP=$u(),lb=qu(),fb=ZS(),jc=db(class extends ob{constructor(e,r){if(r=r||{},super(r),typeof e!="string")throw new TypeError("path is required");this.path=Xt(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||tP,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Xt(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Xt(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[s,o]=lb(this.path);s&&(this.path=o,n=s)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=rP.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Xt(r.absolute||JS.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[$c](this.statCache.get(this.absolute)):this[Gu]()}emit(e,...r){return e==="error"&&(this[sb]=!0),super.emit(e,...r)}[Gu](){Qt.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[$c](r)})}[$c](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=sP(e),this.emit("stat",e),this[eb]()}[eb](){switch(this.type){case"File":return this[tb]();case"Directory":return this[rb]();case"SymbolicLink":return this[Ku]();default:return this.end()}}[qc](e){return fb(e,this.type==="Directory",this.portable)}[Zt](e){return cb(e,this.prefix)}[Ti](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new ab({path:this[Zt](this.path),linkpath:this.type==="Link"?this[Zt](this.linkpath):this.linkpath,mode:this[qc](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new ib({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Zt](this.path),linkpath:this.type==="Link"?this[Zt](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[rb](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Ti](),this.end()}[Ku](){Qt.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Vu](r)})}[Vu](e){this.linkpath=Xt(e),this[Ti](),this.end()}[nb](e){this.type="Link",this.linkpath=Xt(JS.relative(this.cwd,e)),this.stat.size=0,this[Ti](),this.end()}[tb](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[nb](r)}this.linkCache.set(e,this.absolute)}if(this[Ti](),this.stat.size===0)return this.end();this[Wu]()}[Wu](){Qt.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[Yu](r)})}[Yu](e){if(this.fd=e,this[sb])return this[wn]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Uc]()}[Uc](){let{fd:e,buf:r,offset:n,length:s,pos:o}=this;Qt.read(e,r,n,s,o,(i,a)=>{if(i)return this[wn](()=>this.emit("error",i));this[Hu](a)})}[wn](e){Qt.close(this.fd,e)}[Hu](e){if(e<=0&&this.remain>0){let s=new Error("encountered unexpected EOF");return s.path=this.absolute,s.syscall="read",s.code="EOF",this[wn](()=>this.emit("error",s))}if(e>this.remain){let s=new Error("did not encounter expected EOF");return s.path=this.absolute,s.syscall="read",s.code="EOF",this[wn](()=>this.emit("error",s))}if(e===this.remain)for(let s=e;s<this.length&&e<this.blockRemain;s++)this.buf[s+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[ju]():this[Xu](()=>this[ju]())}[Xu](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[ju](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[wn](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Uc]()}}),Qu=class extends jc{[Gu](){this[$c](Qt.lstatSync(this.absolute))}[Ku](){this[Vu](Qt.readlinkSync(this.absolute))}[Wu](){this[Yu](Qt.openSync(this.absolute,"r"))}[Uc](){let e=!0;try{let{fd:r,buf:n,offset:s,length:o,pos:i}=this,a=Qt.readSync(r,n,s,o,i);this[Hu](a),e=!1}finally{if(e)try{this[wn](()=>{})}catch{}}}[Xu](e){e()}[wn](e){Qt.closeSync(this.fd),e()}},nP=db(class extends ob{constructor(e,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Xt(e.path),this.mode=this[qc](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Xt(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[s,o]=lb(this.path);s&&(this.path=o,n=s)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new ab({path:this[Zt](this.path),linkpath:this.type==="Link"?this[Zt](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new ib({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Zt](this.path),linkpath:this.type==="Link"?this[Zt](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Zt](e){return cb(e,this.prefix)}[qc](e){return fb(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});jc.Sync=Qu;jc.Tar=nP;var sP=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";ub.exports=jc});var mb=O((aY,hb)=>{"use strict";hb.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Ju=O((cY,pb)=>{"use strict";pb.exports=Y;Y.Node=Zn;Y.create=Y;function Y(t){var e=this;if(e instanceof Y||(e=new Y),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Y.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Y.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Y.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Y.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)iP(this,arguments[t]);return this.length};Y.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)aP(this,arguments[t]);return this.length};Y.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Y.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Y.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Y.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Y.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Y.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Y.prototype.map=function(t,e){e=e||this;for(var r=new Y,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Y.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Y,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Y.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=t(r,n.value,s),n=n.next;return r};Y.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=t(r,n.value,s),n=n.prev;return r};Y.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Y.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Y.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Y;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)r.push(s.value);return r};Y.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Y;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>t;n--,s=s.prev)r.push(s.value);return r};Y.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(var o=[],n=0;s&&n<e;n++)o.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=oP(this,s,r[n]);return o};Y.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function oP(t,e,r){var n=e===t.head?new Zn(r,null,e,t):new Zn(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function iP(t,e){t.tail=new Zn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function aP(t,e){t.head=new Zn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Zn(t,e,r,n){if(!(this instanceof Zn))return new Zn(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{mb()(Y)}catch{}});var Zc=O((lY,Sb)=>{"use strict";var Xc=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},cP=Ac(),dP=Iu(),lP=Bc(),ch=Zu(),fP=ch.Sync,uP=ch.Tar,hP=Ju(),yb=Buffer.alloc(1024),Hc=Symbol("onStat"),Kc=Symbol("ended"),Jt=Symbol("queue"),mo=Symbol("current"),Jn=Symbol("process"),Gc=Symbol("processing"),gb=Symbol("processJob"),er=Symbol("jobs"),eh=Symbol("jobDone"),Vc=Symbol("addFSEntry"),Eb=Symbol("addTarEntry"),sh=Symbol("stat"),oh=Symbol("readdir"),Wc=Symbol("onreaddir"),Yc=Symbol("pipe"),xb=Symbol("entry"),th=Symbol("entryOpt"),ih=Symbol("writeEntryClass"),wb=Symbol("write"),rh=Symbol("ondrain"),Qc=require("fs"),Cb=require("path"),mP=Lc(),nh=lo(),dh=mP(class extends cP{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=nh(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[ih]=ch,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new dP.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[rh]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[rh]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Jt]=new hP,this[er]=0,this.jobs=+e.jobs||4,this[Gc]=!1,this[Kc]=!1}[wb](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Kc]=!0,this[Jn](),this}write(e){if(this[Kc])throw new Error("write after end");return e instanceof lP?this[Eb](e):this[Vc](e),this.flowing}[Eb](e){let r=nh(Cb.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Xc(e.path,r,!1);n.entry=new uP(e,this[th](n)),n.entry.on("end",s=>this[eh](n)),this[er]+=1,this[Jt].push(n)}this[Jn]()}[Vc](e){let r=nh(Cb.resolve(this.cwd,e));this[Jt].push(new Xc(e,r)),this[Jn]()}[sh](e){e.pending=!0,this[er]+=1;let r=this.follow?"stat":"lstat";Qc[r](e.absolute,(n,s)=>{e.pending=!1,this[er]-=1,n?this.emit("error",n):this[Hc](e,s)})}[Hc](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[Jn]()}[oh](e){e.pending=!0,this[er]+=1,Qc.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[er]-=1,r)return this.emit("error",r);this[Wc](e,n)})}[Wc](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[Jn]()}[Jn](){if(!this[Gc]){this[Gc]=!0;for(let e=this[Jt].head;e!==null&&this[er]<this.jobs;e=e.next)if(this[gb](e.value),e.value.ignore){let r=e.next;this[Jt].removeNode(e),e.next=r}this[Gc]=!1,this[Kc]&&!this[Jt].length&&this[er]===0&&(this.zip?this.zip.end(yb):(super.write(yb),super.end()))}}get[mo](){return this[Jt]&&this[Jt].head&&this[Jt].head.value}[eh](e){this[Jt].shift(),this[er]-=1,this[Jn]()}[gb](e){if(!e.pending){if(e.entry){e===this[mo]&&!e.piped&&this[Yc](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Hc](e,this.statCache.get(e.absolute)):this[sh](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Wc](e,this.readdirCache.get(e.absolute)):this[oh](e),!e.readdir))){if(e.entry=this[xb](e),!e.entry){e.ignore=!0;return}e===this[mo]&&!e.piped&&this[Yc](e)}}}[th](e){return{onwarn:(r,n,s)=>this.warn(r,n,s),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[xb](e){this[er]+=1;try{return new this[ih](e.path,this[th](e)).on("end",()=>this[eh](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[rh](){this[mo]&&this[mo].entry&&this[mo].entry.resume()}[Yc](e){e.piped=!0,e.readdir&&e.readdir.forEach(s=>{let o=e.path,i=o==="./"?"":o.replace(/\/*$/,"/");this[Vc](i+s)});let r=e.entry,n=this.zip;n?r.on("data",s=>{n.write(s)||r.pause()}):r.on("data",s=>{super.write(s)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),ah=class extends dh{constructor(e){super(e),this[ih]=fP}pause(){}resume(){}[sh](e){let r=this.follow?"statSync":"lstatSync";this[Hc](e,Qc[r](e.absolute))}[oh](e,r){this[Wc](e,Qc.readdirSync(e.absolute))}[Yc](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(s=>{let o=e.path,i=o==="./"?"":o.replace(/\/*$/,"/");this[Vc](i+s)}),n?r.on("data",s=>{n.write(s)}):r.on("data",s=>{super[wb](s)})}};dh.Sync=ah;Sb.exports=dh});var So=O(Oi=>{"use strict";var pP=pu(),yP=require("events").EventEmitter,Qe=require("fs"),uh=Qe.writev;if(!uh){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;uh=(r,n,s,o)=>{let i=(d,c)=>o(d,c,n),a=new e;a.oncomplete=i,t.writeBuffers(r,n,s,a)}}var Co=Symbol("_autoClose"),kt=Symbol("_close"),Ni=Symbol("_ended"),ne=Symbol("_fd"),bb=Symbol("_finished"),bn=Symbol("_flags"),lh=Symbol("_flush"),hh=Symbol("_handleChunk"),mh=Symbol("_makeBuf"),nd=Symbol("_mode"),Jc=Symbol("_needDrain"),Eo=Symbol("_onerror"),wo=Symbol("_onopen"),fh=Symbol("_onread"),yo=Symbol("_onwrite"),_n=Symbol("_open"),_r=Symbol("_path"),es=Symbol("_pos"),tr=Symbol("_queue"),go=Symbol("_read"),_b=Symbol("_readSize"),Sn=Symbol("_reading"),ed=Symbol("_remain"),Rb=Symbol("_size"),td=Symbol("_write"),po=Symbol("_writing"),rd=Symbol("_defaultFlag"),xo=Symbol("_errored"),sd=class extends pP{constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[xo]=!1,this[ne]=typeof r.fd=="number"?r.fd:null,this[_r]=e,this[_b]=r.readSize||16*1024*1024,this[Sn]=!1,this[Rb]=typeof r.size=="number"?r.size:1/0,this[ed]=this[Rb],this[Co]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[ne]=="number"?this[go]():this[_n]()}get fd(){return this[ne]}get path(){return this[_r]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[_n](){Qe.open(this[_r],"r",(e,r)=>this[wo](e,r))}[wo](e,r){e?this[Eo](e):(this[ne]=r,this.emit("open",r),this[go]())}[mh](){return Buffer.allocUnsafe(Math.min(this[_b],this[ed]))}[go](){if(!this[Sn]){this[Sn]=!0;let e=this[mh]();if(e.length===0)return process.nextTick(()=>this[fh](null,0,e));Qe.read(this[ne],e,0,e.length,null,(r,n,s)=>this[fh](r,n,s))}}[fh](e,r,n){this[Sn]=!1,e?this[Eo](e):this[hh](r,n)&&this[go]()}[kt](){if(this[Co]&&typeof this[ne]=="number"){let e=this[ne];this[ne]=null,Qe.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Eo](e){this[Sn]=!0,this[kt](),this.emit("error",e)}[hh](e,r){let n=!1;return this[ed]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[ed]<=0)&&(n=!1,this[kt](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[ne]=="number"&&this[go]();break;case"error":return this[xo]?void 0:(this[xo]=!0,super.emit(e,r));default:return super.emit(e,r)}}},ph=class extends sd{[_n](){let e=!0;try{this[wo](null,Qe.openSync(this[_r],"r")),e=!1}finally{e&&this[kt]()}}[go](){let e=!0;try{if(!this[Sn]){this[Sn]=!0;do{let r=this[mh](),n=r.length===0?0:Qe.readSync(this[ne],r,0,r.length,null);if(!this[hh](n,r))break}while(!0);this[Sn]=!1}e=!1}finally{e&&this[kt]()}}[kt](){if(this[Co]&&typeof this[ne]=="number"){let e=this[ne];this[ne]=null,Qe.closeSync(e),this.emit("close")}}},od=class extends yP{constructor(e,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[xo]=!1,this[po]=!1,this[Ni]=!1,this[Jc]=!1,this[tr]=[],this[_r]=e,this[ne]=typeof r.fd=="number"?r.fd:null,this[nd]=r.mode===void 0?438:r.mode,this[es]=typeof r.start=="number"?r.start:null,this[Co]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[es]!==null?"r+":"w";this[rd]=r.flags===void 0,this[bn]=this[rd]?n:r.flags,this[ne]===null&&this[_n]()}emit(e,r){if(e==="error"){if(this[xo])return;this[xo]=!0}return super.emit(e,r)}get fd(){return this[ne]}get path(){return this[_r]}[Eo](e){this[kt](),this[po]=!0,this.emit("error",e)}[_n](){Qe.open(this[_r],this[bn],this[nd],(e,r)=>this[wo](e,r))}[wo](e,r){this[rd]&&this[bn]==="r+"&&e&&e.code==="ENOENT"?(this[bn]="w",this[_n]()):e?this[Eo](e):(this[ne]=r,this.emit("open",r),this[lh]())}end(e,r){return e&&this.write(e,r),this[Ni]=!0,!this[po]&&!this[tr].length&&typeof this[ne]=="number"&&this[yo](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Ni]?(this.emit("error",new Error("write() after end()")),!1):this[ne]===null||this[po]||this[tr].length?(this[tr].push(e),this[Jc]=!0,!1):(this[po]=!0,this[td](e),!0)}[td](e){Qe.write(this[ne],e,0,e.length,this[es],(r,n)=>this[yo](r,n))}[yo](e,r){e?this[Eo](e):(this[es]!==null&&(this[es]+=r),this[tr].length?this[lh]():(this[po]=!1,this[Ni]&&!this[bb]?(this[bb]=!0,this[kt](),this.emit("finish")):this[Jc]&&(this[Jc]=!1,this.emit("drain"))))}[lh](){if(this[tr].length===0)this[Ni]&&this[yo](null,0);else if(this[tr].length===1)this[td](this[tr].pop());else{let e=this[tr];this[tr]=[],uh(this[ne],e,this[es],(r,n)=>this[yo](r,n))}}[kt](){if(this[Co]&&typeof this[ne]=="number"){let e=this[ne];this[ne]=null,Qe.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},yh=class extends od{[_n](){let e;if(this[rd]&&this[bn]==="r+")try{e=Qe.openSync(this[_r],this[bn],this[nd])}catch(r){if(r.code==="ENOENT")return this[bn]="w",this[_n]();throw r}else e=Qe.openSync(this[_r],this[bn],this[nd]);this[wo](null,e)}[kt](){if(this[Co]&&typeof this[ne]=="number"){let e=this[ne];this[ne]=null,Qe.closeSync(e),this.emit("close")}}[td](e){let r=!0;try{this[yo](null,Qe.writeSync(this[ne],e,0,e.length,this[es])),r=!1}finally{if(r)try{this[kt]()}catch{}}}};Oi.ReadStream=sd;Oi.ReadStreamSync=ph;Oi.WriteStream=od;Oi.WriteStreamSync=yh});var ud=O((hY,Pb)=>{"use strict";var gP=Lc(),EP=uo(),xP=require("events"),CP=Ju(),wP=1024*1024,SP=Bc(),Ab=Fc(),bP=Iu(),{nextTick:_P}=require("process"),gh=Buffer.from([31,139]),gt=Symbol("state"),ts=Symbol("writeEntry"),Rr=Symbol("readEntry"),Eh=Symbol("nextEntry"),kb=Symbol("processEntry"),Et=Symbol("extendedHeader"),Ii=Symbol("globalExtendedHeader"),Rn=Symbol("meta"),Tb=Symbol("emitMeta"),ce=Symbol("buffer"),Ar=Symbol("queue"),rs=Symbol("ended"),Nb=Symbol("emittedEnd"),ns=Symbol("emit"),Ze=Symbol("unzip"),id=Symbol("consumeChunk"),ad=Symbol("consumeChunkSub"),xh=Symbol("consumeBody"),Ob=Symbol("consumeMeta"),Ib=Symbol("consumeHeader"),cd=Symbol("consuming"),Ch=Symbol("bufferConcat"),wh=Symbol("maybeEnd"),vi=Symbol("writing"),An=Symbol("aborted"),dd=Symbol("onDone"),ss=Symbol("sawValidEntry"),ld=Symbol("sawNullBlock"),fd=Symbol("sawEOF"),vb=Symbol("closeStream"),RP=t=>!0;Pb.exports=gP(class extends xP{constructor(e){e=e||{},super(e),this.file=e.file||"",this[ss]=null,this.on(dd,r=>{(this[gt]==="begin"||this[ss]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(dd,e.ondone):this.on(dd,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||wP,this.filter=typeof e.filter=="function"?e.filter:RP,this.writable=!0,this.readable=!1,this[Ar]=new CP,this[ce]=null,this[Rr]=null,this[ts]=null,this[gt]="begin",this[Rn]="",this[Et]=null,this[Ii]=null,this[rs]=!1,this[Ze]=null,this[An]=!1,this[ld]=!1,this[fd]=!1,this.on("end",()=>this[vb]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Ib](e,r){this[ss]===null&&(this[ss]=!1);let n;try{n=new EP(e,r,this[Et],this[Ii])}catch(s){return this.warn("TAR_ENTRY_INVALID",s)}if(n.nullBlock)this[ld]?(this[fd]=!0,this[gt]==="begin"&&(this[gt]="header"),this[ns]("eof")):(this[ld]=!0,this[ns]("nullBlock"));else if(this[ld]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let s=n.type;if(/^(Symbolic)?Link$/.test(s)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(s)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[ts]=new SP(n,this[Et],this[Ii]);if(!this[ss])if(o.remain){let i=()=>{o.invalid||(this[ss]=!0)};o.on("end",i)}else this[ss]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[ns]("ignoredEntry",o),this[gt]="ignore",o.resume()):o.size>0&&(this[Rn]="",o.on("data",i=>this[Rn]+=i),this[gt]="meta"):(this[Et]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[ns]("ignoredEntry",o),this[gt]=o.remain?"ignore":"header",o.resume()):(o.remain?this[gt]="body":(this[gt]="header",o.end()),this[Rr]?this[Ar].push(o):(this[Ar].push(o),this[Eh]())))}}}[vb](){_P(()=>this.emit("close"))}[kb](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Rr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Eh]()),r=!1)):(this[Rr]=null,r=!1),r}[Eh](){do;while(this[kb](this[Ar].shift()));if(!this[Ar].length){let e=this[Rr];!e||e.flowing||e.size===e.remain?this[vi]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[xh](e,r){let n=this[ts],s=n.blockRemain,o=s>=e.length&&r===0?e:e.slice(r,r+s);return n.write(o),n.blockRemain||(this[gt]="header",this[ts]=null,n.end()),o.length}[Ob](e,r){let n=this[ts],s=this[xh](e,r);return this[ts]||this[Tb](n),s}[ns](e,r,n){!this[Ar].length&&!this[Rr]?this.emit(e,r,n):this[Ar].push([e,r,n])}[Tb](e){switch(this[ns]("meta",this[Rn]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Et]=Ab.parse(this[Rn],this[Et],!1);break;case"GlobalExtendedHeader":this[Ii]=Ab.parse(this[Rn],this[Ii],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Et]=this[Et]||Object.create(null),this[Et].path=this[Rn].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Et]=this[Et]||Object.create(null),this[Et].linkpath=this[Rn].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[An]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[An])return;if(this[Ze]===null&&e){if(this[ce]&&(e=Buffer.concat([this[ce],e]),this[ce]=null),e.length<gh.length)return this[ce]=e,!0;for(let n=0;this[Ze]===null&&n<gh.length;n++)e[n]!==gh[n]&&(this[Ze]=!1);if(this[Ze]===null){let n=this[rs];this[rs]=!1,this[Ze]=new bP.Unzip,this[Ze].on("data",o=>this[id](o)),this[Ze].on("error",o=>this.abort(o)),this[Ze].on("end",o=>{this[rs]=!0,this[id]()}),this[vi]=!0;let s=this[Ze][n?"end":"write"](e);return this[vi]=!1,s}}this[vi]=!0,this[Ze]?this[Ze].write(e):this[id](e),this[vi]=!1;let r=this[Ar].length?!1:this[Rr]?this[Rr].flowing:!0;return!r&&!this[Ar].length&&this[Rr].once("drain",n=>this.emit("drain")),r}[Ch](e){e&&!this[An]&&(this[ce]=this[ce]?Buffer.concat([this[ce],e]):e)}[wh](){if(this[rs]&&!this[Nb]&&!this[An]&&!this[cd]){this[Nb]=!0;let e=this[ts];if(e&&e.blockRemain){let r=this[ce]?this[ce].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[ce]&&e.write(this[ce]),e.end()}this[ns](dd)}}[id](e){if(this[cd])this[Ch](e);else if(!e&&!this[ce])this[wh]();else{if(this[cd]=!0,this[ce]){this[Ch](e);let r=this[ce];this[ce]=null,this[ad](r)}else this[ad](e);for(;this[ce]&&this[ce].length>=512&&!this[An]&&!this[fd];){let r=this[ce];this[ce]=null,this[ad](r)}this[cd]=!1}(!this[ce]||this[rs])&&this[wh]()}[ad](e){let r=0,n=e.length;for(;r+512<=n&&!this[An]&&!this[fd];)switch(this[gt]){case"begin":case"header":this[Ib](e,r),r+=512;break;case"ignore":case"body":r+=this[xh](e,r);break;case"meta":r+=this[Ob](e,r);break;default:throw new Error("invalid state: "+this[gt])}r<n&&(this[ce]?this[ce]=Buffer.concat([e.slice(r),this[ce]]):this[ce]=e.slice(r))}end(e){this[An]||(this[Ze]?this[Ze].end(e):(this[rs]=!0,this.write(e)))}})});var hd=O((mY,Fb)=>{"use strict";var AP=so(),Bb=ud(),bo=require("fs"),kP=So(),Db=require("path"),Sh=ho();Fb.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=AP(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&NP(n,e),n.noResume||TP(n),n.file&&n.sync?OP(n):n.file?IP(n,r):Mb(n)};var TP=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},NP=(t,e)=>{let r=new Map(e.map(o=>[Sh(o),!0])),n=t.filter,s=(o,i)=>{let a=i||Db.parse(o).root||".",d=o===a?!1:r.has(o)?r.get(o):s(Db.dirname(o),a);return r.set(o,d),d};t.filter=n?(o,i)=>n(o,i)&&s(Sh(o)):o=>s(Sh(o))},OP=t=>{let e=Mb(t),r=t.file,n=!0,s;try{let o=bo.statSync(r),i=t.maxReadSize||16*1024*1024;if(o.size<i)e.end(bo.readFileSync(r));else{let a=0,d=Buffer.allocUnsafe(i);for(s=bo.openSync(r,"r");a<o.size;){let c=bo.readSync(s,d,0,i,a);a+=c,e.write(d.slice(0,c))}e.end()}n=!1}finally{if(n&&s)try{bo.closeSync(s)}catch{}}},IP=(t,e)=>{let r=new Bb(t),n=t.maxReadSize||16*1024*1024,s=t.file,o=new Promise((i,a)=>{r.on("error",a),r.on("end",i),bo.stat(s,(d,c)=>{if(d)a(d);else{let l=new kP.ReadStream(s,{readSize:n,size:c.size});l.on("error",a),l.pipe(r)}})});return e?o.then(e,e):o},Mb=t=>new Bb(t)});var jb=O((pY,qb)=>{"use strict";var vP=so(),md=Zc(),Lb=So(),zb=hd(),Ub=require("path");qb.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=vP(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?PP(n,e):n.file?DP(n,e,r):n.sync?BP(n,e):MP(n,e)};var PP=(t,e)=>{let r=new md.Sync(t),n=new Lb.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),$b(r,e)},DP=(t,e,r)=>{let n=new md(t),s=new Lb.WriteStream(t.file,{mode:t.mode||438});n.pipe(s);let o=new Promise((i,a)=>{s.on("error",a),s.on("close",i),n.on("error",a)});return bh(n,e),r?o.then(r,r):o},$b=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?zb({file:Ub.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},bh=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return zb({file:Ub.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>bh(t,e));t.add(r)}t.end()},BP=(t,e)=>{let r=new md.Sync(t);return $b(r,e),r},MP=(t,e)=>{let r=new md(t);return bh(r,e),r}});var _h=O((yY,Xb)=>{"use strict";var FP=so(),Kb=Zc(),rt=require("fs"),Gb=So(),Hb=hd(),Vb=require("path"),Wb=uo();Xb.exports=(t,e,r)=>{let n=FP(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?LP(n,e):UP(n,e,r)};var LP=(t,e)=>{let r=new Kb.Sync(t),n=!0,s,o;try{try{s=rt.openSync(t.file,"r+")}catch(d){if(d.code==="ENOENT")s=rt.openSync(t.file,"w+");else throw d}let i=rt.fstatSync(s),a=Buffer.alloc(512);e:for(o=0;o<i.size;o+=512){for(let l=0,u=0;l<512;l+=u){if(u=rt.readSync(s,a,l,a.length-l,o+l),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!u)break e}let d=new Wb(a);if(!d.cksumValid)break;let c=512*Math.ceil(d.size/512);if(o+c+512>i.size)break;o+=c,t.mtimeCache&&t.mtimeCache.set(d.path,d.mtime)}n=!1,zP(t,r,o,s,e)}finally{if(n)try{rt.closeSync(s)}catch{}}},zP=(t,e,r,n,s)=>{let o=new Gb.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),$P(e,s)},UP=(t,e,r)=>{e=Array.from(e);let n=new Kb(t),s=(i,a,d)=>{let c=(S,b)=>{S?rt.close(i,R=>d(S)):d(null,b)},l=0;if(a===0)return c(null,0);let u=0,h=Buffer.alloc(512),x=(S,b)=>{if(S)return c(S);if(u+=b,u<512&&b)return rt.read(i,h,u,h.length-u,l+u,x);if(l===0&&h[0]===31&&h[1]===139)return c(new Error("cannot append to compressed archives"));if(u<512)return c(null,l);let R=new Wb(h);if(!R.cksumValid)return c(null,l);let K=512*Math.ceil(R.size/512);if(l+K+512>a||(l+=K+512,l>=a))return c(null,l);t.mtimeCache&&t.mtimeCache.set(R.path,R.mtime),u=0,rt.read(i,h,0,512,l,x)};rt.read(i,h,0,512,l,x)},o=new Promise((i,a)=>{n.on("error",a);let d="r+",c=(l,u)=>{if(l&&l.code==="ENOENT"&&d==="r+")return d="w+",rt.open(t.file,d,c);if(l)return a(l);rt.fstat(u,(h,x)=>{if(h)return rt.close(u,()=>a(h));s(u,x.size,(S,b)=>{if(S)return a(S);let R=new Gb.WriteStream(t.file,{fd:u,start:b});n.pipe(R),R.on("error",a),R.on("close",i),Yb(n,e)})})};rt.open(t.file,d,c)});return r?o.then(r,r):o},$P=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Hb({file:Vb.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Yb=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Hb({file:Vb.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Yb(t,e));t.add(r)}t.end()}});var Zb=O((gY,Qb)=>{"use strict";var qP=so(),jP=_h();Qb.exports=(t,e,r)=>{let n=qP(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),KP(n),jP(n,e,r)};var KP=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var t0=O((EY,e0)=>{var{promisify:Jb}=require("util"),kn=require("fs"),GP=t=>{if(!t)t={mode:511,fs:kn};else if(typeof t=="object")t={mode:511,fs:kn,...t};else if(typeof t=="number")t={mode:t,fs:kn};else if(typeof t=="string")t={mode:parseInt(t,8),fs:kn};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||kn.mkdir,t.mkdirAsync=Jb(t.mkdir),t.stat=t.stat||t.fs.stat||kn.stat,t.statAsync=Jb(t.stat),t.statSync=t.statSync||t.fs.statSync||kn.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||kn.mkdirSync,t};e0.exports=GP});var n0=O((xY,r0)=>{var HP=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:VP,parse:WP}=require("path"),YP=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=VP(t),HP==="win32"){let e=/[*|"<>?:]/,{root:r}=WP(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};r0.exports=YP});var c0=O((CY,a0)=>{var{dirname:s0}=require("path"),o0=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?o0(t,s0(e),e):void 0),i0=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?i0(t,s0(e),e):void 0}};a0.exports={findMade:o0,findMadeSync:i0}});var kh=O((wY,l0)=>{var{dirname:d0}=require("path"),Rh=(t,e,r)=>{e.recursive=!1;let n=d0(t);return n===t?e.mkdirAsync(t,e).catch(s=>{if(s.code!=="EISDIR")throw s}):e.mkdirAsync(t,e).then(()=>r||t,s=>{if(s.code==="ENOENT")return Rh(n,e).then(o=>Rh(t,e,o));if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw s},()=>{throw s})})},Ah=(t,e,r)=>{let n=d0(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(s){if(s.code!=="EISDIR")throw s;return}try{return e.mkdirSync(t,e),r||t}catch(s){if(s.code==="ENOENT")return Ah(t,e,Ah(n,e,r));if(s.code!=="EEXIST"&&s.code!=="EROFS")throw s;try{if(!e.statSync(t).isDirectory())throw s}catch{throw s}}};l0.exports={mkdirpManual:Rh,mkdirpManualSync:Ah}});var h0=O((SY,u0)=>{var{dirname:f0}=require("path"),{findMade:XP,findMadeSync:QP}=c0(),{mkdirpManual:ZP,mkdirpManualSync:JP}=kh(),eD=(t,e)=>(e.recursive=!0,f0(t)===t?e.mkdirAsync(t,e):XP(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(s=>{if(s.code==="ENOENT")return ZP(t,e);throw s}))),tD=(t,e)=>{if(e.recursive=!0,f0(t)===t)return e.mkdirSync(t,e);let n=QP(e,t);try{return e.mkdirSync(t,e),n}catch(s){if(s.code==="ENOENT")return JP(t,e);throw s}};u0.exports={mkdirpNative:eD,mkdirpNativeSync:tD}});var g0=O((bY,y0)=>{var m0=require("fs"),rD=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Th=rD.replace(/^v/,"").split("."),p0=+Th[0]>10||+Th[0]==10&&+Th[1]>=12,nD=p0?t=>t.mkdir===m0.mkdir:()=>!1,sD=p0?t=>t.mkdirSync===m0.mkdirSync:()=>!1;y0.exports={useNative:nD,useNativeSync:sD}});var b0=O((_Y,S0)=>{var _o=t0(),Ro=n0(),{mkdirpNative:E0,mkdirpNativeSync:x0}=h0(),{mkdirpManual:C0,mkdirpManualSync:w0}=kh(),{useNative:oD,useNativeSync:iD}=g0(),Ao=(t,e)=>(t=Ro(t),e=_o(e),oD(e)?E0(t,e):C0(t,e)),aD=(t,e)=>(t=Ro(t),e=_o(e),iD(e)?x0(t,e):w0(t,e));Ao.sync=aD;Ao.native=(t,e)=>E0(Ro(t),_o(e));Ao.manual=(t,e)=>C0(Ro(t),_o(e));Ao.nativeSync=(t,e)=>x0(Ro(t),_o(e));Ao.manualSync=(t,e)=>w0(Ro(t),_o(e));S0.exports=Ao});var O0=O((RY,N0)=>{"use strict";var xt=require("fs"),os=require("path"),cD=xt.lchown?"lchown":"chown",dD=xt.lchownSync?"lchownSync":"chownSync",R0=xt.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),_0=(t,e,r)=>{try{return xt[dD](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},lD=(t,e,r)=>{try{return xt.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},fD=R0?(t,e,r,n)=>s=>{!s||s.code!=="EISDIR"?n(s):xt.chown(t,e,r,n)}:(t,e,r,n)=>n,Nh=R0?(t,e,r)=>{try{return _0(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;lD(t,e,r)}}:(t,e,r)=>_0(t,e,r),uD=process.version,A0=(t,e,r)=>xt.readdir(t,e,r),hD=(t,e)=>xt.readdirSync(t,e);/^v4\./.test(uD)&&(A0=(t,e,r)=>xt.readdir(t,r));var pd=(t,e,r,n)=>{xt[cD](t,e,r,fD(t,e,r,s=>{n(s&&s.code!=="ENOENT"?s:null)}))},k0=(t,e,r,n,s)=>{if(typeof e=="string")return xt.lstat(os.resolve(t,e),(o,i)=>{if(o)return s(o.code!=="ENOENT"?o:null);i.name=e,k0(t,i,r,n,s)});if(e.isDirectory())Oh(os.resolve(t,e.name),r,n,o=>{if(o)return s(o);let i=os.resolve(t,e.name);pd(i,r,n,s)});else{let o=os.resolve(t,e.name);pd(o,r,n,s)}},Oh=(t,e,r,n)=>{A0(t,{withFileTypes:!0},(s,o)=>{if(s){if(s.code==="ENOENT")return n();if(s.code!=="ENOTDIR"&&s.code!=="ENOTSUP")return n(s)}if(s||!o.length)return pd(t,e,r,n);let i=o.length,a=null,d=c=>{if(!a){if(c)return n(a=c);if(--i===0)return pd(t,e,r,n)}};o.forEach(c=>k0(t,c,e,r,d))})},mD=(t,e,r,n)=>{if(typeof e=="string")try{let s=xt.lstatSync(os.resolve(t,e));s.name=e,e=s}catch(s){if(s.code==="ENOENT")return;throw s}e.isDirectory()&&T0(os.resolve(t,e.name),r,n),Nh(os.resolve(t,e.name),r,n)},T0=(t,e,r)=>{let n;try{n=hD(t,{withFileTypes:!0})}catch(s){if(s.code==="ENOENT")return;if(s.code==="ENOTDIR"||s.code==="ENOTSUP")return Nh(t,e,r);throw s}return n&&n.length&&n.forEach(s=>mD(t,s,e,r)),Nh(t,e,r)};N0.exports=Oh;Oh.sync=T0});var D0=O((AY,Ih)=>{"use strict";var I0=b0(),Ct=require("fs"),yd=require("path"),v0=O0(),Tt=lo(),gd=class extends Error{constructor(e,r){super("Cannot extract through symbolic link"),this.path=r,this.symlink=e}get name(){return"SylinkError"}},Ed=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'"),this.path=e,this.code=r}get name(){return"CwdError"}},xd=(t,e)=>t.get(Tt(e)),Pi=(t,e,r)=>t.set(Tt(e),r),pD=(t,e)=>{Ct.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Ed(t,r&&r.code||"ENOTDIR")),e(r)})};Ih.exports=(t,e,r)=>{t=Tt(t);let n=e.umask,s=e.mode|448,o=(s&n)!==0,i=e.uid,a=e.gid,d=typeof i=="number"&&typeof a=="number"&&(i!==e.processUid||a!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,h=Tt(e.cwd),x=(R,K)=>{R?r(R):(Pi(u,t,!0),K&&d?v0(K,i,a,Nt=>x(Nt)):o?Ct.chmod(t,s,r):r())};if(u&&xd(u,t)===!0)return x();if(t===h)return pD(t,x);if(c)return I0(t,{mode:s}).then(R=>x(null,R),x);let b=Tt(yd.relative(h,t)).split("/");Cd(h,b,s,u,l,h,null,x)};var Cd=(t,e,r,n,s,o,i,a)=>{if(!e.length)return a(null,i);let d=e.shift(),c=Tt(yd.resolve(t+"/"+d));if(xd(n,c))return Cd(c,e,r,n,s,o,i,a);Ct.mkdir(c,r,P0(c,e,r,n,s,o,i,a))},P0=(t,e,r,n,s,o,i,a)=>d=>{d?Ct.lstat(t,(c,l)=>{if(c)c.path=c.path&&Tt(c.path),a(c);else if(l.isDirectory())Cd(t,e,r,n,s,o,i,a);else if(s)Ct.unlink(t,u=>{if(u)return a(u);Ct.mkdir(t,r,P0(t,e,r,n,s,o,i,a))});else{if(l.isSymbolicLink())return a(new gd(t,t+"/"+e.join("/")));a(d)}}):(i=i||t,Cd(t,e,r,n,s,o,i,a))},yD=t=>{let e=!1,r="ENOTDIR";try{e=Ct.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Ed(t,r)}};Ih.exports.sync=(t,e)=>{t=Tt(t);let r=e.umask,n=e.mode|448,s=(n&r)!==0,o=e.uid,i=e.gid,a=typeof o=="number"&&typeof i=="number"&&(o!==e.processUid||i!==e.processGid),d=e.preserve,c=e.unlink,l=e.cache,u=Tt(e.cwd),h=R=>{Pi(l,t,!0),R&&a&&v0.sync(R,o,i),s&&Ct.chmodSync(t,n)};if(l&&xd(l,t)===!0)return h();if(t===u)return yD(u),h();if(d)return h(I0.sync(t,n));let S=Tt(yd.relative(u,t)).split("/"),b=null;for(let R=S.shift(),K=u;R&&(K+="/"+R);R=S.shift())if(K=Tt(yd.resolve(K)),!xd(l,K))try{Ct.mkdirSync(K,n),b=b||K,Pi(l,K,!0)}catch{let Re=Ct.lstatSync(K);if(Re.isDirectory()){Pi(l,K,!0);continue}else if(c){Ct.unlinkSync(K),Ct.mkdirSync(K,n),b=b||K,Pi(l,K,!0);continue}else if(Re.isSymbolicLink())return new gd(K,K+"/"+S.join("/"))}return h(b)}});var Ph=O((kY,B0)=>{var vh=Object.create(null),{hasOwnProperty:gD}=Object.prototype;B0.exports=t=>(gD.call(vh,t)||(vh[t]=t.normalize("NFKD")),vh[t])});var z0=O((TY,L0)=>{var M0=require("assert"),ED=Ph(),xD=ho(),{join:F0}=require("path"),CD=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,wD=CD==="win32";L0.exports=()=>{let t=new Map,e=new Map,r=c=>c.split("/").slice(0,-1).reduce((u,h)=>(u.length&&(h=F0(u[u.length-1],h)),u.push(h||"/"),u),[]),n=new Set,s=c=>{let l=e.get(c);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(u=>t.get(u)),dirs:[...l.dirs].map(u=>t.get(u))}},o=c=>{let{paths:l,dirs:u}=s(c);return l.every(h=>h[0]===c)&&u.every(h=>h[0]instanceof Set&&h[0].has(c))},i=c=>n.has(c)||!o(c)?!1:(n.add(c),c(()=>a(c)),!0),a=c=>{if(!n.has(c))return!1;let{paths:l,dirs:u}=e.get(c),h=new Set;return l.forEach(x=>{let S=t.get(x);M0.equal(S[0],c),S.length===1?t.delete(x):(S.shift(),typeof S[0]=="function"?h.add(S[0]):S[0].forEach(b=>h.add(b)))}),u.forEach(x=>{let S=t.get(x);M0(S[0]instanceof Set),S[0].size===1&&S.length===1?t.delete(x):S[0].size===1?(S.shift(),h.add(S[0])):S[0].delete(c)}),n.delete(c),h.forEach(x=>i(x)),!0};return{check:o,reserve:(c,l)=>{c=wD?["win32 parallelization disabled"]:c.map(h=>ED(xD(F0(h))).toLowerCase());let u=new Set(c.map(h=>r(h)).reduce((h,x)=>h.concat(x)));return e.set(l,{dirs:u,paths:c}),c.forEach(h=>{let x=t.get(h);x?x.push(l):t.set(h,[l])}),u.forEach(h=>{let x=t.get(h);x?x[x.length-1]instanceof Set?x[x.length-1].add(l):x.push(new Set([l])):t.set(h,[new Set([l])])}),i(l)}}}});var q0=O((NY,$0)=>{var SD=process.env.__FAKE_PLATFORM__||process.platform,bD=SD==="win32",_D=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:RD,O_TRUNC:AD,O_WRONLY:kD,UV_FS_O_FILEMAP:U0=0}=_D.constants,TD=bD&&!!U0,ND=512*1024,OD=U0|AD|RD|kD;$0.exports=TD?t=>t<ND?OD:"w":()=>"w"});var qh=O((OY,r_)=>{"use strict";var ID=require("assert"),vD=ud(),X=require("fs"),PD=So(),kr=require("path"),J0=D0(),j0=$u(),DD=z0(),BD=qu(),nt=lo(),MD=ho(),FD=Ph(),K0=Symbol("onEntry"),Mh=Symbol("checkFs"),G0=Symbol("checkFs2"),bd=Symbol("pruneCache"),Fh=Symbol("isReusable"),wt=Symbol("makeFs"),Lh=Symbol("file"),zh=Symbol("directory"),_d=Symbol("link"),H0=Symbol("symlink"),V0=Symbol("hardlink"),W0=Symbol("unsupported"),Y0=Symbol("checkPath"),Tn=Symbol("mkdir"),Le=Symbol("onError"),wd=Symbol("pending"),X0=Symbol("pend"),ko=Symbol("unpend"),Dh=Symbol("ended"),Bh=Symbol("maybeClose"),Uh=Symbol("skip"),Di=Symbol("doChown"),Bi=Symbol("uid"),Mi=Symbol("gid"),Fi=Symbol("checkedCwd"),e_=require("crypto"),t_=q0(),LD=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Li=LD==="win32",zD=(t,e)=>{if(!Li)return X.unlink(t,e);let r=t+".DELETE."+e_.randomBytes(16).toString("hex");X.rename(t,r,n=>{if(n)return e(n);X.unlink(r,e)})},UD=t=>{if(!Li)return X.unlinkSync(t);let e=t+".DELETE."+e_.randomBytes(16).toString("hex");X.renameSync(t,e),X.unlinkSync(e)},Q0=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,Z0=t=>FD(MD(nt(t))).toLowerCase(),$D=(t,e)=>{e=Z0(e);for(let r of t.keys()){let n=Z0(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},qD=t=>{for(let e of t.keys())t.delete(e)},zi=class extends vD{constructor(e){if(e||(e={}),e.ondone=r=>{this[Dh]=!0,this[Bh]()},super(e),this[Fi]=!1,this.reservations=DD(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[wd]=0,this[Dh]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Li,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=nt(kr.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[K0](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Bh](){this[Dh]&&this[wd]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[Y0](e){if(this.strip){let r=nt(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=nt(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=nt(e.path),n=r.split("/");if(n.includes("..")||Li&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[s,o]=BD(r);s&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:e,path:r}))}if(kr.isAbsolute(e.path)?e.absolute=nt(kr.resolve(e.path)):e.absolute=nt(kr.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:nt(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=kr.win32.parse(e.absolute);e.absolute=r+j0.encode(e.absolute.slice(r.length));let{root:n}=kr.win32.parse(e.path);e.path=n+j0.encode(e.path.slice(n.length))}return!0}[K0](e){if(!this[Y0](e))return e.resume();switch(ID.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Mh](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[W0](e)}}[Le](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[ko](),r.resume())}[Tn](e,r,n){J0(nt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Di](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Bi](e){return Q0(this.uid,e.uid,this.processUid)}[Mi](e){return Q0(this.gid,e.gid,this.processGid)}[Lh](e,r){let n=e.mode&4095||this.fmode,s=new PD.WriteStream(e.absolute,{flags:t_(e.size),mode:n,autoClose:!1});s.on("error",d=>{s.fd&&X.close(s.fd,()=>{}),s.write=()=>!0,this[Le](d,e),r()});let o=1,i=d=>{if(d){s.fd&&X.close(s.fd,()=>{}),this[Le](d,e),r();return}--o===0&&X.close(s.fd,c=>{c?this[Le](c,e):this[ko](),r()})};s.on("finish",d=>{let c=e.absolute,l=s.fd;if(e.mtime&&!this.noMtime){o++;let u=e.atime||new Date,h=e.mtime;X.futimes(l,u,h,x=>x?X.utimes(c,u,h,S=>i(S&&x)):i())}if(this[Di](e)){o++;let u=this[Bi](e),h=this[Mi](e);X.fchown(l,u,h,x=>x?X.chown(c,u,h,S=>i(S&&x)):i())}i()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",d=>{this[Le](d,e),r()}),e.pipe(a)),a.pipe(s)}[zh](e,r){let n=e.mode&4095||this.dmode;this[Tn](e.absolute,n,s=>{if(s){this[Le](s,e),r();return}let o=1,i=a=>{--o===0&&(r(),this[ko](),e.resume())};e.mtime&&!this.noMtime&&(o++,X.utimes(e.absolute,e.atime||new Date,e.mtime,i)),this[Di](e)&&(o++,X.chown(e.absolute,this[Bi](e),this[Mi](e),i)),i()})}[W0](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[H0](e,r){this[_d](e,e.linkpath,"symlink",r)}[V0](e,r){let n=nt(kr.resolve(this.cwd,e.linkpath));this[_d](e,n,"link",r)}[X0](){this[wd]++}[ko](){this[wd]--,this[Bh]()}[Uh](e){this[ko](),e.resume()}[Fh](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Li}[Mh](e){this[X0]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[G0](e,n))}[bd](e){e.type==="SymbolicLink"?qD(this.dirCache):e.type!=="Directory"&&$D(this.dirCache,e.absolute)}[G0](e,r){this[bd](e);let n=a=>{this[bd](e),r(a)},s=()=>{this[Tn](this.cwd,this.dmode,a=>{if(a){this[Le](a,e),n();return}this[Fi]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=nt(kr.dirname(e.absolute));if(a!==this.cwd)return this[Tn](a,this.dmode,d=>{if(d){this[Le](d,e),n();return}i()})}i()},i=()=>{X.lstat(e.absolute,(a,d)=>{if(d&&(this.keep||this.newer&&d.mtime>e.mtime)){this[Uh](e),n();return}if(a||this[Fh](e,d))return this[wt](null,e,n);if(d.isDirectory()){if(e.type==="Directory"){let c=!this.noChmod&&e.mode&&(d.mode&4095)!==e.mode,l=u=>this[wt](u,e,n);return c?X.chmod(e.absolute,e.mode,l):l()}if(e.absolute!==this.cwd)return X.rmdir(e.absolute,c=>this[wt](c,e,n))}if(e.absolute===this.cwd)return this[wt](null,e,n);zD(e.absolute,c=>this[wt](c,e,n))})};this[Fi]?o():s()}[wt](e,r,n){if(e){this[Le](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Lh](r,n);case"Link":return this[V0](r,n);case"SymbolicLink":return this[H0](r,n);case"Directory":case"GNUDumpDir":return this[zh](r,n)}}[_d](e,r,n,s){X[n](r,e.absolute,o=>{o?this[Le](o,e):(this[ko](),e.resume()),s()})}},Sd=t=>{try{return[null,t()]}catch(e){return[e,null]}},$h=class extends zi{[wt](e,r){return super[wt](e,r,()=>{})}[Mh](e){if(this[bd](e),!this[Fi]){let o=this[Tn](this.cwd,this.dmode);if(o)return this[Le](o,e);this[Fi]=!0}if(e.absolute!==this.cwd){let o=nt(kr.dirname(e.absolute));if(o!==this.cwd){let i=this[Tn](o,this.dmode);if(i)return this[Le](i,e)}}let[r,n]=Sd(()=>X.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[Uh](e);if(r||this[Fh](e,n))return this[wt](null,e);if(n.isDirectory()){if(e.type==="Directory"){let i=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=i?Sd(()=>{X.chmodSync(e.absolute,e.mode)}):[];return this[wt](a,e)}let[o]=Sd(()=>X.rmdirSync(e.absolute));this[wt](o,e)}let[s]=e.absolute===this.cwd?[]:Sd(()=>UD(e.absolute));this[wt](s,e)}[Lh](e,r){let n=e.mode&4095||this.fmode,s=a=>{let d;try{X.closeSync(o)}catch(c){d=c}(a||d)&&this[Le](a||d,e),r()},o;try{o=X.openSync(e.absolute,t_(e.size),n)}catch(a){return s(a)}let i=this.transform&&this.transform(e)||e;i!==e&&(i.on("error",a=>this[Le](a,e)),e.pipe(i)),i.on("data",a=>{try{X.writeSync(o,a,0,a.length)}catch(d){s(d)}}),i.on("end",a=>{let d=null;if(e.mtime&&!this.noMtime){let c=e.atime||new Date,l=e.mtime;try{X.futimesSync(o,c,l)}catch(u){try{X.utimesSync(e.absolute,c,l)}catch{d=u}}}if(this[Di](e)){let c=this[Bi](e),l=this[Mi](e);try{X.fchownSync(o,c,l)}catch(u){try{X.chownSync(e.absolute,c,l)}catch{d=d||u}}}s(d)})}[zh](e,r){let n=e.mode&4095||this.dmode,s=this[Tn](e.absolute,n);if(s){this[Le](s,e),r();return}if(e.mtime&&!this.noMtime)try{X.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Di](e))try{X.chownSync(e.absolute,this[Bi](e),this[Mi](e))}catch{}r(),e.resume()}[Tn](e,r){try{return J0.sync(nt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[_d](e,r,n,s){try{X[n+"Sync"](r,e.absolute),s(),e.resume()}catch(o){return this[Le](o,e)}}};zi.Sync=$h;r_.exports=zi});var a_=O((IY,i_)=>{"use strict";var jD=so(),Rd=qh(),s_=require("fs"),o_=So(),n_=require("path"),jh=ho();i_.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=jD(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&KD(n,e),n.file&&n.sync?GD(n):n.file?HD(n,r):n.sync?VD(n):WD(n)};var KD=(t,e)=>{let r=new Map(e.map(o=>[jh(o),!0])),n=t.filter,s=(o,i)=>{let a=i||n_.parse(o).root||".",d=o===a?!1:r.has(o)?r.get(o):s(n_.dirname(o),a);return r.set(o,d),d};t.filter=n?(o,i)=>n(o,i)&&s(jh(o)):o=>s(jh(o))},GD=t=>{let e=new Rd.Sync(t),r=t.file,n=s_.statSync(r),s=t.maxReadSize||16*1024*1024;new o_.ReadStreamSync(r,{readSize:s,size:n.size}).pipe(e)},HD=(t,e)=>{let r=new Rd(t),n=t.maxReadSize||16*1024*1024,s=t.file,o=new Promise((i,a)=>{r.on("error",a),r.on("close",i),s_.stat(s,(d,c)=>{if(d)a(d);else{let l=new o_.ReadStream(s,{readSize:n,size:c.size});l.on("error",a),l.pipe(r)}})});return e?o.then(e,e):o},VD=t=>new Rd.Sync(t),WD=t=>new Rd(t)});var c_=O(Ce=>{"use strict";Ce.c=Ce.create=jb();Ce.r=Ce.replace=_h();Ce.t=Ce.list=hd();Ce.u=Ce.update=Zb();Ce.x=Ce.extract=a_();Ce.Pack=Zc();Ce.Unpack=qh();Ce.Parse=ud();Ce.ReadEntry=Bc();Ce.WriteEntry=Zu();Ce.Header=uo();Ce.Pax=Fc();Ce.types=Du()});var d_=require("path"),To=St(jd());var Gm=async t=>{let e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),YR(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!WR(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},GR=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,HR=/(\d+\.){3}\d+/,VR=/\.\./;var WR=t=>GR.test(t)&&!HR.test(t)&&!VR.test(t),YR=t=>{let[e,r,n,s,o,i]=t.split(":"),a=e==="arn"&&t.split(":").length>=6,d=[e,r,n,o,i].filter(Boolean).length===5;if(a&&!d)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return e==="arn"&&!!r&&!!n&&!!o&&!!i};var Hm=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="endpoint"||e==="endpoint"?async()=>{let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:i,port:a,path:d}=s;return`${o}//${i}${a?":"+a:""}${d}`}}return s}:n};var Vm=async(t,e,r,n)=>{let s=await XR(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},XR=async(t,e,r)=>{var o;let n={},s=((o=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:o.call(e))||{};for(let[i,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=t[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await Hm(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Gm(n),n};function Wm(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}var je=t=>{if(typeof t=="string")return je(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:o}=t,i;return o&&(i=Wm(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};var Ym=t=>typeof t=="object"?"url"in t?je(t.url):t:je(t);var Xm=({config:t,instructions:e})=>(r,n)=>async s=>{var a,d;let o=await Vm(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=o,n.authSchemes=(a=o.properties)==null?void 0:a.authSchemes;let i=(d=n.authSchemes)==null?void 0:d[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...s})};var Qm=(t,e)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var Zm=(t,e)=>(r,n)=>async s=>{var a;let o=(a=n.endpointV2)!=null&&a.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let i=await e(s.input,{...t,endpoint:o});return r({...s,request:i})};var QR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Xd={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function It(t,e,r){return{applyToStack:n=>{n.add(Qm(t,r),QR),n.add(Zm(t,e),Xd)}}}var ZR={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Xd.name},vt=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Xm({config:t,instructions:e}),ZR)}});var ke=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};var Pr=t=>{let e=t.tls??!0,{endpoint:r}=t,n=r!=null?async()=>Ym(await ke(r)()):void 0;return{...t,endpoint:n,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:ke(t.useDualstackEndpoint??!1),useFipsEndpoint:ke(t.useFipsEndpoint??!1)}};var Pt=class{trace(){}debug(){}info(){}warn(){}error(){}};var ms=()=>{let t=[],e=[],r=new Set,n=l=>l.sort((u,h)=>Jm[h.step]-Jm[u.step]||ep[h.priority||"normal"]-ep[u.priority||"normal"]),s=l=>{let u=!1,h=x=>x.name&&x.name===l?(u=!0,r.delete(l),!1):!0;return t=t.filter(h),e=e.filter(h),u},o=l=>{let u=!1,h=x=>x.middleware===l?(u=!0,x.name&&r.delete(x.name),!1):!0;return t=t.filter(h),e=e.filter(h),u},i=l=>(t.forEach(u=>{l.add(u.middleware,{...u})}),e.forEach(u=>{l.addRelativeTo(u.middleware,{...u})}),l),a=l=>{let u=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...a(h))}),u.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...a(h))}),u},d=(l=!1)=>{let u=[],h=[],x={};return t.forEach(b=>{let R={...b,before:[],after:[]};R.name&&(x[R.name]=R),u.push(R)}),e.forEach(b=>{let R={...b,before:[],after:[]};R.name&&(x[R.name]=R),h.push(R)}),h.forEach(b=>{if(b.toMiddleware){let R=x[b.toMiddleware];if(R===void 0){if(l)return;throw new Error(`${b.toMiddleware} is not found when adding ${b.name||"anonymous"} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&R.after.push(b),b.relation==="before"&&R.before.push(b)}}),n(u).map(a).reduce((b,R)=>(b.push(...R),b),[])},c={add:(l,u={})=>{let{name:h,override:x}=u,S={step:"initialize",priority:"normal",middleware:l,...u};if(h){if(r.has(h)){if(!x)throw new Error(`Duplicate middleware name '${h}'`);let b=t.findIndex(K=>K.name===h),R=t[b];if(R.step!==S.step||R.priority!==S.priority)throw new Error(`"${h}" middleware with ${R.priority} priority in ${R.step} step cannot be overridden by same-name middleware with ${S.priority} priority in ${S.step} step.`);t.splice(b,1)}r.add(h)}t.push(S)},addRelativeTo:(l,u)=>{let{name:h,override:x}=u,S={middleware:l,...u};if(h){if(r.has(h)){if(!x)throw new Error(`Duplicate middleware name '${h}'`);let b=e.findIndex(K=>K.name===h),R=e[b];if(R.toMiddleware!==S.toMiddleware||R.relation!==S.relation)throw new Error(`"${h}" middleware ${R.relation} "${R.toMiddleware}" middleware cannot be overridden by same-name middleware ${S.relation} "${S.toMiddleware}" middleware.`);e.splice(b,1)}r.add(h)}e.push(S)},clone:()=>i(ms()),use:l=>{l.applyToStack(c)},remove:l=>typeof l=="string"?s(l):o(l),removeByTag:l=>{let u=!1,h=x=>{let{tags:S,name:b}=x;return S&&S.includes(l)?(b&&r.delete(b),u=!0,!1):!0};return t=t.filter(h),e=e.filter(h),u},concat:l=>{let u=i(ms());return u.use(l),u},applyToStack:i,identify:()=>d(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,u)=>{for(let h of d().map(x=>x.middleware).reverse())l=h(l,u);return l}};return c},Jm={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ep={high:3,normal:2,low:1};var Dt=class{constructor(e){this.middlewareStack=ms(),this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)i(e).then(a=>o(null,a.output),a=>o(a)).catch(()=>{});else return i(e).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var at=class{constructor(){this.middlewareStack=ms()}};var In="***SensitiveInformation***";var Qd=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}};var JR=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&cp.warn(ap(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},eA=Math.ceil(34028234663852886e22),tp=t=>{let e=JR(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>eA)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},ps=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}};var Zi=t=>Zd(t,32),rp=t=>Zd(t,16),np=t=>Zd(t,8),Zd=(t,e)=>{let r=ps(t);if(r!==void 0&&tA(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},tA=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},ct=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},Po=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},P=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return cp.warn(ap(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}};var sp=t=>tp(typeof t=="string"?Do(t):t),rA=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Do=t=>{let e=t.match(rA);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)};var op=t=>ps(typeof t=="string"?Do(t):t);var vn=t=>Zi(typeof t=="string"?Do(t):t),Bo=t=>rp(typeof t=="string"?Do(t):t),ip=t=>np(typeof t=="string"?Do(t):t),ap=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),cp={warn:console.warn};var nA=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],el=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ea(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),d=s<10?`0${s}`:`${s}`,c=o<10?`0${o}`:`${o}`,l=i<10?`0${i}`:`${i}`,u=a<10?`0${a}`:`${a}`;return`${nA[n]}, ${d} ${el[r]} ${e} ${c}:${l}:${u} GMT`}var Y1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var sA=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ta=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=sA.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,d,c,l]=e,u=Bo(Mo(n)),h=Dr(s,"month",1,12),x=Dr(o,"day",1,31),S=Ji(u,h,x,{hours:i,minutes:a,seconds:d,fractionalMilliseconds:c});return l.toUpperCase()!="Z"&&S.setTime(S.getTime()-pA(l)),S},oA=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),iA=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),aA=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),tl=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=oA.exec(t);if(e){let[r,n,s,o,i,a,d,c]=e;return Ji(Bo(Mo(o)),Jd(s),Dr(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:c})}if(e=iA.exec(t),e){let[r,n,s,o,i,a,d,c]=e;return lA(Ji(cA(o),Jd(s),Dr(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:c}))}if(e=aA.exec(t),e){let[r,n,s,o,i,a,d,c]=e;return Ji(Bo(Mo(c)),Jd(n),Dr(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:d})}throw new TypeError("Invalid RFC-7231 date-time value")};var Ji=(t,e,r,n)=>{let s=e-1;return uA(t,s,r),new Date(Date.UTC(t,s,r,Dr(n.hours,"hour",0,23),Dr(n.minutes,"minute",0,59),Dr(n.seconds,"seconds",0,60),mA(n.fractionalMilliseconds)))},cA=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Bo(Mo(t));return r<e?r+100:r},dA=50*365*24*60*60*1e3,lA=t=>t.getTime()-new Date().getTime()>dA?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,Jd=t=>{let e=el.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},fA=[31,28,31,30,31,30,31,31,30,31,30,31],uA=(t,e,r)=>{let n=fA[e];if(e===1&&hA(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${el[e]} in ${t}: ${r}`)},hA=t=>t%4===0&&(t%100!==0||t%400===0),Dr=(t,e,r,n)=>{let s=ip(Mo(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},mA=t=>t==null?0:sp("0."+t)*1e3,pA=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},Mo=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)};var dt=class extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,dt.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}},ee=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t};var nr=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=yA(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:(e==null?void 0:e.code)||(e==null?void 0:e.Code)||n||o||"UnknownError",$fault:"client",$metadata:s});throw ee(i,e)},yA=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]});var Br=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var dp=!1,Mr=t=>{t&&!dp&&parseInt(t.substring(1,t.indexOf(".")))<14&&(dp=!0)};function ys(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Fo=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=Fo(t[r]));return t};var rl=function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r};rl.prototype=Object.create(String.prototype,{constructor:{value:rl,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(rl,String);function Pn(t,e,r){let n,s,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return s=e,o=r,gA(n,s,o);o=e}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}EA(n,null,o,i)}return n}var gA=(t,e,r)=>Pn(t,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[e,o()]:n[s]=[e,o],n),{})),EA=(t,e,r,n)=>{if(e!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=xA,d=CA,c=n]=i;(typeof a=="function"&&a(e[c])||typeof a!="function"&&a)&&(t[n]=d(e[c]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,d=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=i:d&&(t[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(t[n]=o)}},xA=t=>t!=null,CA=t=>t;var nl=(t,e,r,n,s,o)=>{if(e!=null&&e[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?i.split("/").map(a=>ys(a)).join("/"):ys(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return t};var sl;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(sl||(sl={}));var H=class{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new H({...this,headers:{...this.headers}});return e.query&&(e.query=wA(e.query)),e}};function wA(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var _t=class{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var qp=St(pl());var or=class extends dt{constructor(e){super(e),Object.setPrototypeOf(this,or.prototype)}};var yl;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(yl||(yl={}));var gl;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(e.ObjectSizeGreaterThan):e.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(e.ObjectSizeLessThan):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(gl||(gl={}));var El;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.AccessPointArn!==void 0?r.AccessPointArn(e.AccessPointArn):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(El||(El={}));var xl;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(xl||(xl={}));var gs=class extends or{constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,gs.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}},Es=class extends or{constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,Es.prototype)}};var Up=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:In}}),$p=t=>({...t,...t.SSECustomerKey&&{SSECustomerKey:In}});var jp=async(t,e)=>{let{hostname:r,protocol:n="https",port:s,path:o}=await e.endpoint(),i=Uo({},Cl,{"if-match":t.IfMatch,"if-modified-since":[()=>Cl(t.IfModifiedSince),()=>ea(t.IfModifiedSince).toString()],"if-none-match":t.IfNoneMatch,"if-unmodified-since":[()=>Cl(t.IfUnmodifiedSince),()=>ea(t.IfUnmodifiedSince).toString()],range:t.Range,"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":t.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5,"x-amz-request-payer":t.RequestPayer,"x-amz-expected-bucket-owner":t.ExpectedBucketOwner,"x-amz-checksum-mode":t.ChecksumMode}),a=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/{Key+}`;a=nl(a,t,"Bucket",()=>t.Bucket,"{Bucket}",!1),a=nl(a,t,"Key",()=>t.Key,"{Key+}",!0);let d=Uo({"x-id":[,"GetObject"],"response-cache-control":[,t.ResponseCacheControl],"response-content-disposition":[,t.ResponseContentDisposition],"response-content-encoding":[,t.ResponseContentEncoding],"response-content-language":[,t.ResponseContentLanguage],"response-content-type":[,t.ResponseContentType],"response-expires":[()=>t.ResponseExpires!==void 0,()=>ea(t.ResponseExpires).toString()],versionId:[,t.VersionId],partNumber:[()=>t.PartNumber!==void 0,()=>t.PartNumber.toString()]}),c;return new H({protocol:n,hostname:r,port:s,method:"GET",headers:i,path:a,query:d,body:c})};var Kp=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return _k(t,e);let r=Uo({$metadata:wl(t),DeleteMarker:[()=>t.headers["x-amz-delete-marker"]!==void 0,()=>Qd(t.headers["x-amz-delete-marker"])],AcceptRanges:[,t.headers["accept-ranges"]],Expiration:[,t.headers["x-amz-expiration"]],Restore:[,t.headers["x-amz-restore"]],LastModified:[()=>t.headers["last-modified"]!==void 0,()=>ct(tl(t.headers["last-modified"]))],ContentLength:[()=>t.headers["content-length"]!==void 0,()=>op(t.headers["content-length"])],ETag:[,t.headers.etag],ChecksumCRC32:[,t.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,t.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,t.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,t.headers["x-amz-checksum-sha256"]],MissingMeta:[()=>t.headers["x-amz-missing-meta"]!==void 0,()=>vn(t.headers["x-amz-missing-meta"])],VersionId:[,t.headers["x-amz-version-id"]],CacheControl:[,t.headers["cache-control"]],ContentDisposition:[,t.headers["content-disposition"]],ContentEncoding:[,t.headers["content-encoding"]],ContentLanguage:[,t.headers["content-language"]],ContentRange:[,t.headers["content-range"]],ContentType:[,t.headers["content-type"]],Expires:[()=>t.headers.expires!==void 0,()=>ct(tl(t.headers.expires))],WebsiteRedirectLocation:[,t.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,t.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,t.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,t.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,t.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>t.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>Qd(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,t.headers["x-amz-storage-class"]],RequestCharged:[,t.headers["x-amz-request-charged"]],ReplicationStatus:[,t.headers["x-amz-replication-status"]],PartsCount:[()=>t.headers["x-amz-mp-parts-count"]!==void 0,()=>vn(t.headers["x-amz-mp-parts-count"])],TagCount:[()=>t.headers["x-amz-tagging-count"]!==void 0,()=>vn(t.headers["x-amz-tagging-count"])],ObjectLockMode:[,t.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>t.headers["x-amz-object-lock-retain-until-date"]!==void 0,()=>ct(ta(t.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,t.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys(t.headers).filter(s=>s.startsWith("x-amz-meta-")).reduce((s,o)=>(s[o.substring(11)]=t.headers[o],s),{})]}),n=t.body;return e.sdkStreamMixin(n),r.Body=n,r},_k=async(t,e)=>{let r={...t,body:await Ok(t.body,e)},n=Ik(t,r.body);switch(n){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Rk(r,e);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Ak(r,e);default:let s=r.body;nr({output:t,parsedBody:s,exceptionCtor:or,errorCode:n})}};var Uo=Pn;var Rk=async(t,e)=>{let r=Uo({}),n=t.body;n.AccessTier!==void 0&&(r.AccessTier=P(n.AccessTier)),n.StorageClass!==void 0&&(r.StorageClass=P(n.StorageClass));let s=new gs({$metadata:wl(t),...r});return ee(s,t.body)};var Ak=async(t,e)=>{let r=Uo({}),n=t.body,s=new Es({$metadata:wl(t),...r});return ee(s,t.body)};var wl=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),kk=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),Tk=(t,e)=>kk(t,e).then(r=>e.utf8Encoder(r)),Cl=t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),Nk=(t,e)=>Tk(t,e).then(r=>{if(r.length){let n=new qp.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let s=n.parse(r),o="#text",i=Object.keys(s)[0],a=s[i];return a[o]&&(a[i]=a[o],delete a[o]),Fo(a)}return{}}),Ok=async(t,e)=>{let r=await Nk(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Ik=(t,e)=>{if((e==null?void 0:e.Code)!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};var Gp=t=>({...t,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1});var Sl=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function vk(){return t=>async e=>{let{input:{Bucket:r}}=e;if(typeof r=="string"&&!Sl(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return t({...e})}}var Pk={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Hp=t=>({applyToStack:e=>{e.add(vk(),Pk)}});function Dk(t){return e=>async r=>{let n={...r.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let o of s){let i=n[o.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?t.utf8Decoder(i):new Uint8Array(i),d=t.base64Encoder(a),c=new t.md5;c.update(a),n={...n,[o.target]:d,[o.hash]:t.base64Encoder(await c.digest())}}}return e({...r,input:n})}}var Bk={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Vp=t=>({applyToStack:e=>{e.add(Dk(t),Bk)}});var ue;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.SHA1="SHA1",t.SHA256="SHA256"})(ue||(ue={}));var Wp;(function(t){t.HEADER="header",t.TRAILER="trailer"})(Wp||(Wp={}));var $o=[ue.CRC32,ue.CRC32C,ue.SHA1,ue.SHA256],Yp=[ue.CRC32,ue.CRC32C,ue.SHA1,ue.SHA256];var Xp=(t,{requestChecksumRequired:e,requestAlgorithmMember:r})=>{if(!r||!t[r])return e?ue.MD5:void 0;let n=t[r];if(!$o.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${$o}.`);return n};var ra=t=>t===ue.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`;var Qp=(t,e)=>{let r=t.toLowerCase();for(let n of Object.keys(e))if(r===n.toLowerCase())return!0;return!1};var xs=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";var na=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!xs(t);var Cy=St(Ko()),wy=St(Bl());var la=(t,e)=>({[ue.MD5]:e.md5,[ue.CRC32]:Cy.AwsCrc32,[ue.CRC32C]:wy.AwsCrc32c,[ue.SHA1]:e.sha1,[ue.SHA256]:e.sha256})[t];var fa=require("buffer"),ir=(t,e=0,r=t.byteLength-e)=>{if(!xs(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return fa.Buffer.from(t,e,r)},Cs=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?fa.Buffer.from(t,e):fa.Buffer.from(t)};var Mt=t=>{let e=Cs(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Ge=t=>typeof t=="string"?Mt(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t);var Ur=t=>ir(t.buffer,t.byteOffset,t.byteLength).toString("utf8");var ua=(t,e)=>{let r=new t;return r.update(Ge(e||"")),r.digest()};var Sy=async(t,{streamHasher:e,checksumAlgorithmFn:r,base64Encoder:n})=>{let s=na(t)?e(r,t):ua(r,t);return n(await s)};var by=(t=[])=>{let e=[];for(let r of Yp)!t.includes(r)||!$o.includes(r)||e.push(r);return e};var _y=async(t,{config:e,responseAlgorithms:r})=>{let n=by(r),{body:s,headers:o}=t;for(let i of n){let a=ra(i),d=o[a];if(d){let c=la(i,e),{streamHasher:l,base64Encoder:u}=e,h=await Sy(s,{streamHasher:l,checksumAlgorithmFn:c,base64Encoder:u});if(h===d)break;throw new Error(`Checksum mismatch: expected "${h}" but received "${d}" in response header "${a}".`)}}};var Ry=(t,e)=>r=>async n=>{if(!H.isInstance(n.request))return r(n);let{request:s}=n,{body:o,headers:i}=s,{base64Encoder:a,streamHasher:d}=t,{input:c,requestChecksumRequired:l,requestAlgorithmMember:u}=e,h=Xp(c,{requestChecksumRequired:l,requestAlgorithmMember:u}),x=o,S=i;if(h){let Nt=ra(h),Re=la(h,t);if(na(o)){let{getAwsChunkedEncodingStream:Nn,bodyLengthChecker:No}=t;x=Nn(o,{base64Encoder:a,bodyLengthChecker:No,checksumLocationName:Nt,checksumAlgorithmFn:Re,streamHasher:d}),S={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Nt},delete S["content-length"]}else if(!Qp(Nt,i)){let Nn=await ua(Re,o);S={...i,[Nt]:a(Nn)}}}let b=await r({...n,request:{...s,headers:S,body:x}}),{requestValidationModeMember:R,responseAlgorithms:K}=e;return R&&c[R]==="ENABLED"&&_y(b.response,{config:t,responseAlgorithms:K}),b};var HT={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Ay=(t,e)=>({applyToStack:r=>{r.add(Ry(t,e),HT)}});var ws=class extends at{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(It(r,this.serialize,this.deserialize)),this.middlewareStack.use(vt(r,ws.getEndpointParameterInstructions())),this.middlewareStack.use(Vp(r)),this.middlewareStack.use(Ay(r,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:$p,outputFilterSensitiveLog:Up},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return jp(e,r)}deserialize(e,r){return Kp(e,r)}};var lt;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(lt||(lt={}));var Ft=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}};var VT="AWS_USE_DUALSTACK_ENDPOINT",WT="use_dualstack_endpoint";var $r={environmentVariableSelector:t=>Ft(t,VT,lt.ENV),configFileSelector:t=>Ft(t,WT,lt.CONFIG),default:!1};var YT="AWS_USE_FIPS_ENDPOINT",XT="use_fips_endpoint";var qr={environmentVariableSelector:t=>Ft(t,YT,lt.ENV),configFileSelector:t=>Ft(t,XT,lt.CONFIG),default:!1};var QT="AWS_REGION",ZT="region",Lt={environmentVariableSelector:t=>t[QT],configFileSelector:t=>t[ZT],default:()=>{throw new Error("Region is missing")}},jr={preferredFile:"credentials"};var ha=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips"));var Ml=t=>ha(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t;var Kr=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return Ml(e);let n=await e();return Ml(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return ha(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var ky=t=>({...t,eventStreamMarshaller:t.eventStreamSerdeProvider(t)});var Ty="content-length";function JT(t){return e=>async r=>{let n=r.request;if(H.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(Ty)===-1)try{let i=t(s);n.headers={...n.headers,[Ty]:String(i)}}catch{}}return e({...r,request:n})}}var eN={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Gr=t=>({applyToStack:e=>{e.add(JT(t.bodyLengthChecker),eN)}});function tN(t){return e=>async r=>{let{request:n}=r;return H.isInstance(n)&&n.body&&t.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),e({...r,request:n})}}var rN={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Ny=t=>({applyToStack:e=>{e.add(tN(t),rN)}});var nN=t=>e=>async r=>{if(!H.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},sN={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Hr=t=>({applyToStack:e=>{e.add(nN(t),sN)}});var oN=()=>(t,e)=>async r=>{var n,s;try{let o=await t(r),{clientName:i,commandName:a,logger:d,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=c,h=l??e.inputFilterSensitiveLog,x=u??e.outputFilterSensitiveLog,{$metadata:S,...b}=o.output;return(n=d==null?void 0:d.info)==null||n.call(d,{clientName:i,commandName:a,input:h(r.input),output:x(b),metadata:S}),o}catch(o){let{clientName:i,commandName:a,logger:d,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:l}=c,u=l??e.inputFilterSensitiveLog;throw(s=d==null?void 0:d.error)==null||s.call(d,{clientName:i,commandName:a,input:u(r.input),error:o,metadata:o.$metadata}),o}},iN={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Vr=t=>({applyToStack:e=>{e.add(oN(),iN)}});var Oy="X-Amzn-Trace-Id",aN="AWS_LAMBDA_FUNCTION_NAME",cN="_X_AMZN_TRACE_ID",dN=t=>e=>async r=>{let{request:n}=r;if(!H.isInstance(n)||t.runtime!=="node"||n.headers.hasOwnProperty(Oy))return e(r);let s=process.env[aN],o=process.env[cN],i=a=>typeof a=="string"&&a.length>0;return i(s)&&i(o)&&(n.headers[Oy]=o),e({...r,request:n})},lN={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Wr=t=>({applyToStack:e=>{e.add(dN(t),lN)}});var zt;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(zt||(zt={}));var Bn=3,Ut="STANDARD";var Iy=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],vy=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Py=[500,502,503,504],Dy=["ECONNRESET","EPIPE","ETIMEDOUT"];var Ss=t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||Iy.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},ma=t=>{var e;return vy.includes(t.name)||Dy.includes((t==null?void 0:t.code)||"")||Py.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},By=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!ma(t)}return!1};var Ho=class{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(e==null?void 0:e.beta)??.7,this.minCapacity=(e==null?void 0:e.minCapacity)??1,this.minFillRate=(e==null?void 0:e.minFillRate)??.5,this.scaleConstant=(e==null?void 0:e.scaleConstant)??.4,this.smooth=(e==null?void 0:e.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Ss(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};var pa="amz-sdk-invocation-id",ya="amz-sdk-request";var My=()=>{let t=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}};var $y=(t,e,r,n)=>{let s=t,o=(n==null?void 0:n.retryCost)??5,i=(n==null?void 0:n.timeoutRetryCost)??10,a=(n==null?void 0:n.retryBackoffStrategy)??My(),d=t,c=Math.min(2e4,e),l,u=r??0,h=Re=>Re==="TRANSIENT"?i:o,x=()=>u,S=()=>c,b=()=>l,R=Re=>h(Re)<=d;return{getRetryCount:x,getRetryDelay:S,getLastRetryCost:b,hasRetryTokens:R,getRetryTokenCount:Re=>{let Nn=Re.errorType;if(!R(Nn))throw new Error("No retry token available");let No=h(Nn),f_=Nn==="THROTTLING"?500:100;a.setDelayBase(f_);let Kh=a.computeNextBackoffDelay(u);if(Re.retryAfterHint){let u_=Re.retryAfterHint.getTime()-Date.now();c=Math.max(u_||0,Kh)}else c=Kh;return u++,l=No,d-=No,No},releaseRetryTokens:Re=>{d+=Re??1,d=Math.min(d,s)}}};var _s=class{constructor(e){this.maxAttemptsProvider=e,this.mode=zt.STANDARD,this.retryToken=$y(500,100),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n))return e.getRetryTokenCount(r),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){let e;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Bn}`),Bn}}shouldRetry(e,r,n){return e.getRetryCount()<n&&e.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};var Ea=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=zt.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Ho,this.standardRetryStrategy=new _s(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};var Fl=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`);var jy="AWS_MAX_ATTEMPTS",Ky="max_attempts",Yr={environmentVariableSelector:t=>{let e=t[jy];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${jy} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Ky];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Ky} mast be a number, got "${e}"`);return r},default:Bn},Xr=t=>{let{retryStrategy:e}=t,r=ke(t.maxAttempts??Bn);return{...t,maxAttempts:r,retryStrategy:async()=>e||(await ke(t.retryMode)()===zt.ADAPTIVE?new Ea(r):new _s(r))}},fN="AWS_RETRY_MODE",uN="retry_mode",Qr={environmentVariableSelector:t=>t[fN],configFileSelector:t=>t[uN],default:Ut};Pd();var hN=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(mN(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,d=0,c=0,{request:l}=n;for(H.isInstance(l)&&(l.headers[pa]=Hi());;)try{H.isInstance(l)&&(l.headers[ya]=`attempt=${d+1}; max=${o}`);let{response:u,output:h}=await e(n);return s.recordSuccess(i),h.$metadata.attempts=d+1,h.$metadata.totalRetryDelay=c,{response:u,output:h}}catch(u){let h=pN(u);a=Fl(u);try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=d+1,a.$metadata.totalRetryDelay=c,a}d=i.getRetryCount();let x=i.getRetryDelay();c+=x,await new Promise(S=>setTimeout(S,x))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},mN=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",pN=t=>{let e={errorType:yN(t)},r=EN(t.$response);return r&&(e.retryAfterHint=r),e},yN=t=>Ss(t)?"THROTTLING":ma(t)?"TRANSIENT":By(t)?"SERVER_ERROR":"CLIENT_ERROR",gN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Zr=t=>({applyToStack:e=>{e.add(hN(t),gN)}}),EN=t=>{if(!_t.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var He=class extends Error{constructor(e,r=!0){super(e),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,He.prototype)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};var B=class extends He{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,B.prototype)}};var Ve=class extends He{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,Ve.prototype)}};function xa(...t){return()=>{let e=Promise.reject(new He("No providers in chain"));for(let r of t)e=e.catch(n=>{if(n!=null&&n.tryNextLink)return r();throw n});return e}}var Gy=t=>()=>Promise.resolve(t);var Jr=(t,e,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=t());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return e===void 0?async d=>((!o||d!=null&&d.forceRefresh)&&(n=await a()),n):async d=>((!o||d!=null&&d.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(e(n)&&await a(),n))};var Hy={},Ll={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Hy[t]=e,Ll[e]=t}function Vy(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in Ll)e[r/2]=Ll[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Te(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Hy[t[r]];return e}var Wy="X-Amz-Algorithm",Yy="X-Amz-Credential",zl="X-Amz-Date",Xy="X-Amz-SignedHeaders",Qy="X-Amz-Expires",Ul="X-Amz-Signature",$l="X-Amz-Security-Token";var ql="authorization",jl=zl.toLowerCase(),xN="date",Zy=[ql,jl,xN],Jy=Ul.toLowerCase(),Vo="x-amz-content-sha256",eg=$l.toLowerCase();var tg={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},rg=/^proxy-/,ng=/^sec-/;var Ca="AWS4-HMAC-SHA256";var sg="AWS4-HMAC-SHA256-PAYLOAD",og="UNSIGNED-PAYLOAD",ig=50,Kl="aws4_request",ag=60*60*24*7;var wa={},Gl=[],Sa=(t,e,r)=>`${t}/${e}/${r}/${Kl}`,dg=async(t,e,r,n,s)=>{let o=await cg(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${n}:${s}:${Te(o)}:${e.sessionToken}`;if(i in wa)return wa[i];for(Gl.push(i);Gl.length>ig;)delete wa[Gl.shift()];let a=`AWS4${e.secretAccessKey}`;for(let d of[r,n,s,Kl])a=await cg(t,a,d);return wa[i]=a};var cg=(t,e,r)=>{let n=new t(e);return n.update(Ge(r)),n.digest()};var ba=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in tg||e!=null&&e.has(o)||rg.test(o)||ng.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[s].trim().replace(/\s+/g," "))}return n};var $t=t=>encodeURIComponent(t).replace(/[!'()*]/g,CN),CN=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;var Hl=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t).sort()){if(n.toLowerCase()===Jy)continue;e.push(n);let s=t[n];typeof s=="string"?r[n]=`${$t(n)}=${$t(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).sort().reduce((o,i)=>o.concat([`${$t(n)}=${$t(i)}`]),[]).join("&"))}return e.map(n=>r[n]).filter(n=>n).join("&")};var Wo=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===Vo)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||xs(e)){let n=new r;return n.update(Ge(e)),Te(await n.digest())}return og};var lg=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1};var _a=({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?wN(e):void 0}),wN=t=>Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{});var Vl=(t,e={})=>{var s;let{headers:r,query:n={}}=typeof t.clone=="function"?t.clone():_a(t);for(let o of Object.keys(r)){let i=o.toLowerCase();i.slice(0,6)==="x-amz-"&&!((s=e.unhoistableHeaders)!=null&&s.has(i))&&(n[o]=r[o],delete r[o])}return{...t,headers:r,query:n}};var Ra=t=>{t=typeof t.clone=="function"?t.clone():_a(t);for(let e of Object.keys(t.headers))Zy.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t};var fg=t=>SN(t).toISOString().replace(/\.\d{3}Z$/,"Z"),SN=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;var Mn=class{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=ke(n),this.credentialProvider=ke(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,signingRegion:d,signingService:c}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=d??await this.regionProvider(),{longDate:h,shortDate:x}=Aa(n);if(s>ag)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let S=Sa(x,u,c??this.service),b=Vl(Ra(e),{unhoistableHeaders:i});l.sessionToken&&(b.query[$l]=l.sessionToken),b.query[Wy]=Ca,b.query[Yy]=`${l.accessKeyId}/${S}`,b.query[zl]=h,b.query[Qy]=s.toString(10);let R=ba(b,o,a);return b.query[Xy]=ug(R),b.query[Ul]=await this.getSignature(h,S,this.getSigningKey(l,u,x,c),this.createCanonicalRequest(b,R,await Wo(e,this.sha256))),b}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:d,longDate:c}=Aa(n),l=Sa(d,a,i??this.service),u=await Wo({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let x=Te(await h.digest()),S=[sg,c,l,s,x,u].join(`
`);return this.signString(S,{signingDate:n,signingRegion:a,signingService:i})}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=Aa(r),d=new this.sha256(await this.getSigningKey(o,i,a,s));return d.update(Ge(e)),Te(await d.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let d=o??await this.regionProvider(),c=Ra(e),{longDate:l,shortDate:u}=Aa(r),h=Sa(u,d,i??this.service);c.headers[jl]=l,a.sessionToken&&(c.headers[eg]=a.sessionToken);let x=await Wo(c,this.sha256);!lg(Vo,c.headers)&&this.applyChecksum&&(c.headers[Vo]=x);let S=ba(c,s,n),b=await this.getSignature(l,h,this.getSigningKey(a,d,u,i),this.createCanonicalRequest(c,S,x));return c.headers[ql]=`${Ca} Credential=${a.accessKeyId}/${h}, SignedHeaders=${ug(S)}, Signature=${b}`,c}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Hl(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n){let s=new this.sha256;s.update(Ge(n));let o=await s.digest();return`${Ca}
${e}
${r}
${Te(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e!=null&&e.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,s){let o=await this.createStringToSign(e,r,s),i=new this.sha256(await n);return i.update(Ge(o)),Te(await i.digest())}getSigningKey(e,r,n,s){return dg(this.sha256,e,n,r,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},Aa=t=>{let e=fg(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},ug=t=>Object.keys(t).sort().join(";");var bN=3e5,ka=t=>{let e=t.credentials?_N(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:n=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=ke(t.signer):t.regionInfoProvider?o=()=>ke(t.region)().then(async i=>[await t.regionInfoProvider(i,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:d,signingService:c}=i;t.signingRegion=t.signingRegion||d||a,t.signingName=t.signingName||c||t.serviceId;let l={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},u=t.signerConstructor||Mn;return new u(l)}):o=async i=>{i=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await ke(t.region)(),properties:{}},i);let a=i.signingRegion,d=i.signingName;t.signingRegion=t.signingRegion||a,t.signingName=t.signingName||d||t.serviceId;let c={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},l=t.signerConstructor||Mn;return new l(c)},{...t,systemClockOffset:n,signingEscapePath:r,credentials:e,signer:o}};var _N=t=>typeof t=="function"?Jr(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<bN,e=>e.expiration!==void 0):ke(t);var Ta=t=>new Date(Date.now()+t);var hg=(t,e)=>Math.abs(Ta(e).getTime()-t)>=3e5;var Wl=(t,e)=>{let r=Date.parse(t);return hg(r,e)?r-Date.now():e};var RN=t=>(e,r)=>async function(n){var c,l,u,h;if(!H.isInstance(n.request))return e(n);let s=(u=(l=(c=r.endpointV2)==null?void 0:c.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],o=(s==null?void 0:s.name)==="sigv4a"?(h=s==null?void 0:s.signingRegionSet)==null?void 0:h.join(","):void 0,i=await t.signer(s),a=await e({...n,request:await i.sign(n.request,{signingDate:Ta(t.systemClockOffset),signingRegion:o||r.signing_region,signingService:r.signing_service})}).catch(x=>{let S=x.ServerTime??mg(x.$response);throw S&&(t.systemClockOffset=Wl(S,t.systemClockOffset)),x}),d=mg(a.response);return d&&(t.systemClockOffset=Wl(d,t.systemClockOffset)),a},mg=t=>{var e,r;return _t.isInstance(t)?((e=t.headers)==null?void 0:e.date)??((r=t.headers)==null?void 0:r.Date):void 0},AN={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Na=t=>({applyToStack:e=>{e.addRelativeTo(RN(t),AN)}});function en(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}var Yl={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var pg=Yl,yg="",TN=t=>{let{partitions:e}=pg;for(let n of e){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(let n of e){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},gg=(t,e="")=>{pg=t,yg=e},NN=()=>{gg(Yl,"")},Xl=()=>yg;var ar="endpoints";function ft(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ft(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ft).join(", ")})`:JSON.stringify(t,null,2)}var ie=class extends Error{constructor(e){super(e),this.name="EndpointError"}};var ef={};is(ef,{aws:()=>Ql,booleanEquals:()=>PN,getAttr:()=>Zl,isSet:()=>DN,isValidHostLabel:()=>Ia,not:()=>BN,parseURL:()=>MN,stringEquals:()=>FN,substring:()=>LN,uriEncode:()=>zN});var Ql={};is(Ql,{getUserAgentPrefix:()=>Xl,isVirtualHostableS3Bucket:()=>Eg,parseArn:()=>vN,partition:()=>TN,setPartitionInfo:()=>gg,useDefaultPartitionInfo:()=>NN});var ON=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Oa=t=>ON.test(t)||t.startsWith("[")&&t.endsWith("]");var IN=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ia=(t,e=!1)=>{if(!e)return IN.test(t);let r=t.split(".");for(let n of r)if(!Ia(n))return!1;return!0};var Eg=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Eg(r))return!1;return!0}return!(!Ia(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Oa(t))};var vN=t=>{let e=t.split(":");if(e.length<6)return null;let[r,n,s,o,i,...a]=e;return r!=="arn"||n===""||s===""||a[0]===""?null:{partition:n,service:s,region:o,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var PN=(t,e)=>t===e;var xg=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new ie(`Path: '${t}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new ie(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r};var Zl=(t,e)=>xg(e).reduce((r,n)=>{if(typeof r!="object")throw new ie(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t);var DN=t=>t!=null;var BN=t=>!t;var Cg;(function(t){t.HEADER="header",t.QUERY="query"})(Cg||(Cg={}));var wg;(function(t){t.AAAA="AAAA",t.A="A"})(wg||(wg={}));var Rs;(function(t){t.HTTP="http",t.HTTPS="https"})(Rs||(Rs={}));var Sg;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(Sg||(Sg={}));var Jl={[Rs.HTTP]:80,[Rs.HTTPS]:443},MN=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:x,protocol:S="",path:b="",query:R={}}=t,K=new URL(`${S}//${h}${x?`:${x}`:""}${b}`);return K.search=Object.entries(R).map(([Nt,Re])=>`${Nt}=${Re}`).join("&"),K}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;let d=i.slice(0,-1);if(!Object.values(Rs).includes(d))return null;let c=Oa(s),l=r.includes(`${n}:${Jl[d]}`)||typeof t=="string"&&t.includes(`${n}:${Jl[d]}`),u=`${n}${l?`:${Jl[d]}`:""}`;return{scheme:d,authority:u,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:c}};var FN=(t,e)=>t===e;var LN=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r);var zN=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`);var va=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let i=t.indexOf("}",o);if(i===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(o+1,i)),s=i+2);let a=t.substring(o+1,i);if(a.includes("#")){let[d,c]=a.split("#");r.push(Zl(n[d],c))}else r.push(n[a]);s=i+1}return r.join("")};var bg=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t];var tn=(t,e,r)=>{if(typeof t=="string")return va(t,r);if(t.fn)return Pa(t,r);if(t.ref)return bg(t,r);throw new ie(`'${e}': ${String(t)} is not a string, function or reference.`)};var Pa=({fn:t,argv:e},r)=>{let n=e.map(s=>["boolean","number"].includes(typeof s)?s:tn(s,"arg",r));return t.split(".").reduce((s,o)=>s[o],ef)(...n)};var _g=({assign:t,...e},r)=>{var s,o;if(t&&t in r.referenceRecord)throw new ie(`'${t}' is already defined in Reference Record.`);let n=Pa(e,r);return(o=(s=r.logger)==null?void 0:s.debug)==null||o.call(s,ar,`evaluateCondition: ${ft(e)} = ${ft(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}};var As=(t=[],e)=>{var n,s;let r={};for(let o of t){let{result:i,toAssign:a}=_g(o,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(s=(n=e.logger)==null?void 0:n.debug)==null||s.call(n,ar,`assign: ${a.name} := ${ft(a.value)}`))}return{result:!0,referenceRecord:r}};var Rg=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=tn(o,"Header value entry",e);if(typeof i!="string")throw new ie(`Header '${n}' value '${i}' is not a string`);return i})}),{});var tf=(t,e)=>{if(Array.isArray(t))return t.map(r=>tf(r,e));switch(typeof t){case"string":return va(t,e);case"object":if(t===null)throw new ie(`Unexpected endpoint property: ${t}`);return Da(t,e);case"boolean":return t;default:throw new ie(`Unexpected endpoint property type: ${typeof t}`)}};var Da=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:tf(s,e)}),{});var Ag=(t,e)=>{let r=tn(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ie(`Endpoint URL must be a string, got ${typeof r}`)};var kg=(t,e)=>{var l,u;let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:o}=As(r,e);if(!s)return;let i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:d,headers:c}=n;return(u=(l=e.logger)==null?void 0:l.debug)==null||u.call(l,ar,`Resolving endpoint from template: ${ft(n)}`),{...c!=null&&{headers:Rg(c,i)},...d!=null&&{properties:Da(d,i)},url:Ag(a,i)}};var Tg=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:o}=As(r,e);if(s)throw new ie(tn(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))};var Ng=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:o}=As(r,e);if(s)return Ba(n,{...e,referenceRecord:{...e.referenceRecord,...o}})};var Ba=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=kg(r,e);if(n)return n}else if(r.type==="error")Tg(r,e);else if(r.type==="tree"){let n=Ng(r,e);if(n)return n}else throw new ie(`Unknown endpoint rule: ${r}`);throw new ie("Rules evaluation failed")};var rn=(t,e)=>{var c,l,u,h,x;let{endpointParams:r,logger:n}=e,{parameters:s,rules:o}=t;(l=(c=e.logger)==null?void 0:c.debug)==null||l.call(c,ar,`Initial EndpointParams: ${ft(r)}`);let i=Object.entries(s).filter(([,S])=>S.default!=null).map(([S,b])=>[S,b.default]);if(i.length>0)for(let[S,b]of i)r[S]=r[S]??b;let a=Object.entries(s).filter(([,S])=>S.required).map(([S])=>S);for(let S of a)if(r[S]==null)throw new ie(`Missing required parameter: '${S}'`);let d=Ba(o,{endpointParams:r,logger:n,referenceRecord:{}});if((u=e.endpointParams)!=null&&u.Endpoint)try{let S=new URL(e.endpointParams.Endpoint),{protocol:b,port:R}=S;d.url.protocol=b,d.url.port=R}catch{}return(x=(h=e.logger)==null?void 0:h.debug)==null||x.call(h,ar,`Resolved endpoint: ${ft(d)}`),d};var rf="user-agent",Ma="x-amz-user-agent",nf=" ",Og=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var UN=t=>(e,r)=>async n=>{var h,x;let{request:s}=n;if(!H.isInstance(s))return e(n);let{headers:o}=s,i=((h=r==null?void 0:r.userAgent)==null?void 0:h.map(sf))||[],a=(await t.defaultUserAgentProvider()).map(sf),d=((x=t==null?void 0:t.customUserAgent)==null?void 0:x.map(sf))||[],c=Xl(),l=(c?[c]:[]).concat([...a,...i,...d]).join(nf),u=[...a.filter(S=>S.startsWith("aws-sdk-")),...d].join(nf);return t.runtime!=="browser"?(u&&(o[Ma]=o[Ma]?`${o[rf]} ${u}`:u),o[rf]=l):o[Ma]=l,e({...n,request:s})},sf=([t,e])=>{let r=t.indexOf("/"),n=t.substring(0,r),s=t.substring(r+1);return n==="api"&&(s=s.toLowerCase()),[n,s,e].filter(o=>o&&o.length>0).map(o=>o==null?void 0:o.replace(Og,"_")).join("/")},$N={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},nn=t=>({applyToStack:e=>{e.add(UN(t),$N)}});var Ig=t=>({...t,useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var vg={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.312.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/eventstream-serde-browser":"3.310.0","@aws-sdk/eventstream-serde-config-resolver":"3.310.0","@aws-sdk/eventstream-serde-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-blob-browser":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/hash-stream-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/md5-js":"3.310.0","@aws-sdk/middleware-bucket-endpoint":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-expect-continue":"3.310.0","@aws-sdk/middleware-flexible-checksums":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-location-constraint":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-s3":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-ssec":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/signature-v4-multi-region":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-stream-browser":"3.310.0","@aws-sdk/util-stream-node":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0","@aws-sdk/xml-builder":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var Pg=St(pl());var Ue=class extends dt{constructor(e){super(e),Object.setPrototypeOf(this,Ue.prototype)}};var ks=class extends Ue{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ks.prototype)}},Ts=class extends Ue{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Ts.prototype)}},Ns=class extends Ue{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,Ns.prototype)}},Os=class extends Ue{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,Os.prototype)}},Is=class extends Ue{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,Is.prototype)}},vs=class extends Ue{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,vs.prototype)}},Ps=class extends Ue{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Ps.prototype)}};var Dg=async(t,e)=>{let r=Hg,n;return n=Wg({...WN(t,e),Action:"AssumeRole",Version:"2011-06-15"}),Gg(e,r,"/",void 0,n)};var Bg=async(t,e)=>{let r=Hg,n;return n=Wg({...YN(t,e),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Gg(e,r,"/",void 0,n)};var Mg=async(t,e)=>{if(t.statusCode>=300)return jN(t,e);let r=await of(t.body,e),n={};n=eO(r.AssumeRoleResult,e);let s={$metadata:cr(t),...n};return Promise.resolve(s)},jN=async(t,e)=>{let r={...t,body:await Vg(t.body,e)},n=Yg(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Lg(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await zg(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Ug(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await $g(r,e);default:let s=r.body;nr({output:t,parsedBody:s.Error,exceptionCtor:Ue,errorCode:n})}};var Fg=async(t,e)=>{if(t.statusCode>=300)return KN(t,e);let r=await of(t.body,e),n={};n=tO(r.AssumeRoleWithWebIdentityResult,e);let s={$metadata:cr(t),...n};return Promise.resolve(s)},KN=async(t,e)=>{let r={...t,body:await Vg(t.body,e)},n=Yg(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Lg(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await GN(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await HN(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await VN(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await zg(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Ug(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await $g(r,e);default:let s=r.body;nr({output:t,parsedBody:s.Error,exceptionCtor:Ue,errorCode:n})}};var Lg=async(t,e)=>{let r=t.body,n=rO(r.Error,e),s=new ks({$metadata:cr(t),...n});return ee(s,r)},GN=async(t,e)=>{let r=t.body,n=nO(r.Error,e),s=new Ps({$metadata:cr(t),...n});return ee(s,r)},HN=async(t,e)=>{let r=t.body,n=sO(r.Error,e),s=new Is({$metadata:cr(t),...n});return ee(s,r)};var VN=async(t,e)=>{let r=t.body,n=oO(r.Error,e),s=new vs({$metadata:cr(t),...n});return ee(s,r)},zg=async(t,e)=>{let r=t.body,n=iO(r.Error,e),s=new Ts({$metadata:cr(t),...n});return ee(s,r)},Ug=async(t,e)=>{let r=t.body,n=aO(r.Error,e),s=new Ns({$metadata:cr(t),...n});return ee(s,r)},$g=async(t,e)=>{let r=t.body,n=cO(r.Error,e),s=new Os({$metadata:cr(t),...n});return ee(s,r)},WN=(t,e)=>{var n,s,o;let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.PolicyArns!=null){let i=qg(t.PolicyArns,e);((n=t.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([a,d])=>{let c=`PolicyArns.${a}`;r[c]=d})}if(t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=JN(t.Tags,e);((s=t.Tags)==null?void 0:s.length)===0&&(r.Tags=[]),Object.entries(i).forEach(([a,d])=>{let c=`Tags.${a}`;r[c]=d})}if(t.TransitiveTagKeys!=null){let i=ZN(t.TransitiveTagKeys,e);((o=t.TransitiveTagKeys)==null?void 0:o.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([a,d])=>{let c=`TransitiveTagKeys.${a}`;r[c]=d})}return t.ExternalId!=null&&(r.ExternalId=t.ExternalId),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),t.SourceIdentity!=null&&(r.SourceIdentity=t.SourceIdentity),r};var YN=(t,e)=>{var n;let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.WebIdentityToken!=null&&(r.WebIdentityToken=t.WebIdentityToken),t.ProviderId!=null&&(r.ProviderId=t.ProviderId),t.PolicyArns!=null){let s=qg(t.PolicyArns,e);((n=t.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([o,i])=>{let a=`PolicyArns.${o}`;r[a]=i})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r};var qg=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=XN(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},XN=(t,e)=>{let r={};return t.arn!=null&&(r.arn=t.arn),r},QN=(t,e)=>{let r={};return t.Key!=null&&(r.Key=t.Key),t.Value!=null&&(r.Value=t.Value),r},ZN=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},JN=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=QN(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},jg=(t,e)=>{let r={};return t.AssumedRoleId!==void 0&&(r.AssumedRoleId=P(t.AssumedRoleId)),t.Arn!==void 0&&(r.Arn=P(t.Arn)),r},eO=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=Kg(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=jg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=vn(t.PackedPolicySize)),t.SourceIdentity!==void 0&&(r.SourceIdentity=P(t.SourceIdentity)),r};var tO=(t,e)=>{let r={};return t.Credentials!==void 0&&(r.Credentials=Kg(t.Credentials,e)),t.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=P(t.SubjectFromWebIdentityToken)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=jg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=vn(t.PackedPolicySize)),t.Provider!==void 0&&(r.Provider=P(t.Provider)),t.Audience!==void 0&&(r.Audience=P(t.Audience)),t.SourceIdentity!==void 0&&(r.SourceIdentity=P(t.SourceIdentity)),r},Kg=(t,e)=>{let r={};return t.AccessKeyId!==void 0&&(r.AccessKeyId=P(t.AccessKeyId)),t.SecretAccessKey!==void 0&&(r.SecretAccessKey=P(t.SecretAccessKey)),t.SessionToken!==void 0&&(r.SessionToken=P(t.SessionToken)),t.Expiration!==void 0&&(r.Expiration=ct(ta(t.Expiration))),r};var rO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r};var nO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r},sO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r};var oO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r},iO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r},aO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r},cO=(t,e)=>{let r={};return t.message!==void 0&&(r.message=P(t.message)),r},cr=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),dO=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),lO=(t,e)=>dO(t,e).then(r=>e.utf8Encoder(r)),Gg=async(t,e,r,n,s)=>{let{hostname:o,protocol:i="https",port:a,path:d}=await t.endpoint(),c={protocol:i,hostname:o,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:e};return n!==void 0&&(c.hostname=n),s!==void 0&&(c.body=s),new H(c)},Hg={"content-type":"application/x-www-form-urlencoded"},of=(t,e)=>lO(t,e).then(r=>{if(r.length){let n=new Pg.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let s=n.parse(r),o="#text",i=Object.keys(s)[0],a=s[i];return a[o]&&(a[i]=a[o],delete a[o]),Fo(a)}return{}}),Vg=async(t,e)=>{let r=await of(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Wg=t=>Object.entries(t).map(([e,r])=>ys(e)+"="+ys(r)).join("&"),Yg=(t,e)=>{var r;if(((r=e.Error)==null?void 0:r.Code)!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"};var Ds=class extends at{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(It(r,this.serialize,this.deserialize)),this.middlewareStack.use(vt(r,Ds.getEndpointParameterInstructions())),this.middlewareStack.use(Na(r));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return Dg(e,r)}deserialize(e,r){return Mg(e,r)}};var Bs=class extends at{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(It(r,this.serialize,this.deserialize)),this.middlewareStack.use(vt(r,Bs.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return Bg(e,r)}deserialize(e,r){return Fg(e,r)}};var Xg=(t,{stsClientCtor:e})=>ka({...t,stsClientCtor:e});var Qg=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Zg={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Jg="us-east-1",eE=t=>typeof t!="function"?t===void 0?Jg:t:async()=>{try{return await t()}catch{return Jg}},af=(t,e)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:a,region:d,requestHandler:c}=t;r=new e({logger:a,credentialDefaultProvider:()=>async()=>n,region:eE(d||t.region),...c?{requestHandler:c}:{}})}let{Credentials:i}=await r.send(new Ds(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},cf=(t,e)=>{let r;return async n=>{if(!r){let{logger:o,region:i,requestHandler:a}=t;r=new e({logger:o,region:eE(i||t.region),...a?{requestHandler:a}:{}})}let{Credentials:s}=await r.send(new Bs(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}},tE=t=>e=>t({roleAssumer:af(e,e.stsClientCtor),roleAssumerWithWebIdentity:cf(e,e.stsClientCtor),...e});var uO="AWS_ACCESS_KEY_ID",hO="AWS_SECRET_ACCESS_KEY",mO="AWS_SESSION_TOKEN",pO="AWS_CREDENTIAL_EXPIRATION",Fa=()=>async()=>{let t=process.env[uO],e=process.env[hO],r=process.env[mO],n=process.env[pO];if(t&&e)return{accessKeyId:t,secretAccessKey:e,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new B("Unable to find environment variable credentials.")};var rE=require("os"),nE=require("path"),Ms=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${nE.sep}`}=process.env;return t||e||(r?`${n}${r}`:(0,rE.homedir)())};var df="AWS_PROFILE",yO="default",ut=t=>t.profile||process.env[df]||yO;var sE=require("crypto"),oE=require("path");var La=t=>{let r=(0,sE.createHash)("sha1").update(t).digest("hex");return(0,oE.join)(Ms(),".aws","sso","cache",`${r}.json`)};var iE=require("fs");var{readFile:gO}=iE.promises,za=async t=>{let e=La(t),r=await gO(e,"utf8");return JSON.parse(r)};var aE=require("path");var EO="AWS_CONFIG_FILE",Ua=()=>process.env[EO]||(0,aE.join)(Ms(),".aws","config");var cE=require("path");var xO="AWS_SHARED_CREDENTIALS_FILE",dE=()=>process.env[xO]||(0,cE.join)(Ms(),".aws","credentials");var lE=/^profile\s(["'])?([^\1]+)\1$/,fE=t=>Object.entries(t).filter(([e])=>lE.test(e)).reduce((e,[r,n])=>({...e,[lE.exec(r)[2]]:n}),{...t.default&&{default:t.default}});var CO=["__proto__","profile __proto__"],Yo=t=>{let e={},r;for(let n of t.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),CO.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let o=n.indexOf("="),i=0,a=n.length-1;if(o!==-1&&o!==i&&o!==a){let[c,l]=[n.substring(0,o).trim(),n.substring(o+1).trim()];e[r]=e[r]||{},e[r][c]=l}}return e};var uE=require("fs"),{readFile:wO}=uE.promises,lf={},Xo=(t,e)=>((!lf[t]||e!=null&&e.ignoreCache)&&(lf[t]=wO(t,"utf8")),lf[t]);var hE=()=>({}),$a=async(t={})=>{let{filepath:e=dE(),configFilepath:r=Ua()}=t,n=await Promise.all([Xo(r,{ignoreCache:t.ignoreCache}).then(Yo).then(fE).catch(hE),Xo(e,{ignoreCache:t.ignoreCache}).then(Yo).catch(hE)]);return{configFile:n[0],credentialsFile:n[1]}};var mE=/^sso-session\s(["'])?([^\1]+)\1$/,pE=t=>Object.entries(t).filter(([e])=>mE.test(e)).reduce((e,[r,n])=>({...e,[mE.exec(r)[2]]:n}),{});var SO=()=>({}),qa=async(t={})=>Xo(t.configFilepath??Ua()).then(Yo).then(pE).catch(SO);var yE=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e};var sn=async t=>{let e=await $a(t);return yE(e.configFile,e.credentialsFile)};var CE=require("url");var gE=require("buffer"),EE=require("http");function dr(t){return new Promise((e,r)=>{var s;let n=(0,EE.request)({method:"GET",...t,hostname:(s=t.hostname)==null?void 0:s.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new He("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new He("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:i=400}=o;(i<200||300<=i)&&(r(Object.assign(new He("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];o.on("data",d=>{a.push(d)}),o.on("end",()=>{e(gE.Buffer.concat(a)),n.destroy()})}),n.end()})}var ja=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",Ka=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration)});var Ga=({maxRetries:t=0,timeout:e=1e3})=>({maxRetries:t,timeout:e});var Qo=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r};var Zo="AWS_CONTAINER_CREDENTIALS_FULL_URI",Jo="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",xE="AWS_CONTAINER_AUTHORIZATION_TOKEN",Ha=(t={})=>{let{timeout:e,maxRetries:r}=Ga(t);return()=>Qo(async()=>{let n=await kO(),s=JSON.parse(await bO(e,n));if(!ja(s))throw new B("Invalid response received from instance metadata service.");return Ka(s)},r)},bO=async(t,e)=>(process.env[xE]&&(e.headers={...e.headers,Authorization:process.env[xE]}),(await dr({...e,timeout:t})).toString()),_O="169.254.170.2",RO={localhost:!0,"127.0.0.1":!0},AO={"http:":!0,"https:":!0},kO=async()=>{if(process.env[Jo])return{hostname:_O,path:process.env[Jo]};if(process.env[Zo]){let t=(0,CE.parse)(process.env[Zo]);if(!t.hostname||!(t.hostname in RO))throw new B(`${t.hostname} is not a valid container metadata service hostname`,!1);if(!t.protocol||!(t.protocol in AO))throw new B(`${t.protocol} is not a valid container metadata service protocol`,!1);return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new B(`The container metadata credential provider cannot be used unless the ${Jo} or ${Zo} environment variable is set`,!1)};var wE=t=>async()=>{try{let e=t(process.env);if(e===void 0)throw new Error;return e}catch(e){throw new B(e.message||`Cannot load config from environment variables with getter: ${t}`)}};var SE=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=ut(r),{configFile:s,credentialsFile:o}=await $a(r),i=o[n]||{},a=s[n]||{},d=e==="config"?{...i,...a}:{...a,...i};try{let c=t(d);if(c===void 0)throw new Error;return c}catch(c){throw new B(c.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${t}`)}};var TO=t=>typeof t=="function",bE=t=>TO(t)?async()=>await t():Gy(t);var V=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>Jr(xa(wE(t),SE(e,n),bE(r)));var ei;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(ei||(ei={}));var NO="AWS_EC2_METADATA_SERVICE_ENDPOINT",OO="ec2_metadata_service_endpoint",_E={environmentVariableSelector:t=>t[NO],configFileSelector:t=>t[OO],default:void 0};var on;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(on||(on={}));var IO="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",vO="ec2_metadata_service_endpoint_mode",RE={environmentVariableSelector:t=>t[IO],configFileSelector:t=>t[vO],default:on.IPv4};var ti=async()=>je(await PO()||await DO()),PO=async()=>V(_E)(),DO=async()=>{let t=await V(RE)();switch(t){case on.IPv4:return ei.IPv4;case on.IPv6:return ei.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(on)}`)}};var BO="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",ff=(t,e)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);e.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+BO);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}};var AE=(t,e={})=>{let r=(e==null?void 0:e.logger)||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=ff(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=ff(n,r);else throw o}return n=s,s}};var kE="/latest/meta-data/iam/security-credentials/",MO="/latest/api/token",Va=(t={})=>AE(FO(t),{logger:t.logger}),FO=t=>{let e=!1,{timeout:r,maxRetries:n}=Ga(t),s=async(o,i)=>{let a=(await Qo(async()=>{let d;try{d=await zO(i)}catch(c){throw c.statusCode===401&&(e=!1),c}return d},o)).trim();return Qo(async()=>{let d;try{d=await UO(a,i)}catch(c){throw c.statusCode===401&&(e=!1),c}return d},o)};return async()=>{let o=await ti();if(e)return s(n,{...o,timeout:r});{let i;try{i=(await LO({...o,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(e=!0),s(n,{...o,timeout:r})}return s(n,{...o,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},LO=async t=>dr({...t,path:MO,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),zO=async t=>(await dr({...t,path:kE})).toString(),UO=async(t,e)=>{let r=JSON.parse((await dr({...e,path:kE+t})).toString());if(!ja(r))throw new B("Invalid response received from instance metadata service.");return Ka(r)};var TE=(t,e)=>{let r={EcsContainer:Ha,Ec2InstanceMetadata:Va,Environment:Fa};if(t in r)return r[t]();throw new B(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var NE=t=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&($O(t)||qO(t)),$O=t=>typeof t.source_profile=="string"&&typeof t.credential_source>"u",qO=t=>typeof t.credential_source=="string"&&typeof t.source_profile>"u",OE=async(t,e,r,n={})=>{let s=e[t];if(!r.roleAssumer)throw new B(`Profile ${t} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=s;if(o&&o in n)throw new B(`Detected a cycle attempting to resolve credentials for profile ${ut(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=o?Wa(o,e,r,{...n,[o]:!0}):TE(s.credential_source,t)(),a={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id},{mfa_serial:d}=s;if(d){if(!r.mfaCodeProvider)throw new B(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=d,a.TokenCode=await r.mfaCodeProvider(d)}let c=await i;return r.roleAssumer(c,a)};var vE=require("child_process"),PE=require("util");var IE=(t,e)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let r=new Date;if(new Date(e.Expiration)<r)throw Error(`Profile ${t} credential_process returned expired credentials.`)}return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)}}};var DE=async(t,e)=>{let r=e[t];if(e[t]){let n=r.credential_process;if(n!==void 0){let s=(0,PE.promisify)(vE.exec);try{let{stdout:o}=await s(n),i;try{i=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return IE(t,i)}catch(o){throw new B(o.message)}}else throw new B(`Profile ${t} did not contain credential_process.`)}else throw new B(`Profile ${t} could not be found in shared credentials file.`)};var Ya=(t={})=>async()=>{let e=await sn(t);return DE(ut(t),e)};var BE=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",ME=async(t,e)=>Ya({...t,profile:e})();var ri=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string");var Rt=class extends dt{constructor(e){super(e),Object.setPrototypeOf(this,Rt.prototype)}};var Fs=class extends Rt{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Fs.prototype)}},Ls=class extends Rt{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Ls.prototype)}},zs=class extends Rt{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,zs.prototype)}},Us=class extends Rt{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Us.prototype)}},FE=t=>({...t,...t.accessToken&&{accessToken:In}}),jO=t=>({...t,...t.secretAccessKey&&{secretAccessKey:In},...t.sessionToken&&{sessionToken:In}}),LE=t=>({...t,...t.roleCredentials&&{roleCredentials:jO(t.roleCredentials)}});var zE=async(t,e)=>{let{hostname:r,protocol:n="https",port:s,path:o}=await e.endpoint(),i=Fn({},ZO,{"x-amz-sso_bearer_token":t.accessToken}),a=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,d=Fn({role_name:[,ct(t.roleName,"roleName")],account_id:[,ct(t.accountId,"accountId")]}),c;return new H({protocol:n,hostname:r,port:s,method:"GET",headers:i,path:a,query:d,body:c})};var UE=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return KO(t,e);let r=Fn({$metadata:ni(t)}),n=ct(Po(await $E(t.body,e)),"body");return n.roleCredentials!=null&&(r.roleCredentials=YO(n.roleCredentials,e)),r},KO=async(t,e)=>{let r={...t,body:await JO(t.body,e)},n=eI(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await GO(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await HO(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await VO(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await WO(r,e);default:let s=r.body;nr({output:t,parsedBody:s,exceptionCtor:Rt,errorCode:n})}};var Fn=Pn,GO=async(t,e)=>{let r=Fn({}),n=t.body;n.message!=null&&(r.message=P(n.message));let s=new Fs({$metadata:ni(t),...r});return ee(s,t.body)},HO=async(t,e)=>{let r=Fn({}),n=t.body;n.message!=null&&(r.message=P(n.message));let s=new Ls({$metadata:ni(t),...r});return ee(s,t.body)},VO=async(t,e)=>{let r=Fn({}),n=t.body;n.message!=null&&(r.message=P(n.message));let s=new zs({$metadata:ni(t),...r});return ee(s,t.body)},WO=async(t,e)=>{let r=Fn({}),n=t.body;n.message!=null&&(r.message=P(n.message));let s=new Us({$metadata:ni(t),...r});return ee(s,t.body)};var YO=(t,e)=>({accessKeyId:P(t.accessKeyId),expiration:ps(t.expiration),secretAccessKey:P(t.secretAccessKey),sessionToken:P(t.sessionToken)});var ni=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),XO=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),QO=(t,e)=>XO(t,e).then(r=>e.utf8Encoder(r)),ZO=t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),$E=(t,e)=>QO(t,e).then(r=>r.length?JSON.parse(r):{}),JO=async(t,e)=>{let r=await $E(t,e);return r.message=r.message??r.Message,r},eI=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)};var $s=class extends at{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(It(r,this.serialize,this.deserialize)),this.middlewareStack.use(vt(r,$s.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:FE,outputFilterSensitiveLog:LE},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return zE(e,r)}deserialize(e,r){return UE(e,r)}};var qE=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var jE={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var GE=require("buffer"),Xa=require("crypto"),ht=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(Ge(KE(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Xa.createHmac)(this.algorithmIdentifier,KE(this.secret)):(0,Xa.createHash)(this.algorithmIdentifier)}};function KE(t,e){return GE.Buffer.isBuffer(t)?t:typeof t=="string"?Cs(t,e):ArrayBuffer.isView(t)?ir(t.buffer,t.byteOffset,t.byteLength):ir(t)}function uf(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=$t(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${$t(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${$t(n)}`),e.push(s)}}return e.join("&")}var Qa=require("http"),Za=require("https");var HE=["ECONNRESET","EPIPE","ETIMEDOUT"];var hf=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e};var WE=require("stream");function mf(t,e){(e.headers.Expect||e.headers.expect)==="100-continue"?t.on("continue",()=>{VE(t,e.body)}):VE(t,e.body)}function VE(t,e){e instanceof WE.Readable?e.pipe(t):e?t.end(Buffer.from(e)):t.end()}var YE=0,qt=class{constructor(e){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,httpAgent:o,httpsAgent:i}=e||{},a=!0,d=50;return{connectionTimeout:n,socketTimeout:s,requestTimeout:r??n??s??YE,httpAgent:o||new Qa.Agent({keepAlive:a,maxSockets:d}),httpsAgent:i||new Za.Agent({keepAlive:a,maxSockets:d})}}destroy(){var e,r,n,s;(r=(e=this.config)==null?void 0:e.httpAgent)==null||r.destroy(),(s=(n=this.config)==null?void 0:n.httpsAgent)==null||s.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,s)=>{var u;if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let h=new Error("Request aborted");h.name="AbortError",s(h);return}let o=e.protocol==="https:",i=uf(e.query||{}),a={headers:e.headers,host:e.hostname,method:e.method,path:i?`${e.path}?${i}`:e.path,port:e.port,agent:o?this.config.httpsAgent:this.config.httpAgent},c=(o?Za.request:Qa.request)(a,h=>{let x=new _t({statusCode:h.statusCode||-1,headers:hf(h.headers),body:h});n({response:x})});c.on("error",h=>{HE.includes(h.code)?s(Object.assign(h,{name:"TimeoutError"})):s(h)});let l=((u=this.config)==null?void 0:u.requestTimeout)??YE;c.setTimeout(l,()=>{c.destroy(),s(Object.assign(new Error(`Connection timed out after ${l} ms`),{name:"TimeoutError"}))}),r&&(r.onabort=()=>{c.abort();let h=new Error("Request aborted");h.name="AbortError",s(h)}),mf(c,e)})}};var pf=class{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}};var XE=require("stream"),Ja=class extends XE.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,n){this.bufferedBytes.push(e),n()}};var jt=t=>new Promise((e,r)=>{let n=new Ja;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})});var ec=require("fs"),an=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.from(t).length;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,ec.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,ec.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)};var tc=require("os"),si=require("process");var QE=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var rI="AWS_SDK_UA_APP_ID",nI="sdk-ua-app-id",cn=({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],[`os/${(0,tc.platform)()}`,(0,tc.release)()],["lang/js"],["md/nodejs",`${si.versions.node}`]],n=QE();n&&r.push(n),t&&r.push([`api/${t}`,e]),si.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${si.env.AWS_EXECUTION_ENV}`]);let s=V({environmentVariableSelector:i=>i[rI],configFileSelector:i=>i[nI],default:void 0})(),o;return async()=>{if(!o){let i=await s;o=i?[...r,[`app/${i}`]]:[...r]}return o}};var sI=/^[A-Za-z0-9+/]*={0,2}$/,dn=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!sI.exec(t))throw new TypeError("Invalid base64 string.");let e=Cs(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};var ln=t=>ir(t.buffer,t.byteOffset,t.byteLength).toString("base64");var ox="required",lr="fn",fr="argv",qs="ref",yf="PartitionResult",Kt="tree",oi="error",ii="endpoint",ZE={[ox]:!1,type:"String"},JE={[ox]:!0,default:!1,type:"Boolean"},ix={[qs]:"Endpoint"},ax={[lr]:"booleanEquals",[fr]:[{[qs]:"UseFIPS"},!0]},cx={[lr]:"booleanEquals",[fr]:[{[qs]:"UseDualStack"},!0]},Gt={},ex={[lr]:"booleanEquals",[fr]:[!0,{[lr]:"getAttr",[fr]:[{[qs]:yf},"supportsFIPS"]}]},tx={[lr]:"booleanEquals",[fr]:[!0,{[lr]:"getAttr",[fr]:[{[qs]:yf},"supportsDualStack"]}]},rx=[ix],nx=[ax],sx=[cx],oI={version:"1.0",parameters:{Region:ZE,UseDualStack:JE,UseFIPS:JE,Endpoint:ZE},rules:[{conditions:[{[lr]:"aws.partition",[fr]:[{[qs]:"Region"}],assign:yf}],type:Kt,rules:[{conditions:[{[lr]:"isSet",[fr]:rx},{[lr]:"parseURL",[fr]:rx,assign:"url"}],type:Kt,rules:[{conditions:nx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:oi},{type:Kt,rules:[{conditions:sx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:oi},{endpoint:{url:ix,properties:Gt,headers:Gt},type:ii}]}]},{conditions:[ax,cx],type:Kt,rules:[{conditions:[ex,tx],type:Kt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gt,headers:Gt},type:ii}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:oi}]},{conditions:nx,type:Kt,rules:[{conditions:[ex],type:Kt,rules:[{type:Kt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Gt,headers:Gt},type:ii}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:oi}]},{conditions:sx,type:Kt,rules:[{conditions:[tx],type:Kt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gt,headers:Gt},type:ii}]},{error:"DualStack is enabled but this partition does not support DualStack",type:oi}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Gt,headers:Gt},type:ii}]}]},dx=oI;var lx=(t,e={})=>rn(dx,{endpointParams:t,logger:e.logger});var fx=t=>({apiVersion:"2019-06-10",base64Decoder:(t==null?void 0:t.base64Decoder)??dn,base64Encoder:(t==null?void 0:t.base64Encoder)??ln,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??lx,logger:(t==null?void 0:t.logger)??new Pt,serviceId:(t==null?void 0:t.serviceId)??"SSO",urlParser:(t==null?void 0:t.urlParser)??je,utf8Decoder:(t==null?void 0:t.utf8Decoder)??Mt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Ur});var ux="AWS_EXECUTION_ENV",gf="AWS_REGION",Ef="AWS_DEFAULT_REGION",hx="AWS_EC2_METADATA_DISABLED",mx=["in-region","cross-region","mobile","standard","legacy"],px="/latest/meta-data/placement/region";var iI="AWS_DEFAULTS_MODE",aI="defaults_mode",yx={environmentVariableSelector:t=>t[iI],configFileSelector:t=>t[aI],default:"legacy"};var fn=({region:t=V(Lt),defaultsMode:e=V(yx)}={})=>Jr(async()=>{let r=typeof e=="function"?await e():e;switch(r==null?void 0:r.toLowerCase()){case"auto":return cI(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${mx.join(", ")}, got ${r}`)}}),cI=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await dI();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},dI=async()=>{if(process.env[ux]&&(process.env[gf]||process.env[Ef]))return process.env[gf]??process.env[Ef];if(!process.env[hx])try{let t=await ti();return(await dr({...t,path:px})).toString()}catch{}};var gx=t=>{Mr(process.version);let e=fn(t),r=()=>e().then(Br),n=fx(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??an,defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??cn({serviceId:n.serviceId,clientVersion:jE.version}),maxAttempts:(t==null?void 0:t.maxAttempts)??V(Yr),region:(t==null?void 0:t.region)??V(Lt,jr),requestHandler:(t==null?void 0:t.requestHandler)??new qt(r),retryMode:(t==null?void 0:t.retryMode)??V({...Qr,default:async()=>(await r()).retryMode||Ut}),sha256:(t==null?void 0:t.sha256)??ht.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??jt,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??V($r),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??V(qr)}};var rc=class extends Dt{constructor(e){let r=gx(e),n=qE(r),s=Kr(n),o=Pr(s),i=Xr(o),a=i,d=en(a);super(d),this.config=d,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Gr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(nn(this.config))}destroy(){super.destroy()}};var js="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var we=class extends dt{constructor(e){super(e),Object.setPrototypeOf(this,we.prototype)}};var Ks=class extends we{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Ks.prototype),this.error=e.error,this.error_description=e.error_description}},Gs=class extends we{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Gs.prototype),this.error=e.error,this.error_description=e.error_description}},Hs=class extends we{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Hs.prototype),this.error=e.error,this.error_description=e.error_description}},Vs=class extends we{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Vs.prototype),this.error=e.error,this.error_description=e.error_description}},Ws=class extends we{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Ws.prototype),this.error=e.error,this.error_description=e.error_description}},Ys=class extends we{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Ys.prototype),this.error=e.error,this.error_description=e.error_description}},Xs=class extends we{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Xs.prototype),this.error=e.error,this.error_description=e.error_description}},Qs=class extends we{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Qs.prototype),this.error=e.error,this.error_description=e.error_description}},Zs=class extends we{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Zs.prototype),this.error=e.error,this.error_description=e.error_description}},Js=class extends we{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Js.prototype),this.error=e.error,this.error_description=e.error_description}},eo=class extends we{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,eo.prototype),this.error=e.error,this.error_description=e.error_description}};var Ex=async(t,e)=>{let{hostname:r,protocol:n="https",port:s,path:o}=await e.endpoint(),i={"content-type":"application/json"},a=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/token`,d;return d=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.code!=null&&{code:t.code},...t.deviceCode!=null&&{deviceCode:t.deviceCode},...t.grantType!=null&&{grantType:t.grantType},...t.redirectUri!=null&&{redirectUri:t.redirectUri},...t.refreshToken!=null&&{refreshToken:t.refreshToken},...t.scope!=null&&{scope:SI(t.scope,e)}}),new H({protocol:n,hostname:r,port:s,method:"POST",headers:i,path:a,body:d})};var xx=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lI(t,e);let r=mt({$metadata:pt(t)}),n=ct(Po(await Cx(t.body,e)),"body");return n.accessToken!=null&&(r.accessToken=P(n.accessToken)),n.expiresIn!=null&&(r.expiresIn=Zi(n.expiresIn)),n.idToken!=null&&(r.idToken=P(n.idToken)),n.refreshToken!=null&&(r.refreshToken=P(n.refreshToken)),n.tokenType!=null&&(r.tokenType=P(n.tokenType)),r},lI=async(t,e)=>{let r={...t,body:await RI(t.body,e)},n=AI(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await fI(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await uI(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await hI(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await mI(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await pI(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await yI(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await gI(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await EI(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await xI(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await CI(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await wI(r,e);default:let s=r.body;nr({output:t,parsedBody:s,exceptionCtor:we,errorCode:n})}};var mt=Pn,fI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Ks({$metadata:pt(t),...r});return ee(s,t.body)},uI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Gs({$metadata:pt(t),...r});return ee(s,t.body)},hI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Hs({$metadata:pt(t),...r});return ee(s,t.body)},mI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Vs({$metadata:pt(t),...r});return ee(s,t.body)},pI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Ws({$metadata:pt(t),...r});return ee(s,t.body)};var yI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Ys({$metadata:pt(t),...r});return ee(s,t.body)},gI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Xs({$metadata:pt(t),...r});return ee(s,t.body)},EI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Qs({$metadata:pt(t),...r});return ee(s,t.body)},xI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Zs({$metadata:pt(t),...r});return ee(s,t.body)},CI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new Js({$metadata:pt(t),...r});return ee(s,t.body)},wI=async(t,e)=>{let r=mt({}),n=t.body;n.error!=null&&(r.error=P(n.error)),n.error_description!=null&&(r.error_description=P(n.error_description));let s=new eo({$metadata:pt(t),...r});return ee(s,t.body)},SI=(t,e)=>t.filter(r=>r!=null).map(r=>r),pt=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),bI=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),_I=(t,e)=>bI(t,e).then(r=>e.utf8Encoder(r));var Cx=(t,e)=>_I(t,e).then(r=>r.length?JSON.parse(r):{}),RI=async(t,e)=>{let r=await Cx(t,e);return r.message=r.message??r.Message,r},AI=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)};var to=class extends at{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(e){super(),this.input=e}resolveMiddleware(e,r,n){this.middlewareStack.use(It(r,this.serialize,this.deserialize)),this.middlewareStack.use(vt(r,to.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,d={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:c}=r;return s.resolve(l=>c.handle(l.request,n||{}),d)}serialize(e,r){return Ex(e,r)}deserialize(e,r){return xx(e,r)}};var wx=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Sx={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Ox="required",ur="fn",hr="argv",ro="ref",Cf="PartitionResult",Ht="tree",ai="error",ci="endpoint",bx={[Ox]:!1,type:"String"},_x={[Ox]:!0,default:!1,type:"Boolean"},Ix={[ro]:"Endpoint"},vx={[ur]:"booleanEquals",[hr]:[{[ro]:"UseFIPS"},!0]},Px={[ur]:"booleanEquals",[hr]:[{[ro]:"UseDualStack"},!0]},Vt={},Rx={[ur]:"booleanEquals",[hr]:[!0,{[ur]:"getAttr",[hr]:[{[ro]:Cf},"supportsFIPS"]}]},Ax={[ur]:"booleanEquals",[hr]:[!0,{[ur]:"getAttr",[hr]:[{[ro]:Cf},"supportsDualStack"]}]},kx=[Ix],Tx=[vx],Nx=[Px],TI={version:"1.0",parameters:{Region:bx,UseDualStack:_x,UseFIPS:_x,Endpoint:bx},rules:[{conditions:[{[ur]:"aws.partition",[hr]:[{[ro]:"Region"}],assign:Cf}],type:Ht,rules:[{conditions:[{[ur]:"isSet",[hr]:kx},{[ur]:"parseURL",[hr]:kx,assign:"url"}],type:Ht,rules:[{conditions:Tx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ai},{type:Ht,rules:[{conditions:Nx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ai},{endpoint:{url:Ix,properties:Vt,headers:Vt},type:ci}]}]},{conditions:[vx,Px],type:Ht,rules:[{conditions:[Rx,Ax],type:Ht,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vt,headers:Vt},type:ci}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ai}]},{conditions:Tx,type:Ht,rules:[{conditions:[Rx],type:Ht,rules:[{type:Ht,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Vt,headers:Vt},type:ci}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:ai}]},{conditions:Nx,type:Ht,rules:[{conditions:[Ax],type:Ht,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vt,headers:Vt},type:ci}]},{error:"DualStack is enabled but this partition does not support DualStack",type:ai}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Vt,headers:Vt},type:ci}]}]},Dx=TI;var Bx=(t,e={})=>rn(Dx,{endpointParams:t,logger:e.logger});var Mx=t=>({apiVersion:"2019-06-10",base64Decoder:(t==null?void 0:t.base64Decoder)??dn,base64Encoder:(t==null?void 0:t.base64Encoder)??ln,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??Bx,logger:(t==null?void 0:t.logger)??new Pt,serviceId:(t==null?void 0:t.serviceId)??"SSO OIDC",urlParser:(t==null?void 0:t.urlParser)??je,utf8Decoder:(t==null?void 0:t.utf8Decoder)??Mt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Ur});var Fx=t=>{Mr(process.version);let e=fn(t),r=()=>e().then(Br),n=Mx(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??an,defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??cn({serviceId:n.serviceId,clientVersion:Sx.version}),maxAttempts:(t==null?void 0:t.maxAttempts)??V(Yr),region:(t==null?void 0:t.region)??V(Lt,jr),requestHandler:(t==null?void 0:t.requestHandler)??new qt(r),retryMode:(t==null?void 0:t.retryMode)??V({...Qr,default:async()=>(await r()).retryMode||Ut}),sha256:(t==null?void 0:t.sha256)??ht.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??jt,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??V($r),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??V(qr)}};var nc=class extends Dt{constructor(e){let r=Fx(e),n=wx(r),s=Kr(n),o=Pr(s),i=Xr(o),a=i,d=en(a);super(d),this.config=d,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Gr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(nn(this.config))}destroy(){super.destroy()}};var wf={},Lx=t=>{if(wf[t])return wf[t];let e=new nc({region:t});return wf[t]=e,e};var zx=(t,e)=>Lx(e).send(new to({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}));var Sf=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Ve(`Token is expired. ${js}`,!1)};var un=(t,e,r=!1)=>{if(typeof e>"u")throw new Ve(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${js}`,!1)};var Ux=require("fs"),{writeFile:NI}=Ux.promises,$x=(t,e)=>{let r=La(t),n=JSON.stringify(e,null,2);return NI(r,n)};var qx=new Date(0),jx=(t={})=>async()=>{let e=await sn(t),r=ut(t),n=e[r];if(n){if(!n.sso_session)throw new Ve(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Ve(`Profile '${r}' could not be found in shared credentials file.`,!1);let s=n.sso_session,i=(await qa(t))[s];if(!i)throw new Ve(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let x of["sso_start_url","sso_region"])if(!i[x])throw new Ve(`Sso session '${s}' is missing required property '${x}'.`,!1);let a=i.sso_start_url,d=i.sso_region,c;try{c=await za(s)}catch{throw new Ve(`The SSO session token associated with profile=${r} was not found or is invalid. ${js}`,!1)}un("accessToken",c.accessToken),un("expiresAt",c.expiresAt);let{accessToken:l,expiresAt:u}=c,h={token:l,expiration:new Date(u)};if(h.expiration.getTime()-Date.now()>3e5)return h;if(Date.now()-qx.getTime()<30*1e3)return Sf(h),h;un("clientId",c.clientId,!0),un("clientSecret",c.clientSecret,!0),un("refreshToken",c.refreshToken,!0);try{qx.setTime(Date.now());let x=await zx(c,d);un("accessToken",x.accessToken),un("expiresIn",x.expiresIn);let S=new Date(Date.now()+x.expiresIn*1e3);try{await $x(s,{...c,accessToken:x.accessToken,expiresAt:S.toISOString(),refreshToken:x.refreshToken})}catch{}return{token:x.accessToken,expiration:S}}catch{return Sf(h),h}};var II=15*60*1e3,di=!1,bf=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,profile:i})=>{let a,d="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let R=await jx({profile:i})();a={accessToken:R.token,expiresAt:new Date(R.expiration).toISOString()}}catch(R){throw new B(R.message,di)}else try{a=await za(t)}catch{throw new B(`The SSO session associated with this profile is invalid. ${d}`,di)}if(new Date(a.expiresAt).getTime()-Date.now()<=II)throw new B(`The SSO session associated with this profile has expired. ${d}`,di);let{accessToken:c}=a,l=o||new rc({region:n}),u;try{u=await l.send(new $s({accountId:r,roleName:s,accessToken:c}))}catch(R){throw B.from(R,di)}let{roleCredentials:{accessKeyId:h,secretAccessKey:x,sessionToken:S,expiration:b}={}}=u;if(!h||!x||!S||!b)throw new B("SSO returns an invalid temporary credential.",di);return{accessKeyId:h,secretAccessKey:x,sessionToken:S,expiration:new Date(b)}};var sc=t=>{let{sso_start_url:e,sso_account_id:r,sso_region:n,sso_role_name:s}=t;if(!e||!r||!n||!s)throw new B(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return t};var oc=(t={})=>async()=>{let{ssoStartUrl:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,ssoSession:i}=t,a=ut(t);if(!e&&!r&&!n&&!s&&!i){let c=(await sn(t))[a];if(!c)throw new B(`Profile ${a} was not found.`);if(!ri(c))throw new B(`Profile ${a} is not configured with SSO credentials.`);if(c!=null&&c.sso_session){let R=(await qa(t))[c.sso_session],K=` configurations in profile ${a} and sso-session ${c.sso_session}`;if(n&&n!==R.sso_region)throw new B("Conflicting SSO region"+K,!1);if(e&&e!==R.sso_start_url)throw new B("Conflicting SSO start_url"+K,!1);c.sso_region=R.sso_region,c.sso_start_url=R.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:h,sso_role_name:x,sso_session:S}=sc(c);return bf({ssoStartUrl:l,ssoSession:S,ssoAccountId:u,ssoRegion:h,ssoRoleName:x,ssoClient:o,profile:a})}else{if(!e||!r||!n||!s)throw new B('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return bf({ssoStartUrl:e,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,profile:a})}};var Kx=t=>{let{sso_start_url:e,sso_account_id:r,sso_session:n,sso_region:s,sso_role_name:o}=sc(t);return oc({ssoStartUrl:e,ssoAccountId:r,ssoSession:n,ssoRegion:s,ssoRoleName:o})()};var _f=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1,Rf=t=>Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token});var Hx=require("fs");var Gx=t=>()=>{let{roleArn:e,roleSessionName:r,webIdentityToken:n,providerId:s,policyArns:o,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:d}=t;if(!d)throw new B(`Role Arn '${e}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return d({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:s,PolicyArns:o,Policy:i,DurationSeconds:a})};var vI="AWS_WEB_IDENTITY_TOKEN_FILE",PI="AWS_ROLE_ARN",DI="AWS_ROLE_SESSION_NAME",ic=(t={})=>async()=>BI(t),BI=t=>{let e=(t==null?void 0:t.webIdentityTokenFile)??process.env[vI],r=(t==null?void 0:t.roleArn)??process.env[PI],n=(t==null?void 0:t.roleSessionName)??process.env[DI];if(!e||!r)throw new B("Web identity configuration not specified");return Gx({...t,webIdentityToken:(0,Hx.readFileSync)(e,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var Vx=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,Wx=async(t,e)=>ic({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity})();var Wa=async(t,e,r,n={})=>{let s=e[t];if(Object.keys(n).length>0&&_f(s))return Rf(s);if(NE(s))return OE(t,e,r,n);if(_f(s))return Rf(s);if(Vx(s))return Wx(s,r);if(BE(s))return ME(r,t);if(ri(s))return Kx(s);throw new B(`Profile ${t} could not be found or parsed in shared credentials file.`)};var Yx=(t={})=>async()=>{let e=await sn(t);return Wa(ut(t),e,t)};var MI="AWS_EC2_METADATA_DISABLED",Xx=t=>process.env[Jo]||process.env[Zo]?Ha(t):process.env[MI]?async()=>{throw new B("EC2 Instance Metadata Service access disabled")}:Va(t);var ac=(t={})=>Jr(xa(...t.profile||process.env[df]?[]:[Fa()],oc(t),Yx(t),Ya(t),ic(t),Xx(t),async()=>{throw new B("Could not load credentials from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);var oC="required",q="type",Q="fn",Z="argv",hn="ref",Ln="properties",zn="headers";var kf="PartitionResult",yt="tree",Un="booleanEquals",Ne="stringEquals",iC="sigv4",aC="us-east-1",cC="sts",de="endpoint",dC="https://sts.{Region}.{PartitionResult#dnsSuffix}",li="error",Tf="getAttr",Qx={[oC]:!1,[q]:"String"},Af={[oC]:!0,default:!1,[q]:"Boolean"},Oe={[hn]:"Region"},lC={[hn]:"UseFIPS"},fC={[hn]:"UseDualStack"},Zx={[Q]:"isSet",[Z]:[{[hn]:"Endpoint"}]},uC={[hn]:"Endpoint"},ve={url:"https://sts.amazonaws.com",[Ln]:{authSchemes:[{name:iC,signingRegion:aC,signingName:cC}]},[zn]:{}},mr={},Jx={conditions:[{[Q]:Ne,[Z]:[Oe,"aws-global"]}],[de]:ve,[q]:de},hC={[Q]:Un,[Z]:[lC,!0]},mC={[Q]:Un,[Z]:[fC,!0]},eC={[Q]:Un,[Z]:[!0,{[Q]:Tf,[Z]:[{[hn]:kf},"supportsFIPS"]}]},pC={[hn]:kf},tC={[Q]:Un,[Z]:[!0,{[Q]:Tf,[Z]:[pC,"supportsDualStack"]}]},rC={url:dC,[Ln]:{},[zn]:{}},FI=[uC],nC=[hC],sC=[mC],LI={version:"1.0",parameters:{Region:Qx,UseDualStack:Af,UseFIPS:Af,Endpoint:Qx,UseGlobalEndpoint:Af},rules:[{conditions:[{[Q]:"aws.partition",[Z]:[Oe],assign:kf}],[q]:yt,rules:[{conditions:[{[Q]:Un,[Z]:[{[hn]:"UseGlobalEndpoint"},!0]},{[Q]:Un,[Z]:[lC,!1]},{[Q]:Un,[Z]:[fC,!1]},{[Q]:"not",[Z]:[Zx]}],[q]:yt,rules:[{conditions:[{[Q]:Ne,[Z]:[Oe,"ap-northeast-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"ap-south-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"ap-southeast-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"ap-southeast-2"]}],endpoint:ve,[q]:de},Jx,{conditions:[{[Q]:Ne,[Z]:[Oe,"ca-central-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"eu-central-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"eu-north-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"eu-west-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"eu-west-2"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"eu-west-3"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"sa-east-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,aC]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"us-east-2"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"us-west-1"]}],endpoint:ve,[q]:de},{conditions:[{[Q]:Ne,[Z]:[Oe,"us-west-2"]}],endpoint:ve,[q]:de},{endpoint:{url:dC,[Ln]:{authSchemes:[{name:iC,signingRegion:"{Region}",signingName:cC}]},[zn]:mr},[q]:de}]},{conditions:[Zx,{[Q]:"parseURL",[Z]:FI,assign:"url"}],[q]:yt,rules:[{conditions:nC,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[q]:li},{[q]:yt,rules:[{conditions:sC,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[q]:li},{endpoint:{url:uC,[Ln]:mr,[zn]:mr},[q]:de}]}]},{conditions:[hC,mC],[q]:yt,rules:[{conditions:[eC,tC],[q]:yt,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ln]:mr,[zn]:mr},[q]:de}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[q]:li}]},{conditions:nC,[q]:yt,rules:[{conditions:[eC],[q]:yt,rules:[{[q]:yt,rules:[{conditions:[{[Q]:Ne,[Z]:["aws-us-gov",{[Q]:Tf,[Z]:[pC,"name"]}]}],endpoint:rC,[q]:de},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Ln]:mr,[zn]:mr},[q]:de}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[q]:li}]},{conditions:sC,[q]:yt,rules:[{conditions:[tC],[q]:yt,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ln]:mr,[zn]:mr},[q]:de}]},{error:"DualStack is enabled but this partition does not support DualStack",[q]:li}]},{[q]:yt,rules:[Jx,{endpoint:rC,[q]:de}]}]}]},yC=LI;var gC=(t,e={})=>rn(yC,{endpointParams:t,logger:e.logger});var EC=t=>({apiVersion:"2011-06-15",base64Decoder:(t==null?void 0:t.base64Decoder)??dn,base64Encoder:(t==null?void 0:t.base64Encoder)??ln,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??gC,logger:(t==null?void 0:t.logger)??new Pt,serviceId:(t==null?void 0:t.serviceId)??"STS",urlParser:(t==null?void 0:t.urlParser)??je,utf8Decoder:(t==null?void 0:t.utf8Decoder)??Mt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Ur});var xC=t=>{Mr(process.version);let e=fn(t),r=()=>e().then(Br),n=EC(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??an,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??tE(ac),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??cn({serviceId:n.serviceId,clientVersion:Zg.version}),maxAttempts:(t==null?void 0:t.maxAttempts)??V(Yr),region:(t==null?void 0:t.region)??V(Lt,jr),requestHandler:(t==null?void 0:t.requestHandler)??new qt(r),retryMode:(t==null?void 0:t.retryMode)??V({...Qr,default:async()=>(await r()).retryMode||Ut}),sha256:(t==null?void 0:t.sha256)??ht.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??jt,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??V($r),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??V(qr)}};var $n=class extends Dt{constructor(e){let r=xC(e),n=Qg(r),s=Kr(n),o=Pr(s),i=Xr(o),a=i,d=Xg(a,{stsClientCtor:$n}),c=en(d);super(c),this.config=c,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Gr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(nn(this.config))}destroy(){super.destroy()}};var CC=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,zI=(t={},e)=>af(t,CC($n,e)),UI=(t={},e)=>cf(t,CC($n,e)),wC=t=>e=>t({roleAssumer:zI(e),roleAssumerWithWebIdentity:UI(e),...e});var TC=St(Ko());var mn=class{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&SC(r),new mn(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&SC(e),parseInt(Te(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function SC(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var cc=class{constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){let r=[];for(let o of Object.keys(e)){let i=this.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=this.fromUtf8(e.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let c=new Uint8Array(d.buffer);return c.set(a,3),c;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(mn.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!YI.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(Vy(e.value.replace(/\-/g,"")),1),u}}parse(e){let r={},n=0;for(;n<e.byteLength;){let s=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[o]={type:_C,value:!0};break;case 1:r[o]={type:_C,value:!1};break;case 2:r[o]={type:$I,value:e.getInt8(n++)};break;case 3:r[o]={type:qI,value:e.getInt16(n,!1)},n+=2;break;case 4:r[o]={type:jI,value:e.getInt32(n,!1)},n+=4;break;case 5:r[o]={type:KI,value:new mn(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:let i=e.getUint16(n,!1);n+=2,r[o]={type:GI,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:let a=e.getUint16(n,!1);n+=2,r[o]={type:HI,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:r[o]={type:VI,value:new Date(new mn(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let d=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[o]={type:WI,value:`${Te(d.subarray(0,4))}-${Te(d.subarray(4,6))}-${Te(d.subarray(6,8))}-${Te(d.subarray(8,10))}-${Te(d.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},bC;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(bC||(bC={}));var _C="boolean",$I="byte",qI="short",jI="integer",KI="long",GI="binary",HI="string",VI="timestamp",WI="uuid",YI=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var RC=St(Ko()),AC=4,pn=AC*2,qn=4,XI=pn+qn*2;function kC({byteLength:t,byteOffset:e,buffer:r}){if(t<XI)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");let o=n.getUint32(AC,!1),i=n.getUint32(pn,!1),a=n.getUint32(t-qn,!1),d=new RC.Crc32().update(new Uint8Array(r,e,pn));if(i!==d.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${d.digest()})`);if(d.update(new Uint8Array(r,e+pn,t-(pn+qn))),a!==d.digest())throw new Error(`The message checksum (${d.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+pn+qn,o),body:new Uint8Array(r,e+pn+qn+o,s-o-(pn+qn+qn))}}var dc=class{constructor(e,r){this.headerMarshaller=new cc(e,r)}encode({headers:e,body:r}){let n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,o=new Uint8Array(s),i=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new TC.Crc32;return i.setUint32(0,s,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),i.setUint32(s-4,a.update(o.subarray(8,s-4)).digest(),!1),o}decode(e){let{headers:r,body:n}=kC(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}};function NC(t){let e=0,r=0,n=null,s=null,o=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=t[Symbol.asyncIterator]();for(;;){let{value:d,done:c}=await a.next();if(c){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=d.length,u=0;for(;u<l;){if(!n){let x=l-u;s||(s=new Uint8Array(4));let S=Math.min(4-r,x);if(s.set(d.slice(u,u+S),r),r+=S,u+=S,r<4)break;o(new DataView(s.buffer).getUint32(0,!1)),s=null}let h=Math.min(e-r,l-u);n.set(d.slice(u,u+h),r),r+=h,u+=h,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function OC(t,e){return{[Symbol.asyncIterator]:async function*(){for await(let r of t){let n=e.eventStreamCodec.decode(r),{value:s}=n.headers[":message-type"];if(s==="error"){let o=new Error(n.headers[":error-message"].value||"UnknownError");throw o.name=n.headers[":error-code"].value,o}else if(s==="exception"){let o=n.headers[":exception-type"].value,i={[o]:n},a=await e.deserializer(i);if(a.$unknown){let d=new Error(e.toUtf8(n.body));throw d.name=o,d}throw a[o]}else if(s==="event"){let o={[n.headers[":event-type"].value]:n},i=await e.deserializer(o);if(i.$unknown)continue;yield i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}}}var fi=class{constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new dc(e,r),this.utfEncoder=e}deserialize(e,r){let n=NC(e);return OC(n,{eventStreamCodec:this.eventStreamCodec,deserializer:r,toUtf8:this.utfEncoder})}serialize(e,r){let n=this,s=async function*(){for await(let o of e)yield n.eventStreamCodec.encode(r(o));yield new Uint8Array(0)};return{[Symbol.asyncIterator]:s}}};var vC=require("stream");async function*IC(t){let e=!1,r=!1,n=new Array;for(t.on("error",s=>{if(e||(e=!0),s)throw s}),t.on("data",s=>{n.push(s)}),t.on("end",()=>{e=!0});!r;){let s=await new Promise(o=>setTimeout(()=>o(n.shift()),0));s&&(yield s),r=e&&n.length===0}}var lc=class{constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new fi({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){let n=typeof e[Symbol.asyncIterator]=="function"?e:IC(e);return this.universalMarshaller.deserialize(n,r)}serialize(e,r){return vC.Readable.from(this.universalMarshaller.serialize(e,r))}};var PC=t=>new lc(t);var DC=require("stream"),ui=class extends DC.Writable{constructor(e,r){super(r),this.hash=e}_write(e,r,n){try{this.hash.update(Ge(e))}catch(s){return n(s)}n()}};var BC=(t,e)=>{if(e.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new t,n=new ui(r);return e.pipe(n),new Promise((s,o)=>{e.on("error",i=>{n.end(),o(i)}),n.on("error",o),n.on("finish",()=>{r.digest().then(s).catch(o)})})};var QI="AWS_S3_USE_ARN_REGION",ZI="s3_use_arn_region",MC={environmentVariableSelector:t=>Ft(t,QI,lt.ENV),configFileSelector:t=>Ft(t,ZI,lt.CONFIG),default:!1};var FC=require("stream"),LC=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=e,a=r!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,d=a?i(s,t):void 0,c=new FC.Readable({read:()=>{}});return t.on("data",l=>{c.push(`${(n(l)||0).toString(16)}\r
${l.toString()}\r
`)}),t.on("end",async()=>{if(c.push(`0\r
`),a){let l=r(await d);c.push(`${o}:${l}\r
`),c.push(`\r
`)}c.push(null)}),c};var fc=require("stream"),UC=require("util"),zC="The stream has already been transformed.",$C=t=>{var n,s;if(!(t instanceof fc.Readable)){let o=((s=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:s.name)||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let e=!1,r=async()=>{if(e)throw new Error(zC);return e=!0,await jt(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async o=>{let i=await r();return o===void 0||Buffer.isEncoding(o)?ir(i.buffer,i.byteOffset,i.byteLength).toString(o):new UC.TextDecoder(o).decode(i)},transformToWebStream:()=>{if(e)throw new Error(zC);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof fc.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return e=!0,fc.Readable.toWeb(t)}})};var uc=class{constructor(e){this.sigv4Signer=new Mn(e),this.signerOptions=e}async sign(e,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(e,r)}return this.sigv4Signer.sign(e,r)}async presign(e,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(e,r)}return this.sigv4Signer.presign(e,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let e;try{if(e=typeof require=="function"&&require("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof e!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var Xf="required",f="type",g="rules",y="conditions",m="fn",p="argv",C="ref",Se="assign",A="url",k="properties",M="authSchemes",F="disableDoubleEncoding",L="signingName",z="signingRegion",T="headers";var E="tree",Je="isSet",hi="substring",Ww="hardwareType",Yw="regionPrefix",qC="abbaSuffix",Wf="outpostId",Ei="aws.partition",I="stringEquals",Gn="isValidHostLabel",fe="not",N="error",Xw="parseURL",Qf="s3-outposts",w="endpoint",_="booleanEquals",Qw="aws.parseArn",U="s3",jC="aws.isVirtualHostableS3Bucket",le="getAttr",D="name",Nf="Host override cannot be combined with Dualstack, FIPS, or S3 Accelerate",Zw="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Jw="bucketArn",eS="arnType",Ec="",Zf="s3-object-lambda",tS="accesspoint",Jf="accessPointName",KC="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",GC="mrapPartition",HC="outpostType",VC="arnPrefix",Hn="{url#scheme}://{url#authority}{url#path}",rS="https://s3.{partitionResult#dnsSuffix}",Of={[Xf]:!1,[f]:"String"},mi={[Xf]:!0,default:!1,[f]:"Boolean"},hc={[Xf]:!1,[f]:"Boolean"},nS={[m]:Je,[p]:[{[C]:"Bucket"}]},Wt={[C]:"Bucket"},WC={[C]:Ww},YC={[y]:[{[m]:fe,[p]:[{[m]:Je,[p]:[{[C]:"Endpoint"}]}]}],[N]:"Expected a endpoint to be specified but no endpoint was found",[f]:N},$={[m]:fe,[p]:[{[m]:Je,[p]:[{[C]:"Endpoint"}]}]},j={[m]:Je,[p]:[{[C]:"Endpoint"}]},re={[m]:Xw,[p]:[{[C]:"Endpoint"}],[Se]:"url"},mc={[M]:[{[F]:!0,[D]:"sigv4",[L]:Qf,[z]:"{Region}"}]},ge={},XC={[C]:"ForcePathStyle"},QC={[y]:[{[m]:"uriEncode",[p]:[Wt],[Se]:"uri_encoded_bucket"}],[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},j],[N]:"Cannot set dual-stack in combination with a custom endpoint.",[f]:N},{[f]:E,[g]:[{[y]:[{[m]:Ei,[p]:[{[C]:"Region"}],[Se]:"partitionResult"}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[C]:"Accelerate"},!1]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[w]:{[A]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[A]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[w]:{[A]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!0]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[A]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[w]:{[A]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!0]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[A]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[y]:[{[m]:I,[p]:[{[C]:"Region"},"us-east-1"]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},j,re,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]}],[f]:E,[g]:[{[y]:[{[m]:I,[p]:[{[C]:"Region"},"us-east-1"]}],[w]:{[A]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w},{[w]:{[A]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]},{[y]:[{[m]:_,[p]:[{[C]:"UseDualStack"},!1]},$,{[m]:_,[p]:[{[C]:"UseFIPS"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},{[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]}],[w]:{[A]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},[T]:{}},[f]:w}]}]},{[N]:"Path-style addressing cannot be used with S3 Accelerate",[f]:N}]}]},{[N]:"A valid partition could not be determined",[f]:N}]}]},se={[m]:_,[p]:[{[C]:"UseDualStack"},!0]},xe={[m]:_,[p]:[{[C]:"Accelerate"},!1]},ae={[m]:_,[p]:[{[C]:"UseFIPS"},!0]},W={[m]:fe,[p]:[{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}]},Pe={[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!0]},Be={[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{Region}"}]},De={[m]:_,[p]:[{[C]:"UseGlobalEndpoint"},!1]},J={[m]:_,[p]:[{[C]:"UseDualStack"},!1]},G={[m]:_,[p]:[{[C]:"UseFIPS"},!1]},jn={[N]:"A valid partition could not be determined",[f]:N},If={[y]:[ae,{[m]:I,[p]:[{[m]:le,[p]:[{[C]:"partitionResult"},D]},"aws-cn"]}],[N]:"Partition does not support FIPS",[f]:N},cv={[m]:I,[p]:[{[m]:le,[p]:[{[C]:"partitionResult"},D]},"aws-cn"]},At={[m]:_,[p]:[{[C]:"Accelerate"},!0]},ZC={[y]:[se,ae,xe,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},JC={[A]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},ew={[y]:[J,ae,xe,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},tw={[A]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},rw={[y]:[se,G,At,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},nw={[A]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},sw={[y]:[se,G,xe,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},ow={[A]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},iw={[y]:[J,G,xe,j,re,{[m]:_,[p]:[{[m]:le,[p]:[{[C]:"url"},"isIp"]},!0]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},aw={[m]:_,[p]:[{[m]:le,[p]:[{[C]:"url"},"isIp"]},!0]},eu={[C]:"url"},cw={[y]:[J,G,xe,j,re,{[m]:_,[p]:[{[m]:le,[p]:[eu,"isIp"]},!1]},{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},dw={[m]:_,[p]:[{[m]:le,[p]:[eu,"isIp"]},!1]},vf={[A]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",[k]:Be,[T]:{}},Yf={[A]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",[k]:Be,[T]:{}},lw={[w]:Yf,[f]:w},fw={[y]:[J,G,At,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},Pf={[A]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},uw={[y]:[J,G,xe,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:Zw,[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},hw={[A]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},pc={[N]:"Invalid region: region was not a valid DNS name.",[f]:N},We={[C]:Jw},sS={[C]:eS},Df={[m]:le,[p]:[We,"service"]},tu={[C]:Jf},mw={[y]:[se],[N]:"S3 Object Lambda does not support Dual-stack",[f]:N},pw={[y]:[At],[N]:"S3 Object Lambda does not support S3 Accelerate",[f]:N},yw={[y]:[{[m]:Je,[p]:[{[C]:"DisableAccessPoints"}]},{[m]:_,[p]:[{[C]:"DisableAccessPoints"},!0]}],[N]:"Access points are not supported for this operation",[f]:N},Bf={[y]:[{[m]:Je,[p]:[{[C]:"UseArnRegion"}]},{[m]:_,[p]:[{[C]:"UseArnRegion"},!1]},{[m]:fe,[p]:[{[m]:I,[p]:[{[m]:le,[p]:[We,"region"]},"{Region}"]}]}],[N]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[f]:N},ru={[m]:le,[p]:[{[C]:"bucketPartition"},D]},oS={[m]:le,[p]:[We,"accountId"]},gw={[y]:[ae,{[m]:I,[p]:[ru,"aws-cn"]}],[N]:"Partition does not support FIPS",[f]:N},Mf={[M]:[{[F]:!0,[D]:"sigv4",[L]:Zf,[z]:"{bucketArn#region}"}]},Ew={[N]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[f]:N},Ff={[N]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[f]:N},Lf={[N]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[f]:N},zf={[N]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[f]:N},xw={[N]:"Could not load partition for ARN region `{bucketArn#region}`",[f]:N},Cw={[N]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[f]:N},ww={[N]:"Invalid ARN: bucket ARN is missing a region",[f]:N},Sw={[N]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[f]:N},pi={[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"{bucketArn#region}"}]},bw={[M]:[{[F]:!0,[D]:"sigv4",[L]:Qf,[z]:"{bucketArn#region}"}]},_w={[C]:"UseObjectLambdaEndpoint"},Uf={[M]:[{[F]:!0,[D]:"sigv4",[L]:Zf,[z]:"{Region}"}]},Rw={[y]:[ae,se,j,re,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:Hn,[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},iS={[w]:{[A]:Hn,[k]:Be,[T]:{}},[f]:w},yi={[A]:Hn,[k]:Be,[T]:{}},Aw={[y]:[ae,se,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},kw={[A]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},Tw={[y]:[ae,J,j,re,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:Hn,[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},Nw={[y]:[ae,J,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},Ow={[A]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},Iw={[y]:[G,se,j,re,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:Hn,[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},vw={[y]:[G,se,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},Pw={[A]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},Dw={[y]:[G,J,j,re,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:Hn,[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},Bw={[y]:[G,J,$,{[m]:I,[p]:[{[C]:"Region"},"aws-global"]}],[w]:{[A]:rS,[k]:{[M]:[{[F]:!0,[D]:"sigv4",[L]:U,[z]:"us-east-1"}]},[T]:{}},[f]:w},Mw={[A]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[k]:Be,[T]:{}},gc=[{[C]:"Region"}],dv=[Wt],Fw=[{[m]:Gn,[p]:[{[C]:Wf},!1]}],Lw=[{[m]:I,[p]:[{[C]:Yw},"beta"]}],lv=[{[C]:"Endpoint"}],gi=[j,re],zw=[nS],Uw=[{[m]:Qw,[p]:[Wt]}],fv=[se,j],Kn=[{[m]:Ei,[p]:gc,[Se]:"partitionResult"}],no=[{[m]:I,[p]:[{[C]:"Region"},"us-east-1"]}],$w=[{[m]:Gn,[p]:[{[C]:"Region"},!1]}],$f=[{[m]:I,[p]:[sS,tS]}],qw=[{[m]:le,[p]:[We,"resourceId[1]"],[Se]:Jf},{[m]:fe,[p]:[{[m]:I,[p]:[tu,Ec]}]}],uv=[We,"resourceId[1]"],jw=[se],qf=[At],jf=[{[m]:fe,[p]:[{[m]:I,[p]:[{[m]:le,[p]:[We,"region"]},Ec]}]}],Kw=[{[m]:fe,[p]:[{[m]:Je,[p]:[{[m]:le,[p]:[We,"resourceId[2]"]}]}]}],hv=[We,"resourceId[2]"],Kf=[{[m]:Ei,[p]:[{[m]:le,[p]:[We,"region"]}],[Se]:"bucketPartition"}],Gw=[{[m]:I,[p]:[ru,{[m]:le,[p]:[{[C]:"partitionResult"},D]}]}],Gf=[{[m]:Gn,[p]:[{[m]:le,[p]:[We,"region"]},!0]}],Hf=[{[m]:Gn,[p]:[oS,!1]}],Hw=[{[m]:Gn,[p]:[tu,!1]}],yc=[ae],Vw=[{[m]:Gn,[p]:[{[C]:"Region"},!0]}],Vf=[iS],mv={version:"1.0",parameters:{Bucket:Of,Region:Of,UseFIPS:mi,UseDualStack:mi,Endpoint:Of,ForcePathStyle:hc,Accelerate:mi,UseGlobalEndpoint:mi,UseObjectLambdaEndpoint:hc,DisableAccessPoints:hc,DisableMultiRegionAccessPoints:mi,UseArnRegion:hc},[g]:[{[f]:E,[g]:[{[y]:[{[m]:Je,[p]:gc}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[nS,{[m]:hi,[p]:[Wt,49,50,!0],[Se]:Ww},{[m]:hi,[p]:[Wt,8,12,!0],[Se]:Yw},{[m]:hi,[p]:[Wt,0,7,!0],[Se]:qC},{[m]:hi,[p]:[Wt,32,49,!0],[Se]:Wf},{[m]:Ei,[p]:gc,[Se]:"regionPartition"},{[m]:I,[p]:[{[C]:qC},"--op-s3"]}],[f]:E,[g]:[{[y]:Fw,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[WC,"e"]}],[f]:E,[g]:[{[y]:Lw,[f]:E,[g]:[YC,{[y]:gi,endpoint:{[A]:"https://{Bucket}.ec2.{url#authority}",[k]:mc,[T]:ge},[f]:w}]},{endpoint:{[A]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:mc,[T]:ge},[f]:w}]},{[y]:[{[m]:I,[p]:[WC,"o"]}],[f]:E,[g]:[{[y]:Lw,[f]:E,[g]:[YC,{[y]:gi,endpoint:{[A]:"https://{Bucket}.op-{outpostId}.{url#authority}",[k]:mc,[T]:ge},[f]:w}]},{endpoint:{[A]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:mc,[T]:ge},[f]:w}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[f]:N}]}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[f]:N}]},{[y]:zw,[f]:E,[g]:[{[y]:[j,{[m]:fe,[p]:[{[m]:Je,[p]:[{[m]:Xw,[p]:lv}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[f]:N},{[f]:E,[g]:[{[y]:[{[m]:Je,[p]:[XC]},{[m]:_,[p]:[XC,!0]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:Uw,error:"Path-style addressing cannot be used with ARN buckets",[f]:N},QC]}]},{[y]:[{[m]:jC,[p]:[Wt,!1]}],[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:$w,[f]:E,[g]:[{[f]:E,[g]:[If,{[f]:E,[g]:[{[y]:[At,ae],error:"Accelerate cannot be used with FIPS",[f]:N},{[f]:E,[g]:[{[y]:[At,cv],error:"S3 Accelerate cannot be used in this region",[f]:N},{[f]:E,[g]:[{[y]:[j,se],error:Nf,[f]:N},{[f]:E,[g]:[{[y]:[j,ae],error:Nf,[f]:N},{[f]:E,[g]:[{[y]:[j,At],error:Nf,[f]:N},{[f]:E,[g]:[ZC,ZC,{[y]:[se,ae,xe,$,W,Pe],[f]:E,[g]:[{endpoint:JC,[f]:w}]},{[y]:[se,ae,xe,$,W,De],endpoint:JC,[f]:w},ew,ew,{[y]:[J,ae,xe,$,W,Pe],[f]:E,[g]:[{endpoint:tw,[f]:w}]},{[y]:[J,ae,xe,$,W,De],endpoint:tw,[f]:w},rw,rw,{[y]:[se,G,At,$,W,Pe],[f]:E,[g]:[{endpoint:nw,[f]:w}]},{[y]:[se,G,At,$,W,De],endpoint:nw,[f]:w},sw,sw,{[y]:[se,G,xe,$,W,Pe],[f]:E,[g]:[{endpoint:ow,[f]:w}]},{[y]:[se,G,xe,$,W,De],endpoint:ow,[f]:w},iw,cw,iw,cw,{[y]:[J,G,xe,j,re,aw,W,Pe],[f]:E,[g]:[{[y]:no,endpoint:vf,[f]:w},{endpoint:vf,[f]:w}]},{[y]:[J,G,xe,j,re,dw,W,Pe],[f]:E,[g]:[{[y]:no,endpoint:Yf,[f]:w},lw]},{[y]:[J,G,xe,j,re,aw,W,De],endpoint:vf,[f]:w},{[y]:[J,G,xe,j,re,dw,W,De],endpoint:Yf,[f]:w},fw,fw,{[y]:[J,G,At,$,W,Pe],[f]:E,[g]:[{[y]:no,endpoint:Pf,[f]:w},{endpoint:Pf,[f]:w}]},{[y]:[J,G,At,$,W,De],endpoint:Pf,[f]:w},uw,uw,{[y]:[J,G,xe,$,W,Pe],[f]:E,[g]:[{[y]:no,endpoint:{[A]:Zw,[k]:Be,[T]:ge},[f]:w},{endpoint:hw,[f]:w}]},{[y]:[J,G,xe,$,W,De],endpoint:hw,[f]:w}]}]}]}]}]}]}]}]},pc]}]},jn]},{[y]:[j,re,{[m]:I,[p]:[{[m]:le,[p]:[eu,"scheme"]},"http"]},{[m]:jC,[p]:[Wt,!0]},G,J,xe],[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:$w,[f]:E,[g]:[lw]},pc]}]},jn]},{[y]:[{[m]:Qw,[p]:dv,[Se]:Jw}],[f]:E,[g]:[{[y]:[{[m]:le,[p]:[We,"resourceId[0]"],[Se]:eS},{[m]:fe,[p]:[{[m]:I,[p]:[sS,Ec]}]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[Df,Zf]}],[f]:E,[g]:[{[y]:$f,[f]:E,[g]:[{[f]:E,[g]:[{[y]:qw,[f]:E,[g]:[{[f]:E,[g]:[mw,{[f]:E,[g]:[pw,{[f]:E,[g]:[{[y]:jf,[f]:E,[g]:[{[f]:E,[g]:[yw,{[f]:E,[g]:[{[y]:Kw,[f]:E,[g]:[{[f]:E,[g]:[Bf,{[f]:E,[g]:[{[y]:Kf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Gw,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Gf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[oS,Ec]}],error:"Invalid ARN: Missing account id",[f]:N},{[f]:E,[g]:[{[y]:Hf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Hw,[f]:E,[g]:[{[f]:E,[g]:[gw,{[f]:E,[g]:[{[y]:gi,endpoint:{[A]:KC,[k]:Mf,[T]:ge},[f]:w},{[y]:yc,endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:Mf,[T]:ge},[f]:w},{endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:Mf,[T]:ge},[f]:w}]}]}]},Ew]}]},Ff]}]}]},Lf]}]},zf]}]},jn]}]},xw]}]}]},Cw]}]}]},ww]}]}]}]},Sw]}]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[f]:N}]},{[y]:$f,[f]:E,[g]:[{[y]:qw,[f]:E,[g]:[{[f]:E,[g]:[{[y]:jf,[f]:E,[g]:[{[y]:$f,[f]:E,[g]:[{[y]:jf,[f]:E,[g]:[{[f]:E,[g]:[yw,{[f]:E,[g]:[{[y]:Kw,[f]:E,[g]:[{[f]:E,[g]:[Bf,{[f]:E,[g]:[{[y]:Kf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[ru,"{partitionResult#name}"]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:Gf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[Df,U]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:Hf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Hw,[f]:E,[g]:[{[f]:E,[g]:[{[y]:qf,error:"Access Points do not support S3 Accelerate",[f]:N},{[f]:E,[g]:[gw,{[f]:E,[g]:[{[y]:fv,error:"DualStack cannot be combined with a Host override (PrivateLink)",[f]:N},{[f]:E,[g]:[{[y]:[ae,se],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:pi,[T]:ge},[f]:w},{[y]:[ae,J],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:pi,[T]:ge},[f]:w},{[y]:[G,se],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:pi,[T]:ge},[f]:w},{[y]:[G,J,j,re],endpoint:{[A]:KC,[k]:pi,[T]:ge},[f]:w},{[y]:[G,J],endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:pi,[T]:ge},[f]:w}]}]}]}]}]},Ew]}]},Ff]}]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[f]:N}]}]},Lf]}]},zf]}]},jn]}]},xw]}]}]},Cw]}]}]},ww]}]},{[f]:E,[g]:[{[y]:[{[m]:Gn,[p]:[tu,!0]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:jw,error:"S3 MRAP does not support dual-stack",[f]:N},{[f]:E,[g]:[{[y]:yc,error:"S3 MRAP does not support FIPS",[f]:N},{[f]:E,[g]:[{[y]:qf,error:"S3 MRAP does not support S3 Accelerate",[f]:N},{[f]:E,[g]:[{[y]:[{[m]:_,[p]:[{[C]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[f]:N},{[f]:E,[g]:[{[y]:[{[m]:Ei,[p]:gc,[Se]:GC}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[{[m]:le,[p]:[{[C]:GC},D]},{[m]:le,[p]:[We,"partition"]}]}],[f]:E,[g]:[{endpoint:{[A]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[k]:{[M]:[{[F]:!0,name:"sigv4a",[L]:U,signingRegionSet:["*"]}]},[T]:ge},[f]:w}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[f]:N}]}]},{error:"{Region} was not a valid region",[f]:N}]}]}]}]}]}]},{error:"Invalid Access Point Name",[f]:N}]}]}]},Sw]},{[y]:[{[m]:I,[p]:[Df,Qf]}],[f]:E,[g]:[{[y]:jw,error:"S3 Outposts does not support Dual-stack",[f]:N},{[f]:E,[g]:[{[y]:yc,error:"S3 Outposts does not support FIPS",[f]:N},{[f]:E,[g]:[{[y]:qf,error:"S3 Outposts does not support S3 Accelerate",[f]:N},{[f]:E,[g]:[{[y]:[{[m]:Je,[p]:[{[m]:le,[p]:[We,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[f]:N},{[f]:E,[g]:[{[y]:[{[m]:le,[p]:uv,[Se]:Wf}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:Fw,[f]:E,[g]:[{[f]:E,[g]:[Bf,{[f]:E,[g]:[{[y]:Kf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Gw,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Gf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Hf,[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:le,[p]:hv,[Se]:HC}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:le,[p]:[We,"resourceId[3]"],[Se]:Jf}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:[{[m]:I,[p]:[{[C]:HC},tS]}],[f]:E,[g]:[{[f]:E,[g]:[{[y]:gi,endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[k]:bw,[T]:ge},[f]:w},{endpoint:{[A]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:bw,[T]:ge},[f]:w}]}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[f]:N}]}]},{error:"Invalid ARN: expected an access point name",[f]:N}]}]},{error:"Invalid ARN: Expected a 4-component resource",[f]:N}]}]},Ff]}]},Lf]}]},zf]}]},jn]}]},{error:"Could not load partition for ARN region {bucketArn#region}",[f]:N}]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[f]:N}]}]},{error:"Invalid ARN: The Outpost Id was not set",[f]:N}]}]}]}]}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[f]:N}]}]},{error:"Invalid ARN: No ARN type specified",[f]:N}]},{[y]:[{[m]:hi,[p]:[Wt,0,4,!1],[Se]:VC},{[m]:I,[p]:[{[C]:VC},"arn:"]},{[m]:fe,[p]:[{[m]:Je,[p]:Uw}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[f]:N},QC]}]},{[y]:[{[m]:Je,[p]:[_w]},{[m]:_,[p]:[_w,!0]}],[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Vw,[f]:E,[g]:[{[f]:E,[g]:[mw,{[f]:E,[g]:[pw,{[f]:E,[g]:[If,{[f]:E,[g]:[{[y]:gi,endpoint:{[A]:Hn,[k]:Uf,[T]:ge},[f]:w},{[y]:yc,endpoint:{[A]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Uf,[T]:ge},[f]:w},{endpoint:{[A]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[k]:Uf,[T]:ge},[f]:w}]}]}]}]}]},pc]}]},jn]},{[y]:[{[m]:fe,[p]:zw}],[f]:E,[g]:[{[y]:Kn,[f]:E,[g]:[{[f]:E,[g]:[{[y]:Vw,[f]:E,[g]:[{[f]:E,[g]:[If,{[f]:E,[g]:[Rw,Rw,{[y]:[ae,se,j,re,W,Pe],[f]:E,[g]:Vf},{[y]:[ae,se,j,re,W,De],endpoint:yi,[f]:w},Aw,Aw,{[y]:[ae,se,$,W,Pe],[f]:E,[g]:[{endpoint:kw,[f]:w}]},{[y]:[ae,se,$,W,De],endpoint:kw,[f]:w},Tw,Tw,{[y]:[ae,J,j,re,W,Pe],[f]:E,[g]:Vf},{[y]:[ae,J,j,re,W,De],endpoint:yi,[f]:w},Nw,Nw,{[y]:[ae,J,$,W,Pe],[f]:E,[g]:[{endpoint:Ow,[f]:w}]},{[y]:[ae,J,$,W,De],endpoint:Ow,[f]:w},Iw,Iw,{[y]:[G,se,j,re,W,Pe],[f]:E,[g]:Vf},{[y]:[G,se,j,re,W,De],endpoint:yi,[f]:w},vw,vw,{[y]:[G,se,$,W,Pe],[f]:E,[g]:[{endpoint:Pw,[f]:w}]},{[y]:[G,se,$,W,De],endpoint:Pw,[f]:w},Dw,Dw,{[y]:[G,J,j,re,W,Pe],[f]:E,[g]:[{[y]:no,endpoint:yi,[f]:w},iS]},{[y]:[G,J,j,re,W,De],endpoint:yi,[f]:w},Bw,Bw,{[y]:[G,J,$,W,Pe],[f]:E,[g]:[{[y]:no,endpoint:{[A]:rS,[k]:Be,[T]:ge},[f]:w},{endpoint:Mw,[f]:w}]},{[y]:[G,J,$,W,De],endpoint:Mw,[f]:w}]}]}]},pc]}]},jn]}]}]},{error:"A region must be set when sending requests to S3.",[f]:N}]}]},aS=mv;var cS=(t,e={})=>rn(aS,{endpointParams:t,logger:e.logger});var dS=t=>({apiVersion:"2006-03-01",base64Decoder:(t==null?void 0:t.base64Decoder)??dn,base64Encoder:(t==null?void 0:t.base64Encoder)??ln,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??cS,logger:(t==null?void 0:t.logger)??new Pt,serviceId:(t==null?void 0:t.serviceId)??"S3",signerConstructor:(t==null?void 0:t.signerConstructor)??uc,signingEscapePath:(t==null?void 0:t.signingEscapePath)??!1,urlParser:(t==null?void 0:t.urlParser)??je,useArnRegion:(t==null?void 0:t.useArnRegion)??!1,utf8Decoder:(t==null?void 0:t.utf8Decoder)??Mt,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Ur});var lS=t=>{Mr(process.version);let e=fn(t),r=()=>e().then(Br),n=dS(t);return{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??an,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??wC(ac),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??cn({serviceId:n.serviceId,clientVersion:vg.version}),eventStreamSerdeProvider:(t==null?void 0:t.eventStreamSerdeProvider)??PC,getAwsChunkedEncodingStream:(t==null?void 0:t.getAwsChunkedEncodingStream)??LC,maxAttempts:(t==null?void 0:t.maxAttempts)??V(Yr),md5:(t==null?void 0:t.md5)??ht.bind(null,"md5"),region:(t==null?void 0:t.region)??V(Lt,jr),requestHandler:(t==null?void 0:t.requestHandler)??new qt(r),retryMode:(t==null?void 0:t.retryMode)??V({...Qr,default:async()=>(await r()).retryMode||Ut}),sdkStreamMixin:(t==null?void 0:t.sdkStreamMixin)??$C,sha1:(t==null?void 0:t.sha1)??ht.bind(null,"sha1"),sha256:(t==null?void 0:t.sha256)??ht.bind(null,"sha256"),streamCollector:(t==null?void 0:t.streamCollector)??jt,streamHasher:(t==null?void 0:t.streamHasher)??BC,useArnRegion:(t==null?void 0:t.useArnRegion)??V(MC),useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??V($r),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??V(qr)}};var xc=class extends Dt{constructor(e){let r=lS(e),n=Ig(r),s=Kr(n),o=Pr(s),i=Xr(o),a=i,d=ka(a),c=Gp(d),l=en(c),u=ky(l);super(u),this.config=u,this.middlewareStack.use(Zr(this.config)),this.middlewareStack.use(Gr(this.config)),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use(Vr(this.config)),this.middlewareStack.use(Wr(this.config)),this.middlewareStack.use(Na(this.config)),this.middlewareStack.use(Hp(this.config)),this.middlewareStack.use(Ny(this.config)),this.middlewareStack.use(nn(this.config))}destroy(){super.destroy()}};var l_=St(c_()),YD=new xc({});async function XD(){try{let t=(0,To.getInput)("bucket",{required:!0}),e=(0,To.getInput)("name",{required:!0}),r=(0,To.getInput)("prefix");console.info("Downloading...");let n=setInterval(()=>console.info("Still downloading..."),1e4),s=await YD.send(new ws({Bucket:t,Key:d_.posix.join(r,e+".tgz")}));if(s.$metadata.httpStatusCode===200&&s.Body!==void 0){let o=(0,l_.extract)({cwd:process.cwd()});await QD(s.Body,o),clearInterval(n),console.info("Download complete.")}}catch(t){console.info("Download failed."),t instanceof Error&&(0,To.setFailed)(t)}}function QD(t,e){return new Promise((r,n)=>{t.on("error",n),e.on("error",n),e.on("close",r),t.pipe(e)})}XD();
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
